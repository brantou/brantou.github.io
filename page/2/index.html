<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">










  <meta name="baidu-site-verification" content="2NCO1zLkcL">







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Brantou的日常" type="application/atom+xml">






<meta name="description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta property="og:type" content="website">
<meta property="og:title" content="Brantou的日常">
<meta property="og:url" content="https://brantou.github.io/page/2/index.html">
<meta property="og:site_name" content="Brantou的日常">
<meta property="og:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brantou的日常">
<meta name="twitter:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://brantou.github.io/page/2/">





  <title>Brantou的日常 - The best time to plant a tree was 20 years ago. The second best time is now.</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-99654689-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a82c2fbb2a57e8b3c01e31a60807a7f6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Brantou的日常</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">二三事</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/12/05/emacs-go-tag/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/05/emacs-go-tag/" itemprop="url">Emacs支持gomodifytags</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-05T00:00:00+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/emacs-plugin/" itemprop="url" rel="index">
                    <span itemprop="name">emacs-plugin</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/05/emacs-go-tag/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/12/05/emacs-go-tag/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
受到<a href="http://www.jianshu.com/p/20b533c5c3f9" rel="external nofollow noopener noreferrer" target="_blank">《Go 终极指南：编写一个 Go 工具》</a>的启发，萌生了把 <a href="https://github.com/fatih/gomodifytags" rel="external nofollow noopener noreferrer" target="_blank">gomodifytags</a> 封装成emacs-plugin的想法，
然后经过两周的努力，诞生了<a href="https://github.com/brantou/emacs-go-tag" rel="external nofollow noopener noreferrer" target="_blank">emacs-go-tag</a>。
<code>emacs-go-tag</code> 实现了两个命令： <code>go-tag-add</code> 添加结构体字段tag， <code>go-tag-remove</code> 删除结构体字段tag。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-c1a9f516-96c0-43f0-a40e-3541cc0e5014" name="ID-c1a9f516-96c0-43f0-a40e-3541cc0e5014"></a><span class="section-number-2">1</span> 安装依赖</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>emacs-go-tag</code> 有两个依赖项， <code>gomodifytags</code> 和 <a href="https://github.com/dominikh/go-mode.el" rel="external nofollow noopener noreferrer" target="_blank">go-mode.el</a>，若使用emacs做Go开发 <code>go-mode.el</code> 应该已经在使用了。
gomodifytags安装如下:
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/fatih/gomodifytags</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-dcb13c65-0204-4e14-8446-9c0e5e3fe2be" name="ID-dcb13c65-0204-4e14-8446-9c0e5e3fe2be"></a><span class="section-number-2">2</span> 安装</h2>
<div class="outline-text-2" id="text-2">
<p>
目前emacs-go-tag已发布到了<a href="https://melpa.org" rel="external nofollow noopener noreferrer" target="_blank">MELPA</a>上，可使用如下命令安装：
<code>M-x package-install [RET] go-tag [RET]</code>
若是没发现go-tag,你需要使用如下命令来刷新,然后在使用上面的命令进行安装:
<code>M-x package-refresh-contents [RET]</code>
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-fc076558-8801-441a-a81c-d8b7b380046f" name="ID-fc076558-8801-441a-a81c-d8b7b380046f"></a><span class="section-number-2">3</span> 配置</h2>
<div class="outline-text-2" id="text-3">
<p>
目前 <code>gomodifytags</code> 支持三种转换如下：
</p>
<ul class="org-ul">
<li>snakecase: BaseDomain -&gt; base_domain
</li>
<li>camelcase: BaseDomain -&gt; baseDomain
</li>
<li>lispcase: BaseDomain -&gt; base-domain
</li>
</ul>

<p>
默认使用 <code>snakecase</code> , 若你准备使用 <code>camelcase</code>, 可配置如下：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq go-tag-args (list &#34;-transform&#34; &#34;camelcase&#34;))</span><br></pre></td></tr></table></figure>
</div>

<p>
快捷键配置示例：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(with-eval-after-load &#39;go-mode&#10;  (define-key go-mode-map (kbd &#34;C-c t&#34;) #&#39;go-tag-add)&#10;  (define-key go-mode-map (kbd &#34;C-c T&#34;) #&#39;go-tag-remove))</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-115052a8-4563-4ddc-a6cb-7f8a37fe8746" name="ID-115052a8-4563-4ddc-a6cb-7f8a37fe8746"></a><span class="section-number-2">4</span> 使用说明</h2>
<div class="outline-text-2" id="text-4">

<p>
  若是你有使用 vim-go 的 <code>GoAddTags</code> 和 <code>GoRemoveTags</code> 命令的经验， 那么你会很快上手 <code>emacs-go-tag</code>,
因为两者的行为完全一致（若有不同，请反馈）。
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><a id="ID-1bda75e3-95d3-44e4-b511-302dc6596fff" name="ID-1bda75e3-95d3-44e4-b511-302dc6596fff"></a><span class="section-number-3">4.1</span> <code>go-tag-add</code></h3>
<div class="outline-text-3" id="text-4-1">

<p>
<code>:[range] go-tag-add [key],[option] [key1],[option] …</code>
为结构体字段添加tag。如果在一个结构中调用，会自动添加json字段tag。
若在结构体之外调用，或者文件格式不正确，则会给出错误消息。
</p>

<p>
如果给出 <code>[range]</code> ，则只有选定的字段将被改变。
</p>

<p>
默认的json可以通过提供一个或多个 <code>[key]</code> 参数来改变。
添加xml和db的例子是：
<code>:go-tag-add xml db</code>
</p>

<p>
若提供了 <code>[option]</code> 也提供了，会在添加tag时，一同添加 <code>option</code> , 或者修改已存在的tag。 如下：
<code>:go-tag-add json,omitempty</code>
</p>

<p>
也可以定义一个常数值而不是默认的基于字段的值。 例如，以下命令将添加`valid：“1”`到所有字段。
<code>:go-tag-add valid=1</code>
</p>

<div class="export">
<p>
&lt;img src="<img src="https://github.com/brantou/emacs-go-tag/raw/master/img/go-tag-add.gif" alt="go-tag-add.gif">&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><a id="ID-1dd1e27b-cb8e-4caf-b6ec-244226ad4499" name="ID-1dd1e27b-cb8e-4caf-b6ec-244226ad4499"></a><span class="section-number-3">4.2</span> <code>go-tag-remove</code></h3>
<div class="outline-text-3" id="text-4-2">

<p>
<code>:[range] go-tag-add [key],[option] [key1],[option] …</code>
 移除结构字段的字段标记。 如果在一个结构中调用，它会自动删除所有的字段tag。
 如果在结构体定义之外调用，或者文件格式不正确，则会给出错误消息。
</p>

<p>
如果给出 <code>[range]</code> ，则只有选定的字段将被改变。
</p>

<p>
如果给出 <code>[key]</code> ，则只会删除这些key相关的tag。 如下只删除json相关的tag：
<code>:go-tag-remove json</code>
</p>

<p>
如果 <code>[option]</code> 和 <code>[key]</code> 一同传递，则只会删除 <code>option</code> 。
例如，下面命令只会从包含json的字段中删除omitempty选项：
<code>:go-tag-remove json,omitempty</code>
</p>

<div class="export">
<p>
&lt;img src="<img src="https://github.com/brantou/emacs-go-tag/raw/master/img/go-tag-remove.gif" alt="go-tag-remove.gif">&rdquo; /&gt;
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-9437067b-8701-479f-b594-84460bf62310" name="ID-9437067b-8701-479f-b594-84460bf62310"></a><span class="section-number-2">5</span> 最后</h2>
<div class="outline-text-2" id="text-5">
<p>
感谢 <code>GoCN每日新闻</code> 的每日推送，让我得以读到 <a href="http://www.jianshu.com/p/20b533c5c3f9" rel="external nofollow noopener noreferrer" target="_blank">《Go 终极指南：编写一个 Go 工具》</a>, 然后我才得以写出这个emacs-plugin。
这里给出项目地址：<a href="https://github.com/brantou/emacs-go-tag" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/brantou/emacs-go-tag</a>, 欢迎大家来使用和来提问题，若是你觉得对你有帮助， <code>就给颗星</code> 吧。
</p>
</div>
</div>

Last Updated 2017-12-08 Fri 12:31.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/11/24/go-tool/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/24/go-tool/" itemprop="url">Go语言不完全工具列表</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T00:00:00+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/24/go-tool/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/11/24/go-tool/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-1da2b186-ec5a-4c33-87fc-4edd8cdc60ff" name="ID-1da2b186-ec5a-4c33-87fc-4edd8cdc60ff"></a><span class="section-number-2">1</span> impl</h2>
<div class="outline-text-2" id="text-1">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">go get -u github.com/josharian/impl</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">impl -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of impl:
  -dir string
      package source directory, useful for vendored code
</pre>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">impl &#39;f *File&#39; io.ReadWriteCloser</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> (f *File) Read(p []<span class="typename">byte</span>) (n <span class="typename">int</span>, err error) {</span><br><span class="line">  <span class="built_in">panic</span>(<span class="string">"not implemented"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (f *File) Write(p []<span class="typename">byte</span>) (n <span class="typename">int</span>, err error) {</span><br><span class="line">  <span class="built_in">panic</span>(<span class="string">"not implemented"</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (f *File) Close() error {</span><br><span class="line">  <span class="built_in">panic</span>(<span class="string">"not implemented"</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-251f4189-ea0e-4de2-a3c2-10f537e227b4" name="ID-251f4189-ea0e-4de2-a3c2-10f537e227b4"></a><span class="section-number-2">2</span> gomodifytags</h2>
<div class="outline-text-2" id="text-2">
<p>
请参见之前的文章<a href="https://brantou.github.io/2017/11/07/go-modify-tags/">gomodifytags</a>。
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-42607192-5087-43d2-b6e7-8af2bb30a487" name="ID-42607192-5087-43d2-b6e7-8af2bb30a487"></a><span class="section-number-2">3</span> go-outline</h2>
<div class="outline-text-2" id="text-3">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/lukehoban/go-outline</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-outline -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of go-outline:
  -f string
      the path to the file to outline
  -imports-only
      parse imports only
  -src string
      source code of the file to outline
</pre>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Outline <span class="keyword">struct</span> {</span><br><span class="line">  Label <span class="typename">string</span></span><br><span class="line">  Type  <span class="typename">string</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (ol *Outline) Label() <span class="typename">string</span> {</span><br><span class="line">  <span class="keyword">return</span> ol.Label</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  name = <span class="string">"brantou"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> email = <span class="string">"brantou89@gmail.com"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  cmd  <span class="typename">string</span></span><br><span class="line">  args <span class="typename">string</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Printf(<span class="string">"hello world!"</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-outline <span class="operator">-f</span> main.go</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">	"<span class="attribute">label</span>": <span class="value"><span class="string">"main"</span></span>,</span><br><span class="line">	"<span class="attribute">type</span>": <span class="value"><span class="string">"package"</span></span>,</span><br><span class="line">	"<span class="attribute">start</span>": <span class="value"><span class="number">1</span></span>,</span><br><span class="line">	"<span class="attribute">end</span>": <span class="value"><span class="number">290</span></span>,</span><br><span class="line">	"<span class="attribute">children</span>": <span class="value">[</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"\"fmt\""</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"import"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">23</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">28</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"Outline"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"type"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">35</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">83</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"Label"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"function"</span></span>,</span><br><span class="line">		"<span class="attribute">receiverType</span>": <span class="value"><span class="string">"*Outline"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">85</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">140</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"name"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"constant"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">152</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">156</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"email"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"constant"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">178</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">183</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"cmd"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"variable"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">217</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">220</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"args"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"variable"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">231</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">235</span></span><br><span class="line">	    </span>},</span><br><span class="line">	    {</span><br><span class="line">		"<span class="attribute">label</span>": <span class="value"><span class="string">"main"</span></span>,</span><br><span class="line">		"<span class="attribute">type</span>": <span class="value"><span class="string">"function"</span></span>,</span><br><span class="line">		"<span class="attribute">start</span>": <span class="value"><span class="number">246</span></span>,</span><br><span class="line">		"<span class="attribute">end</span>": <span class="value"><span class="number">290</span></span><br><span class="line">	    </span>}</span><br><span class="line">	]</span><br><span class="line">    </span>}</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-outline <span class="operator">-f</span> main.go -imports-only</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-498d0e01-e59e-406e-82db-bbe477366bf6" name="ID-498d0e01-e59e-406e-82db-bbe477366bf6"></a><span class="section-number-2">4</span> go-symbols</h2>
<div class="outline-text-2" id="text-4">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/newhook/go-symbols</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-symbols -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of go-symbols:
  -tags build tags
      a list of build tags to consider satisfied during the build. For more information about build tags, see the description of build constraints in the documentation for the go/build package
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-symbols <span class="variable">$GOPATH</span>/src/github.com/astaxie/beego beego</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> {</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"BeegoOutput"</span></span>,</span><br><span class="line">  "<span class="attribute">kind</span>": <span class="value"><span class="string">"type"</span></span>,</span><br><span class="line">  "<span class="attribute">package</span>": <span class="value"><span class="string">"context"</span></span>,</span><br><span class="line">  "<span class="attribute">path</span>": <span class="value"><span class="string">"/home/parallels/.gvm/pkgsets/go1.9/global/src/github.com/astaxie/beego/context/output.go"</span></span>,</span><br><span class="line">  "<span class="attribute">line</span>": <span class="value"><span class="number">35</span></span>,</span><br><span class="line">  "<span class="attribute">character</span>": <span class="value"><span class="number">0</span></span><br><span class="line"> </span>},</span><br><span class="line"> {</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"BeegoInput"</span></span>,</span><br><span class="line">  "<span class="attribute">kind</span>": <span class="value"><span class="string">"type"</span></span>,</span><br><span class="line">  "<span class="attribute">package</span>": <span class="value"><span class="string">"context"</span></span>,</span><br><span class="line">  "<span class="attribute">path</span>": <span class="value"><span class="string">"/home/parallels/.gvm/pkgsets/go1.9/global/src/github.com/astaxie/beego/context/input.go"</span></span>,</span><br><span class="line">  "<span class="attribute">line</span>": <span class="value"><span class="number">43</span></span>,</span><br><span class="line">  "<span class="attribute">character</span>": <span class="value"><span class="number">0</span></span><br><span class="line"> </span>},</span><br><span class="line"> {</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"NewBeegoRequest"</span></span>,</span><br><span class="line">  "<span class="attribute">kind</span>": <span class="value"><span class="string">"func"</span></span>,</span><br><span class="line">  "<span class="attribute">package</span>": <span class="value"><span class="string">"httplib"</span></span>,</span><br><span class="line">  "<span class="attribute">path</span>": <span class="value"><span class="string">"/home/parallels/.gvm/pkgsets/go1.9/global/src/github.com/astaxie/beego/httplib/httplib.go"</span></span>,</span><br><span class="line">  "<span class="attribute">line</span>": <span class="value"><span class="number">80</span></span>,</span><br><span class="line">  "<span class="attribute">character</span>": <span class="value"><span class="number">0</span></span><br><span class="line"> </span>},</span><br><span class="line"> {</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"BeegoHTTPSettings"</span></span>,</span><br><span class="line">  "<span class="attribute">kind</span>": <span class="value"><span class="string">"type"</span></span>,</span><br><span class="line">  "<span class="attribute">package</span>": <span class="value"><span class="string">"httplib"</span></span>,</span><br><span class="line">  "<span class="attribute">path</span>": <span class="value"><span class="string">"/home/parallels/.gvm/pkgsets/go1.9/global/src/github.com/astaxie/beego/httplib/httplib.go"</span></span>,</span><br><span class="line">  "<span class="attribute">line</span>": <span class="value"><span class="number">130</span></span>,</span><br><span class="line">  "<span class="attribute">character</span>": <span class="value"><span class="number">0</span></span><br><span class="line"> </span>},</span><br><span class="line"> {</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"BeegoHTTPRequest"</span></span>,</span><br><span class="line">  "<span class="attribute">kind</span>": <span class="value"><span class="string">"type"</span></span>,</span><br><span class="line">  "<span class="attribute">package</span>": <span class="value"><span class="string">"httplib"</span></span>,</span><br><span class="line">  "<span class="attribute">path</span>": <span class="value"><span class="string">"/home/parallels/.gvm/pkgsets/go1.9/global/src/github.com/astaxie/beego/httplib/httplib.go"</span></span>,</span><br><span class="line">  "<span class="attribute">line</span>": <span class="value"><span class="number">146</span></span>,</span><br><span class="line">  "<span class="attribute">character</span>": <span class="value"><span class="number">0</span></span><br><span class="line"> </span>}</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-462c9dc1-3148-4be0-bf12-751821247f33" name="ID-462c9dc1-3148-4be0-bf12-751821247f33"></a><span class="section-number-2">5</span> gocode</h2>
<div class="outline-text-2" id="text-5">
<p>
An autocompletion daemon for the Go programming language.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v github.com/nsf/gocode</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gocode -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage: gocode [-s] [-f=&lt;format&gt;] [-in=&lt;path&gt;] [-sock=&lt;type&gt;] [-addr=&lt;addr&gt;]
     &lt;command&gt; [&lt;args&gt;]

Flags:
  -addr string
      address for tcp socket (default "127.0.0.1:37373")
  -debug
      enable server-side debug mode
  -f string
      output format (vim | emacs | nice | csv | csv-with-package | json) (default "nice")
  -in string
      use this file instead of stdin input
  -profile int
      port on which to expose profiling information for pprof; 0 to disable profiling
  -s	run a server instead of a client
  -sock string
      socket type (unix | tcp) (default "unix")

Commands:
  autocomplete [&lt;path&gt;] &lt;offset&gt;     main autocompletion command
  close                              close the gocode daemon
  status                             gocode daemon status report
  drop-cache                         drop gocode daemon's cache
  set [&lt;name&gt; [&lt;value&gt;]]             list or set config options
</pre>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="ID-47e74814-b835-46d4-9aba-309f255f196c" name="ID-47e74814-b835-46d4-9aba-309f255f196c"></a><span class="section-number-2">6</span> godef</h2>
<div class="outline-text-2" id="text-6">
<p>
Print where symbols are defined in Go source code.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v github.com/rogpeppe/godef</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">godef -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
usage: godef [flags] [expr]
  -A	print all type and members information
  -a	print public type and member information
  -acme
      use current acme window
  -debug
      debug mode
  -f string
      Go source filename
  -i	read file from stdin
  -json
      output location in JSON format (-t flag is ignored)
  -o int
      file offset of identifier in stdin (default -1)
  -t	print type information
</pre>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><a id="ID-62c99ab8-8ebb-4ff8-aa2b-3db15c05f369" name="ID-62c99ab8-8ebb-4ff8-aa2b-3db15c05f369"></a><span class="section-number-2">7</span> gogetdoc</h2>
<div class="outline-text-2" id="text-7">
<p>
Retrieve documentation for items in Go source code.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v github.com/zmb3/gogetdoc</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gogetdoc -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of gogetdoc
  -cpuprofile string
      write cpu profile to file
  -json
      enable extended JSON output
  -linelength int
      maximum length of a line in the output (in Unicode code points) (default 80)
  -modified
      read an archive of modified files from standard input
  -pos string
      Filename and byte offset of item to document, e.g. foo.go:#123
  -tags build tags
      a list of build tags to consider satisfied during the build. For more information about build tags, see the description of build constraints in the documentation for the go/build package
  -u	show unexported fields

The archive format for the -modified flag consists of the file name, followed
by a newline, the decimal file size, another newline, and the contents of the file.

This allows editors to supply gogetdoc with the contents of their unsaved buffers.
</pre>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><a id="ID-db601da2-3073-45f0-b00d-f326ff290618" name="ID-db601da2-3073-45f0-b00d-f326ff290618"></a><span class="section-number-2">8</span> golint</h2>
<div class="outline-text-2" id="text-8">
<p>
Golint is a linter for Go source code.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/golang/lint/golint</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">golint -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of golint:
	golint [flags] # runs on package in current directory
	golint [flags] [packages]
	golint [flags] [directories] # where a '/...' suffix includes all sub-directories
	golint [flags] [files] # all must belong to a single package
Flags:
  -min_confidence float
      minimum confidence of a problem to print it (default 0.8)
  -set_exit_status
      set exit status to 1 if any issues are found
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">golint google.go</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
google.go:19:1: exported function Search should have comment or be unexported
</pre>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><a id="ID-e280d3b0-98ff-4e2d-9c92-50c2d92976ba" name="ID-e280d3b0-98ff-4e2d-9c92-50c2d92976ba"></a><span class="section-number-2">9</span> gopkgs</h2>
<div class="outline-text-2" id="text-9">
<p>
Gopkgs is tools that provide list of available Go packages that can be imported.
This are alternative to <code>go list all</code>, it just faster.
</p>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get github.com/uudashr/gopkgs/cmd/gopkgs</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gopkgs -help</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of gopkgs:
  -format string
      custom output format (default "{ {.ImportPath} }")
  -help
      show this message


Use -format to custom the output using template syntax. The struct being passed to template is:

  type Pkg struct {
      Dir        string // directory containing package sources
      ImportPath string // import path of package in dir
      Name       string // package name
  }
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gopkgs -format <span class="string">"{ {.Name} };{ {.ImportPath} }"</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><a id="ID-8a91213d-e07e-454e-a015-3625c86bc711" name="ID-8a91213d-e07e-454e-a015-3625c86bc711"></a><span class="section-number-2">10</span> gorename</h2>
<div class="outline-text-2" id="text-10">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v golang.org/x/tools/cmd/gorename</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gorename -help</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
gorename: precise type-safe renaming of identifiers in Go source code.

Usage:

 gorename (-from &lt;spec&gt; | -offset &lt;file&gt;:#&lt;byte-offset&gt;) -to &lt;name&gt; [-force]

You must specify the object (named entity) to rename using the -offset
or -from flag.  Exactly one must be specified.

Flags:

  -offset    specifies the filename and byte offset of an identifier to rename.
             This form is intended for use by text editors.

  -from      specifies the object to rename using a query notation;
             This form is intended for interactive use at the command line.
             A legal -from query has one of the following forms:

    "encoding/json".Decoder.Decode        method of package-level named type
    (*"encoding/json".Decoder).Decode     ditto, alternative syntax
    "encoding/json".Decoder.buf           field of package-level named struct type
    "encoding/json".HTMLEscape            package member (const, func, var, type)
    "encoding/json".Decoder.Decode::x     local object x within a method
    "encoding/json".HTMLEscape::x         local object x within a function
    "encoding/json"::x                    object x anywhere within a package
    json.go::x                            object x within file json.go

             Double-quotes must be escaped when writing a shell command.
             Quotes may be omitted for single-segment import paths such as "fmt".

             For methods, the parens and '*' on the receiver type are both
             optional.

             It is an error if one of the ::x queries matches multiple
             objects.

  -to        the new name.

  -force     causes the renaming to proceed even if conflicts were reported.
             The resulting program may be ill-formed, or experience a change
             in behaviour.

             WARNING: this flag may even cause the renaming tool to crash.
             (In due course this bug will be fixed by moving certain
             analyses into the type-checker.)

  -d         display diffs instead of rewriting files

  -v         enables verbose logging.

gorename automatically computes the set of packages that might be
affected.  For a local renaming, this is just the package specified by
-from or -offset, but for a potentially exported name, gorename scans
the workspace ($GOROOT and $GOPATH).

gorename rejects renamings of concrete methods that would change the
assignability relation between types and interfaces.  If the interface
change was intentional, initiate the renaming at the interface method.

gorename rejects any renaming that would create a conflict at the point
of declaration, or a reference conflict (ambiguity or shadowing), or
anything else that could cause the resulting program not to compile.


Examples:

$ gorename -offset file.go:#123 -to foo

  Rename the object whose identifier is at byte offset 123 within file file.go.

$ gorename -from '"bytes".Buffer.Len' -to Size

  Rename the "Len" method of the *bytes.Buffer type to "Size".

---- TODO ----

Correctness:
- handle dot imports correctly
- document limitations (reflection, 'implements' algorithm).
- sketch a proof of exhaustiveness.

Features:
- support running on packages specified as *.go files on the command line
- support running on programs containing errors (loader.Config.AllowErrors)
- allow users to specify a scope other than "global" (to avoid being
  stuck by neglected packages in $GOPATH that don't build).
- support renaming the package clause (no object)
- support renaming an import path (no ident or object)
  (requires filesystem + SCM updates).
- detect and reject edits to autogenerated files (cgo, protobufs)
  and optionally $GOROOT packages.
- report all conflicts, or at least all qualitatively distinct ones.
  Sometimes we stop to avoid redundancy, but
  it may give a disproportionate sense of safety in -force mode.
- support renaming all instances of a pattern, e.g.
  all receiver vars of a given type,
  all local variables of a given type,
  all PkgNames for a given package.
- emit JSON output for other editors and tools.
</pre>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><a id="ID-62a70222-9660-44be-a5f3-f1ed5bfc70be" name="ID-62a70222-9660-44be-a5f3-f1ed5bfc70be"></a><span class="section-number-2">11</span> godoctor</h2>
<div class="outline-text-2" id="text-11">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v github.com/godoctor/godoctor</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">godoctor -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage: godoctor [&lt;flag&gt; ...] &lt;refactoring&gt; [&lt;args&gt; ...]

Each &lt;flag&gt; must be one of the following:
    -complete Output entire modified source files instead of displaying a diff
    -doc      Output documentation (install, user, man, or vim) and exit
    -file     Filename containing an element to refactor (default: stdin)
    -json     Accept commands in OpenRefactory JSON protocol format
    -list     List all refactorings and exit
    -pos      Position of a syntax element to refactor (default: entire file)
    -scope    Package name(s), or source file containing a program entrypoint
    -v        Verbose: list affected files
    -vv       Very verbose: list individual edits (implies -v)
    -w        Modify source files on disk (write) instead of displaying a diff


The &lt;refactoring&gt; argument determines the refactoring to perform:
    rename          Changes the name of an identifier
    extract         Extracts statements to a new function/method
    var             Extracts an expression, assigning it to a variable
    toggle          Toggles between a var declaration and := statement
    godoc           Adds stub GoDoc comments where they are missing

The &lt;args&gt; following the refactoring name vary depending on the refactoring.

To display usage information for a particular refactoring, such as rename, use:
    %% godoctor rename

For complete usage information, see the user manual: http://gorefactor.org/doc.html
</pre>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><a id="ID-8ece098f-545f-4245-b311-4dece9c55844" name="ID-8ece098f-545f-4245-b311-4dece9c55844"></a><span class="section-number-2">12</span> goreturns</h2>
<div class="outline-text-2" id="text-12">
<p>
A gofmt/goimports-like tool for Go programmers that fills
in Go return statements with zero values to match the func return types
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u sourcegraph.com/sqs/goreturns</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> goreturnsdemo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"errors"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> F() (<span class="typename">int</span>, error) { <span class="keyword">return</span> errors.New(<span class="string">"foo"</span>) }</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">goreturns -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
usage: goreturns [flags] [path ...]
  -b	remove bare returns
  -d	display diffs instead of rewriting files
  -e	report all errors (not just the first 10 on different lines)
  -i	run goimports on the file prior to processing (default true)
  -l	list files whose formatting differs from goreturns's
  -local string
put imports beginning with this string after 3rd-party packages (see goimports)
  -p	print non-fatal typechecking errors to stderr
  -w	write result to (source) file instead of stdout
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">goreturns goreturnsdemo.go</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> goreturnsdemo</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"errors"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> F() (<span class="typename">int</span>, error) { <span class="keyword">return</span> <span class="number">0</span>, errors.New(<span class="string">"foo"</span>) }</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">goreturns <span class="operator">-d</span> goreturnsdemo.go</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">diff goreturnsdemo.<span class="keyword">go</span> gofmt/goreturnsdemo.<span class="keyword">go</span></span><br><span class="line">--- /tmp/gofmt948886532       <span class="number">2017</span>-<span class="number">11</span>-<span class="number">26</span> <span class="number">18</span>:<span class="number">59</span>:<span class="number">03.671955645</span> +<span class="number">0800</span></span><br><span class="line">+++ /tmp/gofmt584282515       <span class="number">2017</span>-<span class="number">11</span>-<span class="number">26</span> <span class="number">18</span>:<span class="number">59</span>:<span class="number">03.671955645</span> +<span class="number">0800</span></span><br><span class="line">@@ -<span class="number">1</span>,<span class="number">6</span> +<span class="number">1</span>,<span class="number">5</span> @@</span><br><span class="line"> <span class="keyword">package</span> goreturnsdemo</span><br><span class="line"></span><br><span class="line">-</span><br><span class="line"> <span class="keyword">import</span> <span class="string">"errors"</span></span><br><span class="line"></span><br><span class="line">-<span class="keyword">func</span> F() (<span class="typename">int</span>, error) { <span class="keyword">return</span> errors.New(<span class="string">"foo"</span>) }</span><br><span class="line">+<span class="keyword">func</span> F() (<span class="typename">int</span>, error) { <span class="keyword">return</span> <span class="number">0</span>, errors.New(<span class="string">"foo"</span>) }</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><a id="ID-b00fe929-fb7c-4645-9baf-69cada4aed85" name="ID-b00fe929-fb7c-4645-9baf-69cada4aed85"></a><span class="section-number-2">13</span> gotests</h2>
<div class="outline-text-2" id="text-13">
<p>
Generate Go tests from your source code.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v github.com/cweill/gotests/...</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gotests -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of gotests:
  -all
      generate tests for all functions and methods
  -excl string
      regexp. generate tests for functions and methods that don't match. Takes precedence over -only, -exported, and -all
  -exported
      generate tests for exported functions and methods. Takes precedence over -only and -all
  -i	print test inputs in error messages
  -nosubtests
      disable generating tests using the Go 1.7 subtests feature
  -only string
      regexp. generate tests for functions and methods that match only. Takes precedence over -all
  -w	write output to (test) files instead of stdout
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gotests -all ./</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><a id="ID-f19924ac-e110-4510-95a2-0f9789d593f2" name="ID-f19924ac-e110-4510-95a2-0f9789d593f2"></a><span class="section-number-2">14</span> guru</h2>
<div class="outline-text-2" id="text-14">
<p>
guru: a tool for answering questions about Go source code.
</p>
</div>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><a id="ID-acbc4ee2-047d-44e9-8dd2-4cf8f92a1eb0" name="ID-acbc4ee2-047d-44e9-8dd2-4cf8f92a1eb0"></a><span class="section-number-2">15</span> godepgraph</h2>
<div class="outline-text-2" id="text-15">
<p>
godepgraph is a program for generating a dependency graph of Go packages.
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get github.com/kisielk/godepgraph</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">godepgraph -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of godepgraph:
  -d	show dependencies of packages in the Go standard library
  -horizontal
      lay out the dependency graph horizontally instead of vertically
  -i string
      a comma-separated list of packages to ignore
  -l int
      max level of go dependency graph (default 256)
  -o string
      a comma-separated list of prefixes to include
  -p string
      a comma-separated list of prefixes to ignore
  -s	ignore packages in the Go standard library
  -t	include test packages
  -tags string
      a comma-separated list of build tags to consider satisified during the build
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">godepgraph github.com/kisielk/godepgraph</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">digraph godep {&#10;_0 [label=&#34;flag&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_1 [label=&#34;fmt&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_2 [label=&#34;github.com/kisielk/godepgraph&#34; style=&#34;filled&#34; color=&#34;paleturquoise&#34;];&#10;_2 -&#62; _0;&#10;_2 -&#62; _1;&#10;_2 -&#62; _3;&#10;_2 -&#62; _4;&#10;_2 -&#62; _5;&#10;_2 -&#62; _6;&#10;_2 -&#62; _7;&#10;_3 [label=&#34;go/build&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_4 [label=&#34;log&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_5 [label=&#34;os&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_6 [label=&#34;sort&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;_7 [label=&#34;strings&#34; style=&#34;filled&#34; color=&#34;palegreen&#34;];&#10;}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">godepgraph github.com/kisielk/godepgraph | dot -Tpng -o godepgraph.png</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/go-tool/godepgraph.png&rdquo; /&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><a id="ID-ba02c35c-ca55-410d-8be6-985dd772ada6" name="ID-ba02c35c-ca55-410d-8be6-985dd772ada6"></a><span class="section-number-2">16</span> go-callvis</h2>
<div class="outline-text-2" id="text-16">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/TrueFurby/go-callvis</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-callvis -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of go-callvis:
  -debug
      Enable verbose log.
  -focus string
      Focus package with name or import path. (default "main")
  -group string
      Grouping functions by [pkg, type] (separate multiple by comma).
  -ignore string
      Ignore package paths with prefix (separate multiple by comma).
  -limit string
      Limit package paths to prefix. (separate multiple by comma)
  -minlen uint
      Minimum edge length (for wider output). (default 2)
  -nodesep float
      Minimum space between two adjacent nodes in the same rank (for taller output). (default 0.35)
  -nostd
      Omit calls to/from std packages.
  -tests
      Include test code.
  -version
      Show version and exit.
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go-callvis github.com/TrueFurby/go-callvis | dot -Tpng -o go-callvis.png</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/go-tool/go-callvis.png&rdquo; /&gt;
</p>

</div>
</div>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><a id="ID-92f86679-df70-43b9-9bd8-ff5f1938040a" name="ID-92f86679-df70-43b9-9bd8-ff5f1938040a"></a><span class="section-number-2">17</span> depth</h2>
<div class="outline-text-2" id="text-17">
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u github.com/KyleBanks/depth/cmd/depth</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">depth -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of depth:
  -explain string
      If set, show which packages import the specified target
  -internal
      If set, resolves dependencies of internal (stdlib) packages.
  -json
      If set, outputs the depencies in JSON format.
  -max int
      Sets the maximum depth of dependencies to resolve.
  -test
      If set, resolves dependencies used for testing.
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">depth github.com/KyleBanks/depth/cmd/depth</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
github.com/KyleBanks/depth/cmd/depth
  ├ encoding/json
  ├ flag
  ├ fmt
  ├ io
  ├ os
  ├ strings
  └ github.com/KyleBanks/depth
    ├ bytes
    ├ errors
    ├ go/build
    ├ os
    ├ path
    ├ sort
    └ strings
12 dependencies (11 internal, 1 external, 0 testing).
</pre>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">depth -internal strings</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
strings
  ├ errors
  ├ internal/cpu
  ├ io
    ├ errors
    └ sync
      ├ internal/race
        └ unsafe
      ├ runtime
        ├ runtime/internal/atomic
          └ unsafe
        ├ runtime/internal/sys
        └ unsafe
      ├ sync/atomic
        └ unsafe
      └ unsafe
  ├ unicode
  └ unicode/utf8
12 dependencies (12 internal, 0 external, 0 testing).
strings
  ├ errors
  ├ internal/cpu
  ├ io
  ├ unicode
  └ unicode/utf8
5 dependencies (5 internal, 0 external, 0 testing).
</pre>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><a id="ID-cb85213d-12e5-4875-9378-7f6284c8e21f" name="ID-cb85213d-12e5-4875-9378-7f6284c8e21f"></a><span class="section-number-2">18</span> interface</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get -u -v mvdan.cc/interfacer</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">interfacer -h</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> single</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> Empty() {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Closer <span class="keyword">interface</span> {</span><br><span class="line">  Close()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ReadCloser <span class="keyword">interface</span> {</span><br><span class="line">  Closer</span><br><span class="line">  Read()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> Basic(c Closer) {</span><br><span class="line">  c.Close()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> BasicWrong(rc ReadCloser) { <span class="comment">// WARN rc can be Closer</span></span><br><span class="line">  rc.Close()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> OtherWrong(s St) { <span class="comment">// WARN s can be Closer</span></span><br><span class="line">  s.Close()</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">interfacer simple.go</span><br></pre></td></tr></table></figure>
</div>

<p>
simple.go:24:19: undeclared name: St
</p>
</div>
</div>
<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><a id="ID-5cd1b815-d8e8-4f74-90b2-812cd8003f86" name="ID-5cd1b815-d8e8-4f74-90b2-812cd8003f86"></a><span class="section-number-2">19</span> safesql</h2>
<div class="outline-text-2" id="text-19">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">go get -u github.com/stripe/safesql</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">safesql</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage: safesql [-q] [-v] package1 [package2 ...]
  -q	Only print on failure
  -v	Verbose mode
</pre>
</div>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><a id="ID-ae9ef244-2d16-4543-9856-dbc4a51ff34b" name="ID-ae9ef244-2d16-4543-9856-dbc4a51ff34b"></a><span class="section-number-2">20</span> aligncheck</h2>
<div class="outline-text-2" id="text-20">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">go get github.com/opennota/check/cmd/aligncheck</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">aligncheck  github.com/astaxie/beego</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
github.com/astaxie/beego: config.go:33:6: struct Config could have size 520 (currently 552)
github.com/astaxie/beego: config.go:51:6: struct Listen could have size 120 (currently 152)
github.com/astaxie/beego: config.go:71:6: struct WebConfig could have size 264 (currently 288)
github.com/astaxie/beego: config.go:89:6: struct SessionConfig could have size 104 (currently 128)
github.com/astaxie/beego: controller.go:67:6: struct Controller could have size 224 (currently 232)
github.com/astaxie/beego: router.go:124:6: struct ControllerRegister could have size 168 (currently 176)
</pre>
</div>
</div>

<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21"><a id="ID-f85130fb-b9a6-4fed-bc5e-b4f89dc4d956" name="ID-f85130fb-b9a6-4fed-bc5e-b4f89dc4d956"></a><span class="section-number-2">21</span> structcheck</h2>
<div class="outline-text-2" id="text-21">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">go get github.com/opennota/check/cmd/structcheck</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">structcheck -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of structcheck:
  -a	Count assignments only
  -e	Report exported fields
  -t	Load test files too
  -tags string
      Build tags
</pre>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">structcheck fmt</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
fmt: ~/.gvm/gos/go1.9/src/fmt/scan.go:169:2: fmt.ssave.nlIsEnd
fmt: ~/.gvm/gos/go1.9/src/fmt/scan.go:170:2: fmt.ssave.nlIsSpace
fmt: ~/.gvm/gos/go1.9/src/fmt/scan.go:171:2: fmt.ssave.argLimit
fmt: ~/.gvm/gos/go1.9/src/fmt/scan.go:172:2: fmt.ssave.limit
fmt: ~/.gvm/gos/go1.9/src/fmt/scan.go:173:2: fmt.ssave.maxWid
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:30:2: fmt.fmtFlags.zero
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:35:2: fmt.fmtFlags.plusV
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:36:2: fmt.fmtFlags.sharpV
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:25:2: fmt.fmtFlags.precPresent
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:27:2: fmt.fmtFlags.plus
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:29:2: fmt.fmtFlags.space
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:24:2: fmt.fmtFlags.widPresent
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:26:2: fmt.fmtFlags.minus
fmt: ~/.gvm/gos/go1.9/src/fmt/format.go:28:2: fmt.fmtFlags.sharp
</pre>
</div>
</div>

<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22"><a id="ID-27ddf18f-120a-4ac5-bf45-3d578593daca" name="ID-27ddf18f-120a-4ac5-bf45-3d578593daca"></a><span class="section-number-2">22</span> varcheck</h2>
<div class="outline-text-2" id="text-22">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">go get github.com/opennota/check/cmd/varcheck</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">varcheck -h</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Usage of varcheck:
  -e	Report exported variables and constants
</pre>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">varcheck image/jpeg</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/reader.go:74:2: adobeTransformYCbCr
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/reader.go:75:2: adobeTransformYCbCrK
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:54:2: quantIndexLuminance
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:55:2: quantIndexChrominance
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:91:2: huffIndexLuminanceDC
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:92:2: huffIndexLuminanceAC
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:93:2: huffIndexChrominanceDC
image/jpeg: ~/.gvm/gos/go1.9/src/image/jpeg/writer.go:94:2: huffIndexChrominanceAC
</pre>
</div>
</div>
<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23"><a id="ID-5bab7aed-ffc6-41bc-a6b3-1ac0a3f38869" name="ID-5bab7aed-ffc6-41bc-a6b3-1ac0a3f38869"></a><span class="section-number-2">23</span> eg</h2>
<div class="outline-text-2" id="text-23">

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">go get golang.org/x/tools/cmd/eg</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"time"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> ExtendWith50000ns(t time.Time) time.Time {</span><br><span class="line">  <span class="keyword">return</span> t.Add(time.Duration(<span class="number">50000</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> template</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> before(t time.Time, d time.Duration) time.Time {</span><br><span class="line">  <span class="comment">// if already time.Duration, do not cast.</span></span><br><span class="line">  <span class="keyword">return</span> t.Add(time.Duration(d))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> after(t time.Time, d time.Duration) time.Time {</span><br><span class="line">  <span class="keyword">return</span> t.Add(d * time.Nanosecond)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">eg -t T.template .</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"time"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> ExtendWith50000ns(t time.Time) time.Time {</span><br><span class="line">  <span class="keyword">return</span> t.Add(<span class="number">50000</span> * time.Nanosecond)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

Last Updated 2017-12-13 Wed 18:24.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/11/07/go-modify-tags/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/07/go-modify-tags/" itemprop="url">gomodifytags</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-07T00:00:00+08:00">
                2017-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/07/go-modify-tags/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/11/07/go-modify-tags/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-27719462-7684-42eb-a615-d34c2696f4b2" name="ID-27719462-7684-42eb-a615-d34c2696f4b2"></a><span class="section-number-2">1</span> StructTag</h2>
<div class="outline-text-2" id="text-1">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  tag := reflect.StructTag(<span class="string">`species:"gopher" color:"blue"`</span>)</span><br><span class="line">  fmt.Println(tag.Get(<span class="string">"color"</span>), tag.Get(<span class="string">"species"</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
blue gopher
</pre>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line">  <span class="string">"github.com/fatih/structtag"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  tag := <span class="string">`json:"foo,omitempty,string" xml:"foo"`</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// parse the tag</span></span><br><span class="line">  tags, err := structtag.Parse(<span class="typename">string</span>(tag))</span><br><span class="line">  <span class="keyword">if</span> err != <span class="constant">nil</span> {</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// iterate over all tags</span></span><br><span class="line">  <span class="keyword">for</span> _, t := <span class="keyword">range</span> tags.Tags() {</span><br><span class="line">    fmt.Printf(<span class="string">"tag: %+v\n"</span>, t)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get a single tag</span></span><br><span class="line">  jsonTag, err := tags.Get(<span class="string">"json"</span>)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="constant">nil</span> {</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// change existing tag</span></span><br><span class="line">  jsonTag.Name = <span class="string">"foo_bar"</span></span><br><span class="line">  jsonTag.Options = <span class="constant">nil</span></span><br><span class="line">  tags.Set(jsonTag)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add new tag</span></span><br><span class="line">  tags.Set(&amp;structtag.Tag{</span><br><span class="line">    Key:     <span class="string">"hcl"</span>,</span><br><span class="line">    Name:    <span class="string">"foo"</span>,</span><br><span class="line">    Options: []<span class="typename">string</span>{<span class="string">"squash"</span>},</span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="comment">// print the tags</span></span><br><span class="line">  fmt.Println(tags) <span class="comment">// Output: json:"foo_bar" xml:"foo" hcl:"foo,squash"</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
tag: json:"foo,omitempty,string"
tag: xml:"foo"
json:"foo_bar" xml:"foo" hcl:"foo,squash"
</pre>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-5680af25-d743-4316-a633-2328fc17afde" name="ID-5680af25-d743-4316-a633-2328fc17afde"></a><span class="section-number-2">2</span> AST(抽象语法树)</h2>
<div class="outline-text-2" id="text-2">

<p>
遍历语法树，展示结构体字段列表：
</p>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"go/ast"</span></span><br><span class="line">  <span class="string">"go/parser"</span></span><br><span class="line">  <span class="string">"go/token"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  src := <span class="string">`package main</span><br><span class="line">	type Example struct {</span><br><span class="line">    Foo string`</span> + <span class="string">" `json:\"foo\"` }"</span></span><br><span class="line"></span><br><span class="line">  fset := token.NewFileSet()</span><br><span class="line">  file, err := parser.ParseFile(fset, <span class="string">"demo"</span>, src, parser.ParseComments)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="constant">nil</span> {</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ast.Inspect(file, <span class="keyword">func</span>(x ast.Node) <span class="typename">bool</span> {</span><br><span class="line">    s, ok := x.(*ast.StructType)</span><br><span class="line">    <span class="keyword">if</span> !ok {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, field := <span class="keyword">range</span> s.Fields.List {</span><br><span class="line">      fmt.Printf(<span class="string">"Field: %s\n"</span>, field.Names[<span class="number">0</span>].Name)</span><br><span class="line">      fmt.Printf(<span class="string">"Tag:   %s\n"</span>, field.Tag.Value)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Field: Foo
Tag:   `json:"foo"`
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-4e24c993-d2b1-49d0-8e6c-33156a21989b" name="ID-4e24c993-d2b1-49d0-8e6c-33156a21989b"></a><span class="section-number-2">3</span> gomodifytags</h2>
<div class="outline-text-2" id="text-3">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span></span><br><span class="line">  Port        <span class="typename">int</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span></span><br><span class="line">    Password <span class="typename">string</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><a id="ID-55031635-8b27-40d7-a026-8e7edd885281" name="ID-55031635-8b27-40d7-a026-8e7edd885281"></a><span class="section-number-3">3.1</span> Struct based modification</h3>
<div class="outline-text-3" id="text-3-1">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -add-tags json -w</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<p>
支持三种 <b>transform</b> , 如下所示：
</p>
<ul class="org-ul">
<li><code>snakecase</code>: &ldquo;BaseDomain&rdquo; -&gt; &ldquo;base_domain&rdquo;
</li>
<li><code>camelcase</code>: &ldquo;BaseDomain&rdquo; -&gt; &ldquo;baseDomain&rdquo;
</li>
<li><code>lispcase</code>: &ldquo;BaseDomain&rdquo; -&gt; &ldquo;base-domain&rdquo;
</li>
</ul>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -add-tags xml -transform camelcase</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name" xml:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port" xml:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs" xml:"enableLogs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain" xml:"baseDomain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username" xml:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password" xml:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials" xml:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -add-tags xml -transform camelcase</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name" xml:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port" xml:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs" xml:"enableLogs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain" xml:"baseDomain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username" xml:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password" xml:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials" xml:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -add-tags validate:gt=1,scope:read-only</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">  } <span class="string">`json:"credentials" validate:"gt=1" scope:"read-only"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -add-tags json --add-options json=omitempty -w</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name,omitempty"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port,omitempty"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs,omitempty"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain,omitempty"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username,omitempty"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password,omitempty"`</span></span><br><span class="line">  } <span class="string">`json:"credentials,omitempty"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -remove-tags json</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span></span><br><span class="line">  Port        <span class="typename">int</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span></span><br><span class="line">    Password <span class="typename">string</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -clear-tags</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span></span><br><span class="line">  Port        <span class="typename">int</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span></span><br><span class="line">    Password <span class="typename">string</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -remove-options json=omitempty</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -struct Server -clear-options</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><a id="ID-fab400c7-942e-418d-b15f-89e9999cec8a" name="ID-fab400c7-942e-418d-b15f-89e9999cec8a"></a><span class="section-number-3">3.2</span> Line based modification</h3>
<div class="outline-text-3" id="text-3-2">

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -line 8,11 -clear-tags json</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name,omitempty"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port,omitempty"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs,omitempty"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain,omitempty"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span></span><br><span class="line">    Password <span class="typename">string</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -line 6,7 -remove-tags json</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name,omitempty"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port,omitempty"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username,omitempty"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password,omitempty"`</span></span><br><span class="line">  } <span class="string">`json:"credentials,omitempty"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -line 2,7 -add-tags bson</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name,omitempty" bson:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port,omitempty" bson:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs,omitempty" bson:"enable_logs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain,omitempty" bson:"base_domain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username,omitempty"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password,omitempty"`</span></span><br><span class="line">  } <span class="string">`json:"credentials,omitempty"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file demo.go -offset 100 -add-tags bson</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> {</span><br><span class="line">  Name        <span class="typename">string</span> <span class="string">`json:"name,omitempty" bson:"name"`</span></span><br><span class="line">  Port        <span class="typename">int</span>    <span class="string">`json:"port,omitempty" bson:"port"`</span></span><br><span class="line">  EnableLogs  <span class="typename">bool</span>   <span class="string">`json:"enable_logs,omitempty" bson:"enable_logs"`</span></span><br><span class="line">  BaseDomain  <span class="typename">string</span> <span class="string">`json:"base_domain,omitempty" bson:"base_domain"`</span></span><br><span class="line">  Credentials <span class="keyword">struct</span> {</span><br><span class="line">    Username <span class="typename">string</span> <span class="string">`json:"username,omitempty" bson:"username"`</span></span><br><span class="line">    Password <span class="typename">string</span> <span class="string">`json:"password,omitempty" bson:"password"`</span></span><br><span class="line">  } <span class="string">`json:"credentials,omitempty" bson:"credentials"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><a id="ID-2cd29cbf-09d0-4d03-911d-d50d1c87f49e" name="ID-2cd29cbf-09d0-4d03-911d-d50d1c87f49e"></a><span class="section-number-3">3.3</span> Shortcoming</h3>
<div class="outline-text-3" id="text-3-3">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> {</span><br><span class="line">  First_name <span class="typename">string</span></span><br><span class="line">  Last_name  <span class="typename">string</span></span><br><span class="line">  addr       <span class="typename">string</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gomodifytags -file user.go -struct User -add-tags json</span><br></pre></td></tr></table></figure>
</div>

<p>
期望得到的结果是： <code>first_name</code> ,但是却得到了 <code>first___name</code>, 同时 <code>addr</code> 字段不导出也生成了 <code>tag</code>, 如下所示：
</p>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> {</span><br><span class="line">  First_name <span class="typename">string</span> <span class="string">`json:"first___name"`</span></span><br><span class="line">  Last_name  <span class="typename">string</span> <span class="string">`json:"last___name"`</span></span><br><span class="line">  addr       <span class="typename">string</span> <span class="string">`json:"addr"`</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

Last Updated 2017-11-09 Thu 15:00.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/10/31/literate-devOps/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/31/literate-devOps/" itemprop="url">org-babel有趣的事</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-31T00:00:00+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/10/31/literate-devOps/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/10/31/literate-devOps/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-971ec1fe-4655-44a8-bf63-812a49eea408" name="ID-971ec1fe-4655-44a8-bf63-812a49eea408"></a><span class="section-number-2">1</span> 数据格式化(:wrap)</h2>
<div class="outline-text-2" id="text-1">
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><a id="ID-0f26d666-d128-4e66-a635-f329a88b6650" name="ID-0f26d666-d128-4e66-a635-f329a88b6650"></a><span class="section-number-3">1.1</span> json格式化</h3>
<div class="outline-text-3" id="text-1-1">
<pre class="example">
#+BEGIN_SRC sh :results code :wrap SRC js :exports both
  curl http://httpbin.org/get
#+END_SRC

#+RESULTS:
#+BEGIN_SRC js
{
  "args": {},
  "headers": {
    "Accept": "*/*",
    "Connection": "close",
    "Host": "httpbin.org",
    "User-Agent": "curl/7.47.0"
  },
  "origin": "180.167.20.58",
  "url": "http://httpbin.org/get"
}
#+END_SRC
</pre>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><a id="ID-801b7ed8-d5c0-4a12-9d9b-c384dde9cf77" name="ID-801b7ed8-d5c0-4a12-9d9b-c384dde9cf77"></a><span class="section-number-3">1.2</span> 其他格式化</h3>
<div class="outline-text-3" id="text-1-2">
<pre class="example">
#+BEGIN_SRC sh :wrap QUOTE :results raw :exports both
  date
#+END_SRC

#+RESULTS:
#+BEGIN_QUOTE
Fri Nov  3 23:05:34 CST 2017
#+END_QUOTE
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-3760ee64-f27b-4b3a-9c51-489ba333bca2" name="ID-3760ee64-f27b-4b3a-9c51-489ba333bca2"></a><span class="section-number-2">2</span> 变量设置在Header中</h2>
<div class="outline-text-2" id="text-2">

<pre class="example">
** 变量设置在Header中
   :PROPERTIES:
   :ID:       d7b197d7-f925-47b7-bcc0-37e182761619
   :header-args:shell: :var host="google.com" :results pp :session brantou :exports both
   :END:
   #+BEGIN_SRC shell
     ping $host -c 2
   #+END_SRC

   #+RESULTS:
   :
   : $ PING google.com (192.168.83.230) 56(84) bytes of data.
   : 64 bytes from 192.168.83.230: icmp_seq=1 ttl=128 time=9.60 ms
   : 64 bytes from 192.168.83.230: icmp_seq=2 ttl=128 time=25.4 ms
   :
   : --- google.com ping statistics ---
   : packet loss, time 1001ms
   : rtt min/avg/max/mdev = 9.609/17.508/25.408/7.900 ms

   覆盖变量 *host* 和 *session* 置为空！
   #+BEGIN_SRC shell :var host="baidu.com" :session none
     ping $host -c 2
   #+END_SRC

   #+RESULTS:
   : PING baidu.com (111.13.101.208) 56(84) bytes of data.
   : 64 bytes from 111.13.101.208: icmp_seq=1 ttl=128 time=35.5 ms
   : 64 bytes from 111.13.101.208: icmp_seq=2 ttl=128 time=49.2 ms
   :
   : --- baidu.com ping statistics ---
   : 2 packets transmitted, 2 received, 0% packet loss, time 1002ms
   : rtt min/avg/max/mdev = 35.517/42.361/49.206/6.847 ms
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-8d4ffdca-6c2c-49f2-b8a4-b94bdc0fe460" name="ID-8d4ffdca-6c2c-49f2-b8a4-b94bdc0fe460"></a><span class="section-number-2">3</span> 结果的预处理(:post)</h2>
<div class="outline-text-2" id="text-3">

<pre class="example">
#+NAME: img_wrap
#+BEGIN_SRC python :var img_path="" :results output
  img_path=img_path.replace('[[file:..', '').replace(']]', '')
  print('&lt;img src="'+img_path+'" /&gt;')
#+END_SRC

#+HEADER: :file ../images/devOps/just-try-post.png :exports both
#+BEGIN_SRC plantuml :mkdirp yes :post img_wrap(img_path=*this*) :wrap EXPORT html
  @startuml
  cli -&gt; serv:  auth req
  serv --&gt; cli: auth res
  @enduml
#+END_SRC

#+RESULTS:
#+BEGIN_EXPORT html
&lt;img src="/images/devOps/just-try-post.png" /&gt;
#+END_EXPORT
</pre>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-31ba7156-3ae9-410b-bd91-e93edb1b5046" name="ID-31ba7156-3ae9-410b-bd91-e93edb1b5046"></a><span class="section-number-2">4</span> noweb的引用(:noweb-ref)</h2>
<div class="outline-text-2" id="text-4">

<pre class="example">
#+HEADER: :tangle ../src/devOps/noweb_ref.sh :mkdirp yes
#+BEGIN_SRC shell :noweb yes :shebang #!/bin/sh
  &lt;&lt;fullest-disk&gt;&gt;
#+END_SRC

** the mount point of the fullest disk
   :PROPERTIES:
   :header-args:shell: :noweb-ref fullest-disk
   :END:

*** query all mounted disks
    #+BEGIN_SRC shell
        df \
    #+END_SRC
*** strip the header row
    #+BEGIN_SRC shell
        |sed '1d' \
    #+END_SRC
*** sort by the percent full
    #+BEGIN_SRC shell
        |awk '{print $5 " " $6}' | sort -n | tail -1 \
    #+END_SRC
*** extract the mount point
    #+BEGIN_SRC shell
      |awk '{print $2}'
    #+END_SRC
</pre>

<p>
tangle出的代码如下：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#!/bin/sh&#10;df \&#10;|sed &#39;1d&#39; \&#10;|awk &#39;{print $5 &#34; &#34; $6}&#39; | sort -n | tail -1 \&#10;|awk &#39;{print $2}&#39;</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-da1d2589-8df1-4eda-a480-46a06d84d7cd" name="ID-da1d2589-8df1-4eda-a480-46a06d84d7cd"></a><span class="section-number-2">5</span> 预处理/后置操作(:prologue/:epilogue)</h2>
<div class="outline-text-2" id="text-5">

<pre class="example">
在做相关操作时，可能需要预先初始化，同时又不想这些初始化过程出现在代码流程中，
这个时候你可使用 *:prologue* 来关联相关语句来达到预处理的效果。
#+NAME: prologue-example
#+BEGIN_SRC shell :prologue "echo yep; exit 0" :exports both
  echo "nope"
#+END_SRC

#+RESULTS: prologue-example
: yep

*:epilogue* 正好和 *:prologue* 完成的功能相反，用于后置处理，完成清理工作。
#+BEGIN_SRC shell :epilogue "exit 0; echo yep" :exports both
  echo "nope"
#+END_SRC

#+RESULTS:
: nope
</pre>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="ID-22c26ba6-18ba-4f00-961d-a1999dd868ba" name="ID-22c26ba6-18ba-4f00-961d-a1999dd868ba"></a><span class="section-number-2">6</span> 批量执行</h2>
<div class="outline-text-2" id="text-6">
<p>
可在命令行中调用代码块实现的函数，如下面所示：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#!/bin/sh&#10;# -*- mode: shell-script -*-&#10;#&#10;# tangle files with org-mode&#10;#&#10;&#10;DIR=&#39;pwd&#39;&#10;FILES=&#34;&#34;&#10;# wrap each argument in the code required to call tangle on it&#10;for i in $@; do&#10;    FILES=&#34;$FILES \&#34;$i\&#34;&#34;&#10;done&#10;&#10;emacs -Q --batch \&#10;      --eval &#34;(progn&#10;(require &#39;org)(require &#39;ob)(require &#39;ob-tangle)&#10;(mapc (lambda (file)&#10;       (find-file (expand-file-name file \&#34;$DIR\&#34;))&#10;       (org-babel-tangle)&#10;       (kill-buffer)) &#39;($FILES)))&#34; 2&#62;&#38;1 | grep tangled</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><a id="ID-a29fa69a-00f6-4b18-a776-c14295a76874" name="ID-a29fa69a-00f6-4b18-a776-c14295a76874"></a><span class="section-number-2">7</span> 连接mysql</h2>
<div class="outline-text-2" id="text-7">

<pre class="example">
#+BEGIN_SRC sql
  show tables;
#+END_SRC

#+RESULTS:
| Tables_in_mysql           |
|---------------------------|
| columns_priv              |
| db                        |
| engine_cost               |
| event                     |
| func                      |
| general_log               |
| gtid_executed             |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| innodb_index_stats        |
| innodb_table_stats        |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| server_cost               |
| servers                   |
| slave_master_info         |
| slave_relay_log_info      |
| slave_worker_info         |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |

#+BEGIN_SRC sql
  SELECT host, user FROM user WHERE 1;
#+END_SRC

#+RESULTS:
| host      | user             |
|-----------+------------------|
| %         | brantou          |
| localhost | debian-sys-maint |
| localhost | mysql.session    |
| localhost | mysql.sys        |
| localhost | root             |
</pre>
</div>
</div>

Last Updated 2017-12-05 Tue 23:20.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/08/30/ob-python-intro/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/30/ob-python-intro/" itemprop="url">写Python的新方式</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-30T00:00:00+08:00">
                2017-08-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/30/ob-python-intro/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/08/30/ob-python-intro/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
Org mode is for keeping notes, maintaining TODO lists, planning projects,
and authoring documents with a fast and effective plain-text system.
</p>
</blockquote>

<p>
<code>Org-mode</code> 类似于 <code>Markdown</code> , 但是远胜于 <code>Markdown</code> 。
曾有小伙伴说过， <code>Org-mode</code> 是 <code>Markdown</code> 的封神模式， 个人觉得这话一点不夸张，
相比较而言， <code>Markdown</code> 只是一套简洁的文档格式， 而 <code>Org-mode</code> 除了涵盖作为文档格式的简洁之外，
还可用于记笔记，维护 <b>TODO</b> 列表， 工程管理,以及可用于元编程。
对于元编程的支持请阅读我之前的译文， <a href="https://brantou.github.io/2017/04/01/babel-intro/">Babel: org-mode的元编程</a>。
</p>

<p>
所谓的元编程，即是 <code>Org-mode</code> 搭建了一个多语言可以交互执行的环境， 在这个环境中，可选用各语言的特性，来分解执行一个大型任务。
</p>

<div class="export">
<p>
&lt;img src="/images/babel-fish.jpg&rdquo; /&gt;
</p>

</div>
<blockquote>
<p>
The Babel Fish is small, yellow, and simultaneously translates from <br>
one spoken language to another.  <br>
– The Hitchhiker&rsquo;s Guide to the Galaxy, Douglas Adams
</p>
</blockquote>

<p>
<code>Org-mode</code> 对于比较流行的语言都有很好的支持，
而且对于新语言，也可以很容易添加支持，本人就给两种语言添加过支持。
本文章主要讲述 <code>Org-mode</code> 对于 <code>Python</code> 源代码块的支持,
<code>Python</code> 相当的流行, 所以在 <code>Org-mode</code> 中被很完美的支持。
<code>Org-mode</code> 中的 <code>Python</code> 源代码块可用于定义函数、过滤器和数据分析、创建图表以及生成可重现的研究论文。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-dd1c7aab-e7a8-4c27-a12d-46fbe3f98cdb" name="ID-dd1c7aab-e7a8-4c27-a12d-46fbe3f98cdb"></a><span class="section-number-2">1</span> 配置</h2>
<div class="outline-text-2" id="text-1">
<p>
这里假设 <code>Python</code>  的开发环境已配置完毕，若是还没配置，请自行google。
</p>

<p>
<code>Org-mode</code> 已内置在新的 <b>Emacs</b> 中，但是默认情况下， 只有 <code>emacs-lisp</code> 可被执行。
要启用或禁用其他语言, 可通过 <b>Emacs</b> 自定义交互界面来配置  <code>org-babel-load-languages</code> 变量,
或者将代码添加到 <code>init</code> 文件中, 启用python的代码如下所示:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">org-babel-do-load-languages</span></span><br><span class="line"> <span class="quoted">'org-babel-load-languages</span></span><br><span class="line"> <span class="quoted">'((python . <span class="literal">t</span>))</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-8b5e6e60-dddf-4813-8bfe-2ba85444f3ee" name="ID-8b5e6e60-dddf-4813-8bfe-2ba85444f3ee"></a><span class="section-number-2">2</span> Org-mode对于Python源码块的支持</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><a id="ID-aaa9eaf4-7c30-48e2-a737-45fe5c77b7c5" name="ID-aaa9eaf4-7c30-48e2-a737-45fe5c77b7c5"></a><span class="section-number-3">2.1</span> 头参数</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><a id="ID-d1554529-76b0-41d1-b0eb-db13448dee88" name="ID-d1554529-76b0-41d1-b0eb-db13448dee88"></a><span class="section-number-4">2.1.1</span> 语言特定的头参数</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li>:results {output, value}: 默认 <code>value</code> 模式, 即 <i>functional mode</i>, 像函数一样执行，然后返回计算结果。
</li>
<li>:preamble: 前导代码，插入到最前面（不常用）。 默认为空。
</li>
<li>:return: 要返回的值（仅用于result-type为 <code>value</code> 时，不在 <code>session</code> 模式下;不常用）。
默认值为空，在 <code>Non-session</code> 模式下，使用 <code>return()</code> 返回值。
</li>
<li>:python: 执行Python代码的程序名称。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><a id="ID-ad484d0a-a8ae-4d72-800e-9a5a41ae3283" name="ID-ad484d0a-a8ae-4d72-800e-9a5a41ae3283"></a><span class="section-number-4">2.1.2</span> 公共头参数</h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li>:seesion [name]: 默认非 <code>session</code> 模式。
</li>
<li>:var data=data-table: <code>Org-mode</code> 的 <code>table</code> 可被当做列表传递给Python代码块。
</li>
<li>:exports {code, results, both, none}: 完全支持 <code>babel</code> 的导出选项。
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><a id="ID-1b1aa351-fb05-4fbe-bdc5-f55b93d38b79" name="ID-1b1aa351-fb05-4fbe-bdc5-f55b93d38b79"></a><span class="section-number-3">2.2</span> Sessions</h3>
<div class="outline-text-3" id="text-2-2">

<p>
python完全支持 <code>session</code> 模式，包括命名 <code>session</code> 。
在 <code>session</code> 模式下，代码块都运行在同一个长时间运行的 <code>python</code> 的交互式解释器 <code>session</code> 中，就像你在交互式 <code>python</code> 键入的一样。
可以拥有多个 <code>session</code> ，而且它们是完全相互独立。
</p>

<p>
<code>session</code>  可用于定义函数，设置变量和在源块之间共享代码。
</p>

<p>
python中的 <code>session</code> 模式与 <code>non-session</code> 模式略有不同，因为在 <code>session</code> 模式下， 你正在与单个“交互式” <code>python session</code> 交互。
在 <code>python</code> 的交互模式中，空行是特殊的：它们表示缩进代码块的结束, 所以会写出一些稍微不同的 <code>python</code> 代码。
</p>

<p>
另外，在 <code>non-session</code> 模式下，python代码块将被包装在一个函数中， 所以要返回一个值（ <code>:result value mode</code> ），你必须使用一个return语句。
在 <code>session</code> 模式下， <code>python</code> 代码由解释器直接评估，而不是在一个函数的上下文中，
最后一个语句的值将被自动返回，因此不能使用 <code>return</code> 语句。
</p>
</div>

<div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><a id="ID-7e6dfa8c-70a2-402a-ae11-355ebd5b0c31" name="ID-7e6dfa8c-70a2-402a-ae11-355ebd5b0c31"></a><span class="section-number-4">2.2.1</span> Session mode</h4>
<div class="outline-text-4" id="text-2-2-1">
<pre class="example">
# blank lines not OK in indented blocks, and don't use return()
# Source block is passed directly to interactive python;
# value is value of _ at end.
#+begin_src python :session
def foo(x):
  if x&gt;0:
    return x+1
  else:
    return x-1

foo(1)
#+end_src

#+RESULTS:
: 2
</pre>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2"><a id="ID-0259c9cf-ebd7-431d-bd21-02f11ac76ca3" name="ID-0259c9cf-ebd7-431d-bd21-02f11ac76ca3"></a><span class="section-number-4">2.2.2</span> Non-session mode</h4>
<div class="outline-text-4" id="text-2-2-2">
<pre class="example">
# blank lines OK in indented blocks, and use return()
# Entire source block will get indented and used as the body of main()
#+begin_src python
def foo(x):
  if x&gt;0:
    return x+1

  else:
    return x-1

return foo(5)
#+end_src

#+RESULTS:
: 6
</pre>


<p>
最后，如果你使用 <code>matplotlib</code> 的图形功能，同时使用 <code>seesion</code> 模式，
必须显式设置后端, 例如 <b>PDF</b> , <b>PNG</b> 或其他文件导出后端。 见下面示例:
</p>
<pre class="example">
#+begin_src python :session :results file
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
fig=plt.figure(figsize=(3,2))
plt.plot([1,3,2])
fig.tight_layout()
plt.savefig('images/myfig.pdf')
'images/myfig.pdf' # return this to org-mode
#+end_src

#+RESULTS:
[[file:images/myfig.pdf]]
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><a id="ID-499cadec-6fdf-4f0f-91e0-586ecb78bb70" name="ID-499cadec-6fdf-4f0f-91e0-586ecb78bb70"></a><span class="section-number-3">2.3</span> 返回类型</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>value：=value= 结果是代码块中求值的最后一个表达式的值。 <code>session</code> 模式下使用的python解释器特殊变量“_” 来引用最后一个表达式的值。
</li>
<li>output：=output= 结果来自 <code>python</code> 代码打印到 <code>stdout</code> 上任意信息。
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-98d57d43-f1ad-40fe-bae1-9f248c41068e" name="ID-98d57d43-f1ad-40fe-bae1-9f248c41068e"></a><span class="section-number-2">3</span> 使用示例</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Hello World!
<pre class="example">
#+begin_src python :results output
  print "Hello, world!"
#+end_src

#+RESULTS:
: Hello, world!
</pre>
</li>

<li>参数
<pre class="example">
#+NAME: square
#+BEGIN_SRC python :var num=5
  def square(x):
      return x*x

  return square(num)
#+END_SRC

#+RESULTS: square
: 25

#+CALL: square(num=10)

#+RESULTS:
: 100
</pre>
</li>

<li>文学编程
<pre class="example">
#+NAME: square
#+BEGIN_SRC python
  def square(x):
      return x*x
#+END_SRC

#+NAME: calc-square
#+BEGIN_SRC python :var num=5 :noweb strip-export :results output
  &lt;&lt;square&gt;&gt;
  print(square(num))
#+END_SRC

#+RESULTS: calc-square
: 25

#+CALL: calc-square(num=7)

#+RESULTS:
: 49
</pre>
</li>

<li>内联调用(Inline calling):
<pre class="example">
2 加 2 等于 src_python{return(2+2)}
</pre>

<p>
当导出 <b>HTML</b> 或者 <b>LaTeX/PDF</b> 时，如下所示：
</p>
<pre class="example">
2 加 2 等于 4
</pre>
</li>

<li>使用Org-mode的table作为参数
<pre class="example">
#+tblname: data_table
| a | 1 |
| b | 2 |
| c | 3 |
#+begin_src python :var val=1 :var data=data_table
# Return row specified by val.
# In non-session mode, use return to return results.
return(data[val])
#+end_src

#+RESULTS:
| b | 2 |
</pre>
</li>

<li>绘图
<pre class="example">
#+begin_src python :results file
  import matplotlib, numpy
  matplotlib.use('Agg')
  import matplotlib.pyplot as plt
  fig=plt.figure(figsize=(4,2))
  x=numpy.linspace(-15,15)
  plt.plot(numpy.sin(x)/x)
  fig.tight_layout()
  plt.savefig('../images/python-matplot-fig.png')
  return '../images/python-matplot-fig.png'
#+end_src

#+RESULTS:
[[file:../images/python-matplot-fig.png]]
</pre>

<div class="export">
<p>
&lt;img src="/images/python-matplot-fig.png&rdquo; /&gt;
</p>

</div>
</li>

<li>词云
<pre class="example">
#+BEGIN_SRC python :preamble "# -*- coding: utf-8 -*-" :results value file
  import jieba.analyse
  from wordcloud import WordCloud, ImageColorGenerator
  import numpy as np
  from PIL import Image
  import random

  font_path = '../resource/tyzkaishu.ttf'
  width = 640
  height = 480

  text = open('../resource/xiyouji.txt').read()
  words = jieba.analyse.extract_tags(text, topK=200, withWeight=True)

  word_freqs = {}
  for word in words:
      word_freqs[word[0]] = word[1]

  mask = np.array(Image.open('../resource/stormtrooper_mask.png'))
  wordcloud = WordCloud(
      font_path=font_path, width=width, height=height,
      mask=mask).generate_from_frequencies(word_freqs)
  wordcloud.to_file('../images/xiyouji-mask.png')
  return '../images/xiyouji-mask.png'
#+END_SRC

#+RESULTS:
[[file:../images/xiyouji-mask.png]]
</pre>

<div class="export">
<p>
&lt;img src="/images/xiyouji-mask.png&rdquo; /&gt;
</p>

</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-411b11c2-85b5-40ca-894b-c915ddb9325e" name="ID-411b11c2-85b5-40ca-894b-c915ddb9325e"></a><span class="section-number-2">4</span> 前方预警</h2>
<div class="outline-text-2" id="text-4">
<p>
当把 <code>utf-8</code> 的字符串传给 <code>Python</code> , 需要格外小心。
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><a id="ID-005389e6-3af8-4987-a226-7d857f9fe35f" name="ID-005389e6-3af8-4987-a226-7d857f9fe35f"></a><span class="section-number-3">4.1</span> 传递utf-8字符串到Python</h3>
<div class="outline-text-3" id="text-4-1">
<pre class="example">
#+NAME: unicode_str
#+BEGIN_EXAMPLE
  “this string is not ascii!”
#+END_EXAMPLE
</pre>

<pre class="example">
#+NAME: error-in-passing-var
#+BEGIN_SRC python :var data=unicode_str
  return data
#+END_SRC
</pre>

<pre class="example">
#+RESULTS: error-in-passing-var
</pre>

<p>
上面代码不会生成任何输出, 并在 <code>*Org-Babel Error Output*</code> 的缓冲区中打印以下消息:
</p>
<blockquote>
<p>
File &ldquo;&lt;stdin&gt;&rdquo;, line 3
SyntaxError: Non-ASCII character &lsquo;\xe2&rsquo; in file &lt;stdin&gt; on line 3, but no encoding declared; see <a href="http://python.org/dev/peps/pep-0263/" rel="external nofollow noopener noreferrer" target="_blank">http://python.org/dev/peps/pep-0263/</a> for details
</p>
</blockquote>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><a id="ID-9e5a70ba-c852-4a19-8200-d20c395ab2af" name="ID-9e5a70ba-c852-4a19-8200-d20c395ab2af"></a><span class="section-number-3">4.2</span> 传递utf-8字符串到Python的变通方法</h3>
<div class="outline-text-3" id="text-4-2">
<p>
一个变通方法是使用 <code>:preamble</code> ,如下所示:
</p>
<pre class="example">
#+NAME: ok-in-passing-var
#+BEGIN_SRC python :preamble "# -*- coding: utf-8 -*-" :var data=unicode_str
  return data
#+END_SRC
</pre>

<pre class="example">
#+RESULTS: ok-in-passing-var
: “this string is not ascii!”
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-86504328-89bc-461b-805b-ab7d0f252ad6" name="ID-86504328-89bc-461b-805b-ab7d0f252ad6"></a><span class="section-number-2">5</span> 参考文档</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li><a href="http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-python.html" rel="external nofollow noopener noreferrer" target="_blank">Python Source Code Blocks in Org Mode</a>
</li>
<li><a href="https://brantou.github.io/2017/04/01/babel-intro/">Babel: org-mode的元编程</a>
</li>
<li><a href="https://brantou.github.io/2017/06/12/go-source-code-block-in-org/">在Org-mode中执行Go代码</a>
</li>
<li><a href="http://orgmode.org/manual/Working-With-Source-Code.html#Working-With-Source-Code" rel="external nofollow noopener noreferrer" target="_blank">Working with source code</a>
</li>
<li><a href="http://orgmode.org/worg/org-contrib/babel/" rel="external nofollow noopener noreferrer" target="_blank">Babel: active code in Org-mode</a>
</li>
</ul>
</div>
</div>

Last Updated 2018-04-23 Mon 15:36.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/08/25/python-jieba-wordcloud/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/25/python-jieba-wordcloud/" itemprop="url">玩转词云</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-25T00:00:00+08:00">
                2017-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/25/python-jieba-wordcloud/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/08/25/python-jieba-wordcloud/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-681fffd0-61dc-44eb-860a-82cfbfe2c080" name="ID-681fffd0-61dc-44eb-860a-82cfbfe2c080"></a><span class="section-number-2">1</span> jieba中文分词</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><a id="ID-a7a6f9a3-eee0-4e7a-8ec2-a3281cbdb2ba" name="ID-a7a6f9a3-eee0-4e7a-8ec2-a3281cbdb2ba"></a><span class="section-number-3">1.1</span> 分词</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(srcWd, cut_all=<span class="keyword">True</span>)</span><br><span class="line">print(<span class="string">u'Full mode:'</span> + <span class="string">u'/ '</span>.join(seg_list))</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(srcWd, cut_all=<span class="keyword">False</span>)</span><br><span class="line">print(<span class="string">u'Default mode:'</span> + <span class="string">u'/ '</span>.join(seg_list))</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut_for_search(srcWd)</span><br><span class="line">print(<span class="string">u', '</span>.join(seg_list))</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
Full mode:做/ 最好/ 的/ Python/ 中文/ 分词/ 词组/ 组件
Default mode:做/ 最好/ 的/ Python/ 中文/ 分词/ 组件
做, 最好, 的, Python, 中文, 分词, 组件
</pre>

<pre class="example">
Full mode:我/ 目前/ 在/ 学习/ Golang/ 和/ Python/
Default mode:我/ 目前/ 在/ 学习/ Golang/ 和/ Python/ 。
我, 目前, 在, 学习, Golang, 和, Python, 。
</pre>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><a id="ID-ba473993-dd11-4116-8578-b31a6161ed0e" name="ID-ba473993-dd11-4116-8578-b31a6161ed0e"></a><span class="section-number-3">1.2</span> 自定义词典</h3>
<div class="outline-text-3" id="text-1-2">
<p>
招聘信息收集了很多，但是关键字提取却不是很理想，我查看了jiaba的词典里，基本没有对英文专有名词的支持，
这可苦煞了我，但是jieba支持自定义词典，我来生成英文的专有名词的词典好了。一行一行的加，难为我这个懒人了，
但总有好心人，已经整理好了，试想这个名词是不是招聘网站已经整理好了，而且分门别类的，只需要把它们取回来就好了。
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_html</span><span class="params">(url)</span>:</span></span><br><span class="line">    request = urllib2.Request(url)</span><br><span class="line">    request.add_header(</span><br><span class="line">	<span class="string">'User-Agent'</span>,</span><br><span class="line">	<span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36'</span></span><br><span class="line">    )</span><br><span class="line">    html = urllib2.urlopen(request)</span><br><span class="line">    <span class="keyword">return</span> html.read()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_soup</span><span class="params">(url)</span>:</span></span><br><span class="line">    soup = BeautifulSoup(get_html(url), <span class="string">'lxml'</span>)</span><br><span class="line">    <span class="keyword">return</span> soup</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_lagou</span><span class="params">()</span>:</span></span><br><span class="line">    words = []</span><br><span class="line">    url = <span class="string">'https://www.lagou.com/'</span></span><br><span class="line">    soup = get_soup(url)</span><br><span class="line">    category_list = soup.find_all(<span class="string">'div'</span>, attrs={<span class="string">'class'</span>: <span class="string">'menu_sub dn'</span>})</span><br><span class="line">    <span class="keyword">for</span> category <span class="keyword">in</span> category_list:</span><br><span class="line">	dls = category.find_all(<span class="string">'dl'</span>)</span><br><span class="line">	<span class="keyword">for</span> dl <span class="keyword">in</span> dls:</span><br><span class="line">	    names = dl.dd.find_all(<span class="string">'a'</span>)</span><br><span class="line">	    <span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">		words.append(name.text)</span><br><span class="line">    <span class="keyword">return</span> words</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_zhipin</span><span class="params">()</span>:</span></span><br><span class="line">    words = []</span><br><span class="line">    url = <span class="string">'http://www.zhipin.com/'</span></span><br><span class="line">    soup = get_soup(url)</span><br><span class="line">    job_menu = soup.find(<span class="string">'div'</span>, attrs={<span class="string">'class'</span>: <span class="string">'job-menu'</span>})</span><br><span class="line">    dls = job_menu.find_all(<span class="string">'dl'</span>)</span><br><span class="line">    <span class="keyword">for</span> dl <span class="keyword">in</span> dls:</span><br><span class="line">	divs = dl.find_all(<span class="string">'div'</span>, attrs={<span class="string">'class'</span>: <span class="string">'text'</span>})</span><br><span class="line">	<span class="keyword">for</span> div <span class="keyword">in</span> divs:</span><br><span class="line">	    names = div.find_all(<span class="string">'a'</span>)</span><br><span class="line">	    <span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">		words.append(name.text)</span><br><span class="line">    <span class="keyword">return</span> words</span><br></pre></td></tr></table></figure>
</div>

<p>
看来我思维受限了，招聘网站整理的信息都是高频信息，但是广度肯定是不够的，那怎么办呢。
这个时候 <a href="https://stackoverflow.com/tags?page=1&tab=popular" rel="external nofollow noopener noreferrer" target="_blank">stackoverflow</a> 闪现在我的脑海中，没有那个网站里有关技术的广度，能和它匹敌了。
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_stackoverflow</span><span class="params">()</span>:</span></span><br><span class="line">  words = []</span><br><span class="line">  <span class="keyword">for</span> pageNo <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">20</span>):</span><br><span class="line">      url = <span class="string">'https://stackoverflow.com/tags?page=%d&amp;tab=popular'</span> % (pageNo)</span><br><span class="line">      soup = get_soup(url)</span><br><span class="line">      tags_list = soup.find(<span class="string">'div'</span>, attrs={<span class="string">'id'</span>: <span class="string">'tags_list'</span>})</span><br><span class="line">      trs = tags_list.table.find_all(<span class="string">'tr'</span>)</span><br><span class="line">      <span class="keyword">for</span> tr <span class="keyword">in</span> trs:</span><br><span class="line">	  tds = tr.find_all(<span class="string">'td'</span>)</span><br><span class="line">	  <span class="keyword">for</span> td <span class="keyword">in</span> tds:</span><br><span class="line">	      words.append(td.a.text)</span><br><span class="line">  <span class="keyword">return</span> words</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><a id="ID-0f9f838d-0b96-4d20-bbd0-f9b31664e187" name="ID-0f9f838d-0b96-4d20-bbd0-f9b31664e187"></a><span class="section-number-3">1.3</span> 调整词典</h3>
<div class="outline-text-3" id="text-1-3">

<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> jieba.analyse</span><br><span class="line"></span><br><span class="line">print(<span class="string">', '</span>.join(</span><br><span class="line">    jieba.analyse.extract_tags(srcWd, allowPOS=(<span class="string">'n'</span>, <span class="string">'nz'</span>, <span class="string">'eng'</span>, <span class="string">'vn'</span>))))</span><br><span class="line">jieba.load_userdict(<span class="string">'../resource/userdict.txt'</span>)</span><br><span class="line">print(<span class="string">', '</span>.join(</span><br><span class="line">    jieba.analyse.extract_tags(srcWd, allowPOS=(<span class="string">'n'</span>, <span class="string">'nz'</span>, <span class="string">'eng'</span>, <span class="string">'vn'</span>))))</span><br></pre></td></tr></table></figure>
</div>

<pre class="example">
理解能力, 经验, 数据挖掘, 敏锐度, 平台, odps, hadoop, 数据仓库, hive, 建模, 业务, 海量, 能力, 数据, 协作, 优先, 团队, 模型, 计算机, 学科
理解能力, 经验, 数据挖掘, 敏锐度, 平台, odps, hadoop, 数据仓库, hive, 建模, 业务, 海量, 能力, 数据, 协作, 优先, 团队, 模型, 计算机, 学科
</pre>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><a id="ID-7308abe6-a074-4153-a4c0-bb74f199bb07" name="ID-7308abe6-a074-4153-a4c0-bb74f199bb07"></a><span class="section-number-3">1.4</span> 关键词提取</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.analyse</span><br><span class="line"></span><br><span class="line">print(<span class="string">', '</span>.join(jieba.analyse.extract_tags(srcWd, allowPOS=())))</span><br><span class="line">print(<span class="string">', '</span>.join(</span><br><span class="line">    jieba.analyse.extract_tags(srcWd, allowPOS=(<span class="string">'n'</span>, <span class="string">'nt'</span>, <span class="string">'nz'</span>, <span class="string">'eng'</span>, <span class="string">'vn'</span></span><br><span class="line">						))))</span><br><span class="line">wordlst = jieba.analyse.extract_tags(</span><br><span class="line">    srcWd, withWeight=<span class="keyword">True</span>, allowPOS=(<span class="string">'n'</span>, <span class="string">'nt'</span>, <span class="string">'nz'</span>, <span class="string">'eng'</span>, <span class="string">'vn'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> wordlst:</span><br><span class="line">    print(word[<span class="number">0</span>] + <span class="string">": "</span> + str(word[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.analyse</span><br><span class="line"></span><br><span class="line">print(<span class="string">', '</span>.join(jieba.analyse.textrank(srcWd)))</span><br><span class="line">print(<span class="string">', '</span>.join(</span><br><span class="line">    jieba.analyse.textrank(srcWd, allowPOS=(<span class="string">'n'</span>, <span class="string">'nz'</span>, <span class="string">'eng'</span>, <span class="string">'vn'</span>))))</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><a id="ID-ba65f4b7-159b-440a-9df3-ac90465716e4" name="ID-ba65f4b7-159b-440a-9df3-ac90465716e4"></a><span class="section-number-3">1.5</span> 词性标注</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg</span><br><span class="line"></span><br><span class="line">jieba.load_userdict(<span class="string">'../resource/userdict.txt'</span>)</span><br><span class="line">words = pseg.cut(srcWd)</span><br><span class="line"><span class="keyword">for</span> word, flag <span class="keyword">in</span> words:</span><br><span class="line">    print(<span class="string">'%s %s'</span> % (word, flag))</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-d3a8f6d2-c043-4104-9f83-08e71a7a5c7a" name="ID-d3a8f6d2-c043-4104-9f83-08e71a7a5c7a"></a><span class="section-number-2">2</span> wordcloud词云</h2>
<div class="outline-text-2" id="text-2">
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><a id="ID-9133f12f-f7ba-4019-b21f-fbdea70088b1" name="ID-9133f12f-f7ba-4019-b21f-fbdea70088b1"></a><span class="section-number-3">2.1</span> 简单词云&#x2013;美国宪法的词云</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span><br><span class="line">Minimal Example</span><br><span class="line">===============</span><br><span class="line">Generating a square wordcloud from the US constitution using default arguments.</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read the whole text.</span></span><br><span class="line">text = open(<span class="string">'../resource/constitution.txt'</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate a word cloud image</span></span><br><span class="line">wordcloud = WordCloud(width=<span class="number">640</span>, height=<span class="number">480</span>).generate(text)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/constitution-n.png'</span>)</span><br><span class="line"></span><br><span class="line">wordcloud = WordCloud(width=<span class="number">640</span>, height=<span class="number">480</span>, max_font_size=<span class="number">80</span>).generate(text)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/constitution-s.png'</span>)</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/constitution-n.png&rdquo; /&gt;
</p>

</div>

<div class="export">
<p>
&lt;img src="/images/constitution-s.png&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><a id="ID-74f1f64c-c027-4bd1-bdee-48e68b59bc85" name="ID-74f1f64c-c027-4bd1-bdee-48e68b59bc85"></a><span class="section-number-3">2.2</span> Colored by Group</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> (WordCloud, get_single_color_func)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleGroupedColorFunc</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">"""Create a color function object which assigns EXACT colors</span><br><span class="line">       to certain words based on the color to words mapping</span><br><span class="line"></span><br><span class="line">       Parameters</span><br><span class="line">       ----------</span><br><span class="line">       color_to_words : dict(str -&gt; list(str))</span><br><span class="line">	 A dictionary that maps a color to the list of words.</span><br><span class="line"></span><br><span class="line">       default_color : str</span><br><span class="line">	 Color that will be assigned to a word that's not a member</span><br><span class="line">	 of any value from color_to_words.</span><br><span class="line">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, color_to_words, default_color)</span>:</span></span><br><span class="line">	self.word_to_color = {</span><br><span class="line">	    word: color</span><br><span class="line">	    <span class="keyword">for</span> (color, words) <span class="keyword">in</span> color_to_words.items() <span class="keyword">for</span> word <span class="keyword">in</span> words</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	self.default_color = default_color</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, word, **kwargs)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> self.word_to_color.get(word, self.default_color)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupedColorFunc</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">"""Create a color function object which assigns DIFFERENT SHADES of</span><br><span class="line">       specified colors to certain words based on the color to words mapping.</span><br><span class="line"></span><br><span class="line">       Uses wordcloud.get_single_color_func</span><br><span class="line"></span><br><span class="line">       Parameters</span><br><span class="line">       ----------</span><br><span class="line">       color_to_words : dict(str -&gt; list(str))</span><br><span class="line">	 A dictionary that maps a color to the list of words.</span><br><span class="line"></span><br><span class="line">       default_color : str</span><br><span class="line">	 Color that will be assigned to a word that's not a member</span><br><span class="line">	 of any value from color_to_words.</span><br><span class="line">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, color_to_words, default_color)</span>:</span></span><br><span class="line">	self.color_func_to_words = [(get_single_color_func(color), set(words))</span><br><span class="line">				    <span class="keyword">for</span> (color,</span><br><span class="line">					 words) <span class="keyword">in</span> color_to_words.items()]</span><br><span class="line"></span><br><span class="line">	self.default_color_func = get_single_color_func(default_color)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_color_func</span><span class="params">(self, word)</span>:</span></span><br><span class="line">	<span class="string">"""Returns a single_color_func associated with the word"""</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">	    color_func = next(</span><br><span class="line">		color_func <span class="keyword">for</span> (color_func, words) <span class="keyword">in</span> self.color_func_to_words</span><br><span class="line">		<span class="keyword">if</span> word <span class="keyword">in</span> words)</span><br><span class="line">	<span class="keyword">except</span> StopIteration:</span><br><span class="line">	    color_func = self.default_color_func</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> color_func</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, word, **kwargs)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> self.get_color_func(word)(word, **kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">text = <span class="string">"""The Zen of Python, by Tim Peters</span><br><span class="line">Beautiful is better than ugly.</span><br><span class="line">Explicit is better than implicit.</span><br><span class="line">Simple is better than complex.</span><br><span class="line">Complex is better than complicated.</span><br><span class="line">Flat is better than nested.</span><br><span class="line">Sparse is better than dense.</span><br><span class="line">Readability counts.</span><br><span class="line">Special cases aren't special enough to break the rules.</span><br><span class="line">Although practicality beats purity.</span><br><span class="line">Errors should never pass silently.</span><br><span class="line">Unless explicitly silenced.</span><br><span class="line">In the face of ambiguity, refuse the temptation to guess.</span><br><span class="line">There should be one-- and preferably only one --obvious way to do it.</span><br><span class="line">Although that way may not be obvious at first unless you're Dutch.</span><br><span class="line">Now is better than never.</span><br><span class="line">Although never is often better than *right* now.</span><br><span class="line">If the implementation is hard to explain, it's a bad idea.</span><br><span class="line">If the implementation is easy to explain, it may be a good idea.</span><br><span class="line">Namespaces are one honking great idea -- let's do more of those!"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Since the text is small collocations are turned off and text is lower-cased</span></span><br><span class="line">wc = WordCloud(collocations=<span class="keyword">False</span>).generate(text.lower())</span><br><span class="line"></span><br><span class="line">color_to_words = {</span><br><span class="line">    <span class="comment"># words below will be colored with a green single color function</span></span><br><span class="line">    <span class="string">'#00ff00'</span>: [</span><br><span class="line">	<span class="string">'beautiful'</span>, <span class="string">'explicit'</span>, <span class="string">'simple'</span>, <span class="string">'sparse'</span>, <span class="string">'readability'</span>, <span class="string">'rules'</span>,</span><br><span class="line">	<span class="string">'practicality'</span>, <span class="string">'explicitly'</span>, <span class="string">'one'</span>, <span class="string">'now'</span>, <span class="string">'easy'</span>, <span class="string">'obvious'</span>, <span class="string">'better'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># will be colored with a red single color function</span></span><br><span class="line">    <span class="string">'red'</span>: [</span><br><span class="line">	<span class="string">'ugly'</span>, <span class="string">'implicit'</span>, <span class="string">'complex'</span>, <span class="string">'complicated'</span>, <span class="string">'nested'</span>, <span class="string">'dense'</span>,</span><br><span class="line">	<span class="string">'special'</span>, <span class="string">'errors'</span>, <span class="string">'silently'</span>, <span class="string">'ambiguity'</span>, <span class="string">'guess'</span>, <span class="string">'hard'</span></span><br><span class="line">    ]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># Words that are not in any of the color_to_words values</span></span><br><span class="line"><span class="comment"># will be colored with a grey single color function</span></span><br><span class="line">default_color = <span class="string">'grey'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a color function with single tone</span></span><br><span class="line"><span class="comment"># grouped_color_func = SimpleGroupedColorFunc(color_to_words, default_color)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a color function with multiple tones</span></span><br><span class="line">grouped_color_func = GroupedColorFunc(color_to_words, default_color)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply our color function</span></span><br><span class="line">wc.recolor(color_func=grouped_color_func)</span><br><span class="line">wc.to_file(<span class="string">'../images/grouped-color.png'</span>)</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/grouped-color.png&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><a id="ID-a83e73b6-c132-4eb3-b968-d985cd2a5ceb" name="ID-a83e73b6-c132-4eb3-b968-d985cd2a5ceb"></a><span class="section-number-3">2.3</span> 西游记的词云</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.analyse</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, ImageColorGenerator</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grey_color_func</span><span class="params">(word,</span><br><span class="line">		    font_size,</span><br><span class="line">		    position,</span><br><span class="line">		    orientation,</span><br><span class="line">		    random_state=None,</span><br><span class="line">		    **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hsl(0, 0%%, %d%%)"</span> % random.randint(<span class="number">60</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">font_path = <span class="string">'../resource/tyzkaishu.ttf'</span></span><br><span class="line">width = <span class="number">640</span></span><br><span class="line">height = <span class="number">480</span></span><br><span class="line"></span><br><span class="line">text = open(<span class="string">'../resource/xiyouji.txt'</span>).read()</span><br><span class="line">words = jieba.analyse.extract_tags(text, topK=<span class="number">200</span>, withWeight=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">word_freqs = {}</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    word_freqs[word[<span class="number">0</span>]] = word[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">wordcloud = WordCloud(</span><br><span class="line">    font_path=font_path, width=width,</span><br><span class="line">    height=height).generate_from_frequencies(word_freqs)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/xiyouji.png'</span>)</span><br><span class="line"></span><br><span class="line">mask = np.array(Image.open(<span class="string">'../resource/stormtrooper_mask.png'</span>))</span><br><span class="line">wordcloud = WordCloud(</span><br><span class="line">    font_path=font_path, width=width, height=height,</span><br><span class="line">    mask=mask).generate_from_frequencies(word_freqs)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/xiyouji-mask.png'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># recolor wordcloud</span></span><br><span class="line">wordcloud.recolor(color_func=grey_color_func, random_state=<span class="number">3</span>)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/xiyouji-custom.png'</span>)</span><br><span class="line"></span><br><span class="line">alice_coloring = np.array(Image.open(<span class="string">'../resource/alice_color.png'</span>))</span><br><span class="line">wordcloud = WordCloud(</span><br><span class="line">    font_path=font_path,</span><br><span class="line">    width=width,</span><br><span class="line">    height=height,</span><br><span class="line">    background_color=<span class="string">"white"</span>,</span><br><span class="line">    mask=alice_coloring,</span><br><span class="line">    max_font_size=<span class="number">80</span>,</span><br><span class="line">    random_state=<span class="number">42</span>).generate_from_frequencies(word_freqs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create coloring from image</span></span><br><span class="line">image_colors = ImageColorGenerator(alice_coloring)</span><br><span class="line"></span><br><span class="line"><span class="comment"># recolor wordcloud</span></span><br><span class="line">wordcloud.recolor(color_func=image_colors)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/xiyouji-color.png'</span>)</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/xiyouji.png&rdquo; /&gt;
</p>

</div>

<div class="export">
<p>
&lt;img src="/images/xiyouji-mask.png&rdquo; /&gt;
</p>

</div>

<div class="export">
<p>
&lt;img src="/images/xiyouji-custom.png&rdquo; /&gt;
</p>

</div>

<div class="export">
<p>
&lt;img src="/images/xiyouji-color.png&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><a id="ID-6fe64167-7458-4049-8b65-94910c927f1d" name="ID-6fe64167-7458-4049-8b65-94910c927f1d"></a><span class="section-number-3">2.4</span> 阿里招聘的词云</h3>
<div class="outline-text-3" id="text-2-4">
<p>
招聘信息是我使用爬虫趴下来的的，这里只做数据的分析。
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> jieba.analyse</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br><span class="line"></span><br><span class="line">font_path = <span class="string">'../resource/zhengkaishu.ttf'</span></span><br><span class="line">width = <span class="number">640</span></span><br><span class="line">height = <span class="number">480</span></span><br><span class="line"></span><br><span class="line">client = MongoClient(<span class="string">'mongodb://localhost:27017/'</span>)</span><br><span class="line">jobs = client.jobs.alibaba</span><br><span class="line">text = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> job <span class="keyword">in</span> jobs.find({<span class="string">u'firstCategory'</span>: <span class="string">u'技术类'</span>}):</span><br><span class="line">    <span class="keyword">if</span> job.get(<span class="string">'requirement'</span>):</span><br><span class="line">	text += job.get(<span class="string">'requirement'</span>).replace(<span class="string">'&lt;br/&gt;'</span>, <span class="string">' '</span>) + <span class="string">'\n'</span></span><br><span class="line"></span><br><span class="line">jieba.load_userdict(<span class="string">'../resource/userdict.txt'</span>)</span><br><span class="line">words = jieba.analyse.extract_tags(text, topK=<span class="number">2000</span>, withWeight=<span class="keyword">True</span>)</span><br><span class="line">word_freqs = {}</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    _word = word[<span class="number">0</span>].lower().capitalize()</span><br><span class="line">    <span class="keyword">if</span> _word <span class="keyword">not</span> <span class="keyword">in</span> word_freqs:</span><br><span class="line">	word_freqs[_word] = word[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">	word_freqs[_word] += word[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">mask = np.array(Image.open(<span class="string">'../resource/stormtrooper_mask.png'</span>))</span><br><span class="line">wordcloud = WordCloud(</span><br><span class="line">    font_path=font_path, width=width, height=height,</span><br><span class="line">    mask=mask).generate_from_frequencies(word_freqs)</span><br><span class="line">wordcloud.to_file(<span class="string">'../images/alibaba-mask.png'</span>)</span><br></pre></td></tr></table></figure>
</div>

<div class="export">
<p>
&lt;img src="/images/alibaba-mask.png&rdquo; /&gt;
</p>

</div>
</div>
</div>
</div>

Last Updated 2018-04-25 Wed 22:19.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/08/22/scrapy-crawl-zhihu/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/22/scrapy-crawl-zhihu/" itemprop="url">scrapy模拟登陆知乎</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-22T00:00:00+08:00">
                2017-08-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/08/22/scrapy-crawl-zhihu/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/08/22/scrapy-crawl-zhihu/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
折腾了将近两天，中间数次想要放弃，还好硬着头皮搞下去了，在此分享出来，希望有同等需求的各位能少走一些弯路。
源码放在了github上， 欢迎<a href="https://github.com/brantou/crawler/blob/master/jobs/jobs/spiders/zhihu.py" rel="external nofollow noopener noreferrer" target="_blank">前往查看</a>。
若是帮你解决了问题，或者给了你启发，不要吝啬给<a href="https://github.com/brantou/crawler" rel="external nofollow noopener noreferrer" target="_blank">我加一星</a>。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-58b6b931-df7c-4492-ae8a-0d0308b629de" name="ID-58b6b931-df7c-4492-ae8a-0d0308b629de"></a><span class="section-number-2">1</span> 工具准备</h2>
<div class="outline-text-2" id="text-1">
<p>
在开始之前，请确保 <i>scrpay</i> 正确安装，手头有一款简洁而强大的浏览器， 若是你有使用 <i>postman</i> 那就更好了。
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">scrapy genspider zhihu</span><br></pre></td></tr></table></figure>
</div>
<p>
使用以上命令生成知乎爬虫,代码如下:
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZhihuSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'zhihu'</span></span><br><span class="line">    allowed_domains = [<span class="string">'www.zhihu.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://www.zhihu.com/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</div>

<p>
有一点切记，不要忘了启用 <i>Cookies</i>, <b>切记切记</b> ：
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disable cookies (enabled by default)</span></span><br><span class="line">COOKIES_ENABLED = <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-466f6a80-5175-4f0e-97bd-a1bd7f805f4c" name="ID-466f6a80-5175-4f0e-97bd-a1bd7f805f4c"></a><span class="section-number-2">2</span> 模拟登陆</h2>
<div class="outline-text-2" id="text-2">
<p>
过程如下：
</p>
<ul class="org-ul">
<li>进入登录页，获取 <i>Header</i> 和 <i>Cookie</i> 信息， 完善的 <i>Header</i> 信息能尽量伪装爬虫， 有效 <i>Cookie</i> 信息能迷惑知乎服务端，使其认为当前登录非首次登录，若无有效 <i>Cookie</i> 会遭遇验证码。 在抓取数据之前，请在浏览器中登录过知乎，这样才使得 <i>Cookie</i> 是有效的。
<div class="export">
<p>
&lt;img src="/images/zhihu-headers-cookies.jpg&rdquo; /&gt;
</p>

</div>
<p>
<i>Header</i> 和 <i>Cookie</i> 整理如下:
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">headers = {</span><br><span class="line">    <span class="string">'Host'</span>:</span><br><span class="line">    <span class="string">'www.zhihu.com'</span>,</span><br><span class="line">    <span class="string">'Connection'</span>:</span><br><span class="line">    <span class="string">'keep-alive'</span>,</span><br><span class="line">    <span class="string">'Origin'</span>:</span><br><span class="line">    <span class="string">'https://www.zhihu.com'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>:</span><br><span class="line">    <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'Content-Type'</span>:</span><br><span class="line">    <span class="string">'application/x-www-form-urlencoded; charset=UTF-8'</span>,</span><br><span class="line">    <span class="string">'Accept'</span>:</span><br><span class="line">    <span class="string">'*/*'</span>,</span><br><span class="line">    <span class="string">'X-Requested-With'</span>:</span><br><span class="line">    <span class="string">'XMLHttpRequest'</span>,</span><br><span class="line">    <span class="string">'DNT'</span>:</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    <span class="string">'Referer'</span>:</span><br><span class="line">    <span class="string">'https://www.zhihu.com/'</span>,</span><br><span class="line">    <span class="string">'Accept-Encoding'</span>:</span><br><span class="line">    <span class="string">'gzip, deflate, br'</span>,</span><br><span class="line">    <span class="string">'Accept-Language'</span>:</span><br><span class="line">    <span class="string">'zh-CN,zh;q=0.8,en;q=0.6'</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">cookies = {</span><br><span class="line">    <span class="string">'d_c0'</span>:</span><br><span class="line">    <span class="string">'"AHCAtu1iqAmPTped76X1ZdN0X_qAwhjdLUU=|1458699045"'</span>,</span><br><span class="line">    <span class="string">'__utma'</span>:</span><br><span class="line">    <span class="string">'51854390.1407411155.1458699046.1458699046.1458699046.1'</span>,</span><br><span class="line">    <span class="string">'__utmv'</span>:</span><br><span class="line">    <span class="string">'51854390.000--|3=entry_date=20160322=1'</span>,</span><br><span class="line">    <span class="string">'_zap'</span>:</span><br><span class="line">    <span class="string">'850897bb-cba4-4d0b-8653-fd65e7578ac2'</span>,</span><br><span class="line">    <span class="string">'q_c1'</span>:</span><br><span class="line">    <span class="string">'b7918ff9a5514d2981c30050c8c732e1|1502937247000|1491446589000'</span>,</span><br><span class="line">    <span class="string">'aliyungf_tc'</span>:</span><br><span class="line">    <span class="string">'AQAAAHVgviiNyQsAOhSntJ5J/coWYtad'</span>,</span><br><span class="line">    <span class="string">'_xsrf'</span>:</span><br><span class="line">    <span class="string">'b12fdca8-cb35-407a-bc4c-6b05feff37cb'</span>,</span><br><span class="line">    <span class="string">'l_cap_id'</span>:</span><br><span class="line">    <span class="string">'"MDk0MzRjYjM4NjAwNDU0MzhlYWNlODQ3MGQzZWM0YWU=|1503382513|9af99534aa22d5db92c7f58b45f3f3c772675fed"'</span>,</span><br><span class="line">    <span class="string">'r_cap_id'</span>:</span><br><span class="line">    <span class="string">'"M2RlNDZjN2RkNTBmNGFmNDk2ZjY4NjIzY2FmNTE4NDg=|1503382513|13370a99ee367273b71d877de17f05b2986ce0ef"'</span>,</span><br><span class="line">    <span class="string">'cap_id'</span>:</span><br><span class="line">    <span class="string">'"NmZjODUxZjQ0NzgxNGEzNmJiOTJhOTlkMTVjNWIxMDQ=|1503382513|dba2e9c6af7f950547474f827ef440d7a2950163"'</span>,</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</li>

<li>在浏览器中，模拟登陆，抓取登陆请求信息。
<div class="export">
<p>
&lt;img src="/images/zhihu-login-args.jpg&rdquo; /&gt;
</p>

</div>
<p>
从图中可以看到 <i>_xsrf</i> 参数, 这个参数与登陆验证信息无关，但很明显是由登陆页面携带的信息。
<a href="https://www.google.com.hk/search?q=xsrf" rel="external nofollow noopener noreferrer" target="_blank">Google </a>了下 <i>xsrf</i> 的含义， 是用于防范 <a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0" rel="external nofollow noopener noreferrer" target="_blank">跨站请求伪造</a> 。
</p>
<div class="export">
<p>
&lt;img src="/images/zhihu-xsrf.jpg&rdquo; /&gt;
</p>

</div>
</li>

<li>整理以上，代码如下：
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">loginUrl = <span class="string">'https://www.zhihu.com/#signin'</span></span><br><span class="line">siginUrl = <span class="string">'https://www.zhihu.com/login/email'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">	scrapy.http.FormRequest(</span><br><span class="line">	    self.loginUrl,</span><br><span class="line">	    headers=self.headers,</span><br><span class="line">	    cookies=self.cookies,</span><br><span class="line">	    meta={<span class="string">'cookiejar'</span>: <span class="number">1</span>},</span><br><span class="line">	    callback=self.post_login)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">post_login</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    xsrf = response.css(</span><br><span class="line">	<span class="string">'div.view-signin &gt; form &gt; input[name=_xsrf]::attr(value)'</span></span><br><span class="line">    ).extract_first()</span><br><span class="line">    self.headers[<span class="string">'X-Xsrftoken'</span>] = xsrf</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">	scrapy.http.FormRequest(</span><br><span class="line">	    self.siginUrl,</span><br><span class="line">	    method=<span class="string">'POST'</span>,</span><br><span class="line">	    headers=self.headers,</span><br><span class="line">	    meta={<span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>]},</span><br><span class="line">	    formdata={</span><br><span class="line">		<span class="string">'_xsrf'</span>: xsrf,</span><br><span class="line">		<span class="string">'captcha_type'</span>: <span class="string">'cn'</span>,</span><br><span class="line">		<span class="string">'email'</span>: <span class="string">'xxxxxx@163.com'</span>,</span><br><span class="line">		<span class="string">'password'</span>: <span class="string">'xxxxxx'</span>,</span><br><span class="line">	    },</span><br><span class="line">	    callback=self.after_login)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-57688588-4238-4459-abd5-1e263719316f" name="ID-57688588-4238-4459-abd5-1e263719316f"></a><span class="section-number-2">3</span> 设置Bearer Token</h2>
<div class="outline-text-2" id="text-3">
<p>
经过上述步骤登陆成功了，有点小激动，有没有！
但苦难到此还远没有结束，这个时候尝试抓取最近热门话题，直接返回 <i>code:401</i> ,未授权的访问。
授权信息未设置，导致了此类错误，莫非遗漏了什么，看来只能在浏览器中追踪请求参数来侦测问题。
在浏览器的请求中，包含了<a href="https://tools.ietf.org/html/rfc6750" rel="external nofollow noopener noreferrer" target="_blank">Bearer Token</a>, 而我在scrapy中模拟的请求中未包含此信息，所以我被服务器认定为未授权的。
通过观察发现 <i>Bearer Token</i> 的关键部分，就是 <i>Cookies</i> 中的 <i>z_c0</i> 对应的信息。
</p>
<div class="export">
<p>
&lt;img src="/images/zhihu-bearer-token.png&rdquo; /&gt;
</p>

</div>

<p>
<i>z_c0</i> 包含的信息，是在登陆完成时种下的，所以从登陆完成返回的登陆信息里，获取要设置的 <i>Cookies</i> 信息，
然后拼接出 <i>Bearer Token</i>,最后设置到 <i>Header</i> 中。
</p>

<p>
代码整理如下:
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">after_login</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    jdict = json.loads(response.body)</span><br><span class="line">    print(<span class="string">'after_login'</span>, jdict)</span><br><span class="line">    <span class="keyword">if</span> jdict[<span class="string">'r'</span>] == <span class="number">0</span>:</span><br><span class="line">	z_c0 = response.headers.getlist(<span class="string">'Set-Cookie'</span>)[<span class="number">2</span>].split(<span class="string">';'</span>)[<span class="number">0</span>].split(</span><br><span class="line">	    <span class="string">'='</span>)[<span class="number">1</span>]</span><br><span class="line">	self.headers[<span class="string">'authorization'</span>] = <span class="string">'Bearer '</span> + z_c0</span><br><span class="line">	<span class="keyword">return</span> scrapy.http.FormRequest(</span><br><span class="line">	    url=self.feedUrl,</span><br><span class="line">	    method=<span class="string">'GET'</span>,</span><br><span class="line">	    meta={<span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>]},</span><br><span class="line">	    headers=self.headers,</span><br><span class="line">	    formdata={</span><br><span class="line">		<span class="string">'action_feed'</span>: <span class="string">'True'</span>,</span><br><span class="line">		<span class="string">'limit'</span>: <span class="string">'10'</span>,</span><br><span class="line">		<span class="string">'action'</span>: <span class="string">'down'</span>,</span><br><span class="line">		<span class="string">'after_id'</span>: str(self.curFeedId),</span><br><span class="line">		<span class="string">'desktop'</span>: <span class="string">'true'</span></span><br><span class="line">	    },</span><br><span class="line">	    callback=self.parse)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">	print(jdict[<span class="string">'error'</span>])</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-5ddbded1-15a4-438e-8121-384fed58614c" name="ID-5ddbded1-15a4-438e-8121-384fed58614c"></a><span class="section-number-2">4</span> 获取数据</h2>
<div class="outline-text-2" id="text-4">
<p>
上述步骤后，数据获取就水到渠成了，为了检测成功与否， 把返回信息写到文件中,而且只获取前五十个,代码如下：
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">feedUrl = <span class="string">'https://www.zhihu.com/api/v3/feed/topstory'</span></span><br><span class="line">nextFeedUrl = <span class="string">''</span></span><br><span class="line">curFeedId = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'zhihu.json'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> fd:</span><br><span class="line">	fd.write(response.body)</span><br><span class="line">    jdict = json.loads(response.body)</span><br><span class="line">    jdatas = jdict[<span class="string">'data'</span>]</span><br><span class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> jdatas:</span><br><span class="line">	entry[<span class="string">'pid'</span>] = entry[<span class="string">'id'</span>]</span><br><span class="line">	<span class="keyword">yield</span> entry</span><br><span class="line"></span><br><span class="line">    jpaging = jdict[<span class="string">'paging'</span>]</span><br><span class="line">    self.curFeedId += len(jdatas)</span><br><span class="line">    <span class="keyword">if</span> jpaging[<span class="string">'is_end'</span>] == <span class="keyword">False</span> <span class="keyword">and</span> self.curFeedId &lt; <span class="number">50</span>:</span><br><span class="line">	self.nextFeedUrl = jpaging[<span class="string">'next'</span>]</span><br><span class="line">	<span class="keyword">yield</span> self.next_request(response)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_request</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> scrapy.http.FormRequest(</span><br><span class="line">	url=self.nextFeedUrl,</span><br><span class="line">	method=<span class="string">'GET'</span>,</span><br><span class="line">	meta={<span class="string">'cookiejar'</span>: response.meta[<span class="string">'cookiejar'</span>]},</span><br><span class="line">	headers=self.headers,</span><br><span class="line">	callback=self.parse)</span><br></pre></td></tr></table></figure>
</div>

<p>
获取的数据，采用json格式， 如下所示:
</p>
<div class="export">
<p>
&lt;img src="/images/zhihu-feeds.png&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-34cdf8e5-6b5a-42e2-b724-41daa0f66178" name="ID-34cdf8e5-6b5a-42e2-b724-41daa0f66178"></a><span class="section-number-2">5</span> 写在最后</h2>
<div class="outline-text-2" id="text-5">
<p>
知乎的数据，只有登录完成之后，才可有效的获取，所以模拟登陆是无法忽略不管的。
所谓的模拟登陆，只是在scrapy中尽量的模拟在浏览器中的交互过程，使服务端无感抓包过程。
请求中附加有效的 <i>Cookies</i> 和 <i>Headers</i> 头信息，可有效的迷惑服务端，
同时在交互的过程中，获取后续请求必要信息和认证信息，使得整个流程能不断先前。
</p>

<p>
若是你遇到什么问题，尽量提出来，欢迎一起来讨论解决。
源码放在了github上， 欢迎<a href="https://github.com/brantou/crawler/blob/master/jobs/jobs/spiders/zhihu.py" rel="external nofollow noopener noreferrer" target="_blank">前往查看</a>。
若是帮你解决了问题，或者给了你启发，不要吝啬给<a href="https://github.com/brantou/crawler" rel="external nofollow noopener noreferrer" target="_blank">我加一星</a>。
</p>
</div>
</div>

Last Updated 2017-08-23 Wed 15:21.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/07/16/leetcode-tree/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/16/leetcode-tree/" itemprop="url">Leetcode-tree</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-16T00:00:00+08:00">
                2017-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/16/leetcode-tree/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/07/16/leetcode-tree/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
<i>LeetCode</i> 编程训练的积累，目前在努力做题中，日后整理！
</p>
<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-a529c358-9cbf-45b3-979e-e5994db34c19" name="ID-a529c358-9cbf-45b3-979e-e5994db34c19"></a><span class="section-number-2">1</span> binary tree traversal</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><a id="ID-a750e3ce-df1d-48c3-b1f6-4fcda811b00e" name="ID-a750e3ce-df1d-48c3-b1f6-4fcda811b00e"></a><span class="section-number-3">1.1</span> level order</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> levelOrder(root *TreeNode) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lo_arr := [][]<span class="typename">int</span>{</span><br><span class="line">    []<span class="typename">int</span>{root.Val},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  llo_arr := levelOrder(root.Left)</span><br><span class="line">  rlo_arr := levelOrder(root.Right)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(llo_arr) &gt; <span class="number">0</span> || <span class="built_in">len</span>(rlo_arr) &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">var</span> index <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> index &lt; <span class="built_in">len</span>(llo_arr) &amp;&amp; index &lt; <span class="built_in">len</span>(rlo_arr) {</span><br><span class="line">	lo_arr = <span class="built_in">append</span>(lo_arr, <span class="built_in">append</span>(llo_arr[index], rlo_arr[index]...))</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(llo_arr) &gt; index {</span><br><span class="line">      lo_arr = <span class="built_in">append</span>(lo_arr, llo_arr[index:]...)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(rlo_arr) &gt; index {</span><br><span class="line">      lo_arr = <span class="built_in">append</span>(lo_arr, rlo_arr[index:]...)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> lo_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(levelOrder(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(levelOrder(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><a id="ID-5036a584-d27e-4010-8fb1-ab4255c45b6d" name="ID-5036a584-d27e-4010-8fb1-ab4255c45b6d"></a><span class="section-number-3">1.2</span> level order bottom</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;bt-level-order&gt;&gt;</span><br><span class="line"><span class="keyword">func</span> levelOrderBottom(root *TreeNode) [][]<span class="typename">int</span> {</span><br><span class="line">  lo_arr := levelOrder(root)</span><br><span class="line">  lob_arr := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lo_arr {</span><br><span class="line">    lob_arr = <span class="built_in">append</span>([][]<span class="typename">int</span>{lo_arr[index]}, lob_arr...)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> lob_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(levelOrderBottom(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(levelOrderBottom(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><a id="ID-09552328-e92c-4a90-be88-6d284ed8aa4d" name="ID-09552328-e92c-4a90-be88-6d284ed8aa4d"></a><span class="section-number-3">1.3</span> zigzag level order</h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  &lt;&lt;bt-level-order&gt;&gt;</span><br><span class="line">  <span class="keyword">func</span> zigzagLevelOrder(root *TreeNode) [][]<span class="typename">int</span> {</span><br><span class="line">  lo_arr := levelOrder(root)</span><br><span class="line">  zlo_arr := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lo_arr {</span><br><span class="line">    lo := lo_arr[index]</span><br><span class="line">    <span class="keyword">if</span> index % <span class="number">2</span> == <span class="number">1</span> {</span><br><span class="line">      zlo := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lo {</span><br><span class="line">	zlo = <span class="built_in">append</span>([]<span class="typename">int</span>{lo[index]}, zlo...)</span><br><span class="line">      }</span><br><span class="line">      zlo_arr = <span class="built_in">append</span>(zlo_arr, zlo)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      zlo_arr = <span class="built_in">append</span>(zlo_arr, lo)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> zlo_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(zigzagLevelOrder(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(zigzagLevelOrder(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><a id="ID-156ef6af-9e00-464f-9ef5-758b1bde0aa4" name="ID-156ef6af-9e00-464f-9ef5-758b1bde0aa4"></a><span class="section-number-3">1.4</span> inOrder</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> inorderTraversal(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">append</span>(</span><br><span class="line">    <span class="built_in">append</span>(inorderTraversal(root.Left), root.Val),</span><br><span class="line">    inorderTraversal(root.Right)...)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(inorderTraversal(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(inorderTraversal(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><a id="ID-035f3c1c-8087-4a4c-953c-c7bf5fdc62e2" name="ID-035f3c1c-8087-4a4c-953c-c7bf5fdc62e2"></a><span class="section-number-3">1.5</span> preOrder</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> preorderTraversal(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">append</span>(</span><br><span class="line">    <span class="built_in">append</span>([]<span class="typename">int</span>{root.Val}, preorderTraversal(root.Left)...),</span><br><span class="line">    preorderTraversal(root.Right)...)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(preorderTraversal(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(preorderTraversal(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><a id="ID-7b516e36-8168-4a8e-8a55-b9bba24f6c9e" name="ID-7b516e36-8168-4a8e-8a55-b9bba24f6c9e"></a><span class="section-number-3">1.6</span> postOrder</h3>
<div class="outline-text-3" id="text-1-6">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> postorderTraversal(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">append</span>(</span><br><span class="line">    <span class="built_in">append</span>(postorderTraversal(root.Left), postorderTraversal(root.Right)...),</span><br><span class="line">    root.Val)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(postorderTraversal(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(postorderTraversal(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-e24cd95c-ddbe-47ce-85b6-d986276eb81e" name="ID-e24cd95c-ddbe-47ce-85b6-d986276eb81e"></a><span class="section-number-2">2</span> binary tree</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeLinkNode {</span><br><span class="line"> <span class="keyword">int</span> val;</span><br><span class="line"> TreeLinkNode *left, *right, *next;</span><br><span class="line"> TreeLinkNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>), next(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeNode {</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><a id="ID-cc2b7bb4-fa77-4385-bd5a-9055059d071b" name="ID-cc2b7bb4-fa77-4385-bd5a-9055059d071b"></a><span class="section-number-3">2.1</span> max depth</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> max(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maxDepth(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> + max(maxDepth(root.Left), maxDepth(root.Right))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(maxDepth(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(maxDepth(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><a id="ID-48f53fed-a3b6-4299-a156-ce09cdadbdf4" name="ID-48f53fed-a3b6-4299-a156-ce09cdadbdf4"></a><span class="section-number-3">2.2</span> paths</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> binaryTreePaths(root *TreeNode) []<span class="typename">string</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">string</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  str := fmt.Sprintf(<span class="string">"%d"</span>, root.Val)</span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">string</span>{str}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  paths := <span class="built_in">append</span>(</span><br><span class="line">    binaryTreePaths(root.Left),</span><br><span class="line">    binaryTreePaths(root.Right)...,</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">for</span> index, path := <span class="keyword">range</span> paths {</span><br><span class="line">    paths[index] = str + <span class="string">"-&gt;"</span> + path</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> paths</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(binaryTreePaths(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(binaryTreePaths(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><a id="ID-78a7c4b2-2407-4158-9b40-8e827347d923" name="ID-78a7c4b2-2407-4158-9b40-8e827347d923"></a><span class="section-number-3">2.3</span> isBalanced</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;bt-max-depth&gt;&gt;</span><br><span class="line"><span class="keyword">func</span> isBalanced(root *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ldepth := maxDepth(root.Left)</span><br><span class="line">  rdepth := maxDepth(root.Right)</span><br><span class="line">  ddepth := ldepth - rdepth</span><br><span class="line">  <span class="keyword">if</span> ddepth &gt; <span class="number">1</span> || ddepth &lt; -<span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isBalanced(root.Left) &amp;&amp; isBalanced(root.Right)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(isBalanced(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  fmt.Println(isBalanced(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><a id="ID-391d9e05-93ea-444f-b1b6-9a36da393c97" name="ID-391d9e05-93ea-444f-b1b6-9a36da393c97"></a><span class="section-number-3">2.4</span> invert</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> invertTree(root *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  root.Left, root.Right = invertTree(root.Right), invertTree(root.Left)</span><br><span class="line">  <span class="keyword">return</span> root</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(invertTree(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(invertTree(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><a id="ID-13bd442d-c29e-432b-af05-c5b4909fa259" name="ID-13bd442d-c29e-432b-af05-c5b4909fa259"></a><span class="section-number-3">2.5</span> tilt</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sumTree(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root.Val + sumTree(root.Left) + sumTree(root.Right)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> abs(num <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> num &lt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> -num</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> findTilt(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> abs(sumTree(root.Left)-sumTree(root.Right)) +</span><br><span class="line">    findTilt(root.Left) + findTilt(root.Right)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(findTilt(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(findTilt(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><a id="ID-ba131b54-0ecf-45d6-8716-fed0c90a48cf" name="ID-ba131b54-0ecf-45d6-8716-fed0c90a48cf"></a><span class="section-number-3">2.6</span> construct string</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> tree2str(t *TreeNode) <span class="typename">string</span> {</span><br><span class="line">  <span class="keyword">if</span> t == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  str := fmt.Sprintf(<span class="string">"%d"</span>, t.Val)</span><br><span class="line">  <span class="keyword">if</span> t.Left == <span class="constant">nil</span> &amp;&amp; t.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> t.Left != <span class="constant">nil</span> {</span><br><span class="line">    str += fmt.Sprintf(<span class="string">"(%s)"</span>, tree2str(t.Left))</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    str += <span class="string">"()"</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> t.Right != <span class="constant">nil</span> {</span><br><span class="line">    str += fmt.Sprintf(<span class="string">"(%s)"</span>, tree2str(t.Right))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><a id="ID-6dce1c17-7937-4d95-a85a-328fba766396" name="ID-6dce1c17-7937-4d95-a85a-328fba766396"></a><span class="section-number-3">2.7</span> symmetric</h3>
<div class="outline-text-3" id="text-2-7">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isSymmetric(root *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isMirror(root.Left, root.Right)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isMirror(lr *TreeNode, rr *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> lr == <span class="constant">nil</span> &amp;&amp; rr == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> lr == <span class="constant">nil</span> || rr == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> lr.Val != rr.Val {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isMirror(lr.Left, rr.Right) &amp;&amp; isMirror(lr.Right, rr.Left)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(isSymmetric(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(isSymmetric(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><a id="ID-52dde05d-0a6b-47d0-8061-a406c8b380e0" name="ID-52dde05d-0a6b-47d0-8061-a406c8b380e0"></a><span class="section-number-3">2.8</span> subtree</h3>
<div class="outline-text-3" id="text-2-8">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isSubtree(s *TreeNode, t *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> t == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> s == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> s.Val == t.Val {</span><br><span class="line">    <span class="keyword">return</span> isSame(s, t) || isSubtree(s.Left, t) || isSubtree(s.Right, t)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> isSubtree(s.Left, t) || isSubtree(s.Right, t)</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isSame(s *TreeNode, t *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> s == <span class="constant">nil</span> &amp;&amp; t == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> s == <span class="constant">nil</span> || t == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> s.Val != t.Val {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isSame(s.Left, t.Left) &amp;&amp; isSame(s.Right, t.Right)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  s := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">4</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">5</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">4</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(isSubtree(s, t))</span><br><span class="line">  s.Left.Right = &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">0</span>,</span><br><span class="line">  }</span><br><span class="line">  fmt.Println(isSubtree(s, t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9"><a id="ID-446782d4-2ee6-40f9-94b2-368baddc5fc3" name="ID-446782d4-2ee6-40f9-94b2-368baddc5fc3"></a><span class="section-number-3">2.9</span> diameter</h3>
<div class="outline-text-3" id="text-2-9">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> diameterOfBinaryTree(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> max(<span class="number">1</span>+maxSide(root.Left), diameterOfBinaryTree(root.Left))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> max(<span class="number">1</span>+maxSide(root.Right), diameterOfBinaryTree(root.Right))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max(</span><br><span class="line">    max(</span><br><span class="line">      (<span class="number">2</span>+maxSide(root.Left)+maxSide(root.Right)),</span><br><span class="line">      diameterOfBinaryTree(root.Left),</span><br><span class="line">    ), diameterOfBinaryTree(root.Right))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maxSide(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> + max(maxSide(root.Left), maxSide(root.Right))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> max(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  s := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">4</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">5</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">4</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(diameterOfBinaryTree(s))</span><br><span class="line">  fmt.Println(diameterOfBinaryTree(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10"><a id="ID-cd5c03de-ea50-466b-b9ef-4d33ea6c1199" name="ID-cd5c03de-ea50-466b-b9ef-4d33ea6c1199"></a><span class="section-number-3">2.10</span> count complete tree nodes</h3>
<div class="outline-text-3" id="text-2-10">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeNode {</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">countNodes</span><span class="params">(TreeNode* root)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ldepth = <span class="keyword">this</span>-&gt;getLeftDepth(root);</span><br><span class="line">    <span class="keyword">int</span> rdepth = <span class="keyword">this</span>-&gt;getRightDepth(root);</span><br><span class="line">    <span class="keyword">if</span> (ldepth == rdepth) {</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>-&gt;<span class="built_in">pow</span>(<span class="number">2</span>,ldepth) -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> countNodes(root-&gt;left) + countNodes(root-&gt;right)+<span class="number">1</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getLeftDepth</span><span class="params">(TreeNode *root)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+getLeftDepth(root-&gt;left);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">getRightDepth</span><span class="params">(TreeNode *root)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+getRightDepth(root-&gt;right);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> base, <span class="keyword">int</span> <span class="built_in">exp</span>)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">exp</span>&gt;<span class="number">0</span>) {</span><br><span class="line">      p = p*base;</span><br><span class="line">      <span class="built_in">exp</span> = <span class="built_in">exp</span>- <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeNode* p = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">  Solution s;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s.countNodes(p);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11"><a id="ID-accf2ad8-88b8-4b22-9d5d-f21d703e30f1" name="ID-accf2ad8-88b8-4b22-9d5d-f21d703e30f1"></a><span class="section-number-3">2.11</span> implement trie</h3>
<div class="outline-text-3" id="text-2-11">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Trie <span class="keyword">struct</span> {</span><br><span class="line">  is_end <span class="typename">int</span></span><br><span class="line">  next   <span class="keyword">map</span>[<span class="typename">byte</span>]*Trie</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line"><span class="keyword">func</span> Constructor() Trie {</span><br><span class="line">  <span class="keyword">var</span> trie Trie</span><br><span class="line">  trie.next = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">byte</span>]*Trie)</span><br><span class="line">  <span class="keyword">return</span> trie</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Inserts a word into the trie. */</span></span><br><span class="line"><span class="keyword">func</span> (this *Trie) Insert(word <span class="typename">string</span>) {</span><br><span class="line">  byte_arr := []<span class="typename">byte</span>(word)</span><br><span class="line">  this.insert(byte_arr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (this *Trie) insert(byte_arr []<span class="typename">byte</span>) {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> next_trie, ok := this.next[byte_arr[<span class="number">0</span>]]; ok {</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) &gt; <span class="number">1</span> {</span><br><span class="line">      next_trie.insert(byte_arr[<span class="number">1</span>:])</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next_trie.is_end = <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    trie := Constructor()</span><br><span class="line">    next_trie := &amp;trie</span><br><span class="line">    this.next[byte_arr[<span class="number">0</span>]] = next_trie</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) &gt; <span class="number">1</span> {</span><br><span class="line">      next_trie.insert(byte_arr[<span class="number">1</span>:])</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next_trie.is_end = <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Returns if the word is in the trie. */</span></span><br><span class="line"><span class="keyword">func</span> (this *Trie) Search(word <span class="typename">string</span>) <span class="typename">bool</span> {</span><br><span class="line">  byte_arr := []<span class="typename">byte</span>(word)</span><br><span class="line">  <span class="keyword">return</span> this.search(byte_arr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (this *Trie) search(byte_arr []<span class="typename">byte</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(this.next) == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> next_trie, ok := this.next[byte_arr[<span class="number">0</span>]]; ok {</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) == <span class="number">1</span> &amp;&amp; next_trie.is_end == <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> next_trie.search(byte_arr[<span class="number">1</span>:])</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Returns if there is any word in the trie that starts with the given prefix. */</span></span><br><span class="line"><span class="keyword">func</span> (this *Trie) StartsWith(prefix <span class="typename">string</span>) <span class="typename">bool</span> {</span><br><span class="line">  byte_arr := []<span class="typename">byte</span>(prefix)</span><br><span class="line">  <span class="keyword">return</span> this.startsWith(byte_arr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (this *Trie) startsWith(byte_arr []<span class="typename">byte</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(byte_arr) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> next_trie, ok := this.next[byte_arr[<span class="number">0</span>]]; ok {</span><br><span class="line">    <span class="keyword">return</span> next_trie.startsWith(byte_arr[<span class="number">1</span>:])</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Your Trie object will be instantiated and called as such:</span><br><span class="line"> * obj := Constructor();</span><br><span class="line"> * obj.Insert(word);</span><br><span class="line"> * param_2 := obj.Search(word);</span><br><span class="line"> * param_3 := obj.StartsWith(prefix);</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  trie := Constructor()</span><br><span class="line">  trie.Insert(<span class="string">"hello"</span>)</span><br><span class="line">  fmt.Println(trie.Search(<span class="string">"hello"</span>))</span><br><span class="line">  fmt.Println(trie.StartsWith(<span class="string">"hello"</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-12" class="outline-3">
<h3 id="sec-2-12"><a id="ID-23c192e6-e8d0-4082-986a-e5fd82addfe8" name="ID-23c192e6-e8d0-4082-986a-e5fd82addfe8"></a><span class="section-number-3">2.12</span> merge two binary tree</h3>
<div class="outline-text-3" id="text-2-12">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> mergeTrees(t1 *TreeNode, t2 *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> t1 == <span class="constant">nil</span> &amp;&amp; t2 == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> t2 == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val:   t1.Val,</span><br><span class="line">      Left:  mergeTrees(t1.Left, <span class="constant">nil</span>),</span><br><span class="line">      Right: mergeTrees(t1.Right, <span class="constant">nil</span>),</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> t1 == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val:   t2.Val,</span><br><span class="line">      Left:  mergeTrees(<span class="constant">nil</span>, t2.Left),</span><br><span class="line">      Right: mergeTrees(<span class="constant">nil</span>, t2.Right),</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   t1.Val + t2.Val,</span><br><span class="line">    Left:  mergeTrees(t1.Left, t2.Left),</span><br><span class="line">    Right: mergeTrees(t1.Right, t2.Right),</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t1 := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  t2 := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">2</span>,</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(tree2str(mergeTrees(t1, t2)))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-13" class="outline-3">
<h3 id="sec-2-13"><a id="ID-b65fd60c-7b25-480f-a3b6-7c016cd3129e" name="ID-b65fd60c-7b25-480f-a3b6-7c016cd3129e"></a><span class="section-number-3">2.13</span> flatten bt to linked list</h3>
<div class="outline-text-3" id="text-2-13">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> flatten(root *TreeNode) {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  flatten(root.Left)</span><br><span class="line">  flatten(root.Right)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lr_r := root.Left</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> lr_r.Right == <span class="constant">nil</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    lr_r = lr_r.Right</span><br><span class="line">  }</span><br><span class="line">  lr_r.Right = root.Right</span><br><span class="line"></span><br><span class="line">  root.Right = root.Left</span><br><span class="line">  root.Left = <span class="constant">nil</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">5</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(tree2str(flatten(t)))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-14" class="outline-3">
<h3 id="sec-2-14"><a id="ID-77941cf3-c164-4ca2-8b9b-82e202bd7efe" name="ID-77941cf3-c164-4ca2-8b9b-82e202bd7efe"></a><span class="section-number-3">2.14</span> sum of left leaves</h3>
<div class="outline-text-3" id="text-2-14">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> sumOfLeftLeaves(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left != <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">if</span> isLeave(root.Left) {</span><br><span class="line">      <span class="keyword">return</span> root.Left.Val + sumOfLeftLeaves(root.Right)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> sumOfLeftLeaves(root.Left) + sumOfLeftLeaves(root.Right)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> sumOfLeftLeaves(root.Right)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isLeave(node *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">return</span> node.Left == <span class="constant">nil</span> &amp;&amp; node.Right == <span class="constant">nil</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">3</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">9</span>},</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">20</span>,</span><br><span class="line">      Left: &amp;TreeNode{Val: <span class="number">15</span>},</span><br><span class="line">      Right: &amp;TreeNode{Val: <span class="number">7</span>},</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(sumOfLeftLeaves(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-15" class="outline-3">
<h3 id="sec-2-15"><a id="ID-2dc7a649-b0b8-45a2-b07f-b950998d5b85" name="ID-2dc7a649-b0b8-45a2-b07f-b950998d5b85"></a><span class="section-number-3">2.15</span> find bottom left tree value</h3>
<div class="outline-text-3" id="text-2-15">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findBottomLeftValue(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lnode_arr := []*TreeNode{root}</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    n_lnode_arr := <span class="built_in">make</span>([]*TreeNode, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lnode_arr {</span><br><span class="line">      node := lnode_arr[index]</span><br><span class="line">      <span class="keyword">if</span> node.Left != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Left)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> node.Right != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Right)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(n_lnode_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      lnode_arr = n_lnode_arr</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> lnode_arr[<span class="number">0</span>].Val</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">5</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">10</span>},</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(findBottomLeftValue(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-16" class="outline-3">
<h3 id="sec-2-16"><a id="ID-d4457233-b607-4100-8ace-2fddd2ec6470" name="ID-d4457233-b607-4100-8ace-2fddd2ec6470"></a><span class="section-number-3">2.16</span> right side view</h3>
<div class="outline-text-3" id="text-2-16">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> rightSideView(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lnode_arr := []*TreeNode{root}</span><br><span class="line">  rsv_arr := []<span class="typename">int</span>{root.Val}</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    n_lnode_arr := <span class="built_in">make</span>([]*TreeNode, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lnode_arr {</span><br><span class="line">      node := lnode_arr[index]</span><br><span class="line">      <span class="keyword">if</span> node.Left != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Left)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> node.Right != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Right)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(n_lnode_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      rsv_arr = <span class="built_in">append</span>(rsv_arr, n_lnode_arr[<span class="built_in">len</span>(n_lnode_arr)-<span class="number">1</span>].Val)</span><br><span class="line">      lnode_arr = n_lnode_arr</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> rsv_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">5</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(rightSideView(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-17" class="outline-3">
<h3 id="sec-2-17"><a id="ID-70ebfc01-fe3a-458a-a0eb-c5c281bef831" name="ID-70ebfc01-fe3a-458a-a0eb-c5c281bef831"></a><span class="section-number-3">2.17</span> find largest value in each tree row</h3>
<div class="outline-text-3" id="text-2-17">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> largestValues(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lnode_arr := []*TreeNode{root}</span><br><span class="line">  rmax_arr := []<span class="typename">int</span>{root.Val}</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    n_lnode_arr := <span class="built_in">make</span>([]*TreeNode, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lnode_arr {</span><br><span class="line">      node := lnode_arr[index]</span><br><span class="line">      <span class="keyword">if</span> node.Left != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Left)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> node.Right != <span class="constant">nil</span> {</span><br><span class="line">	n_lnode_arr = <span class="built_in">append</span>(n_lnode_arr, node.Right)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(n_lnode_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      rmax_val := n_lnode_arr[<span class="number">0</span>].Val</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> n_lnode_arr {</span><br><span class="line">	node := n_lnode_arr[index]</span><br><span class="line">	<span class="keyword">if</span> node.Val &gt; rmax_val {</span><br><span class="line">	  rmax_val = node.Val</span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      lnode_arr = n_lnode_arr</span><br><span class="line">      rmax_arr = <span class="built_in">append</span>(rmax_arr, rmax_val)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> rmax_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">5</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(largestValues(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-18" class="outline-3">
<h3 id="sec-2-18"><a id="ID-a978c2c9-373f-416c-89d1-0fa0ff5168a0" name="ID-a978c2c9-373f-416c-89d1-0fa0ff5168a0"></a><span class="section-number-3">2.18</span> most frequent subtree sum</h3>
<div class="outline-text-3" id="text-2-18">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findFrequentTreeSum(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  sum_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>)</span><br><span class="line">  collectTreeSum(root, sum_M)</span><br><span class="line">  <span class="keyword">var</span> max_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> _, count := <span class="keyword">range</span> sum_M {</span><br><span class="line">    <span class="keyword">if</span> count &gt; max_count {</span><br><span class="line">      max_count = count</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ft_sum_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> sum, count := <span class="keyword">range</span> sum_M {</span><br><span class="line">    <span class="keyword">if</span> count == max_count {</span><br><span class="line">      ft_sum_arr = <span class="built_in">append</span>(ft_sum_arr, sum)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ft_sum_arr</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> collectTreeSum(root *TreeNode, sum_M <span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  sum := collectTreeSum(root.Left, sum_M) + root.Val + collectTreeSum(root.Right, sum_M)</span><br><span class="line">  sum_M[sum] = sum_M[sum] + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">5</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(findFrequentTreeSum(t))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-19" class="outline-3">
<h3 id="sec-2-19"><a id="ID-c41da033-f55b-4491-acf6-c0cb33be3fea" name="ID-c41da033-f55b-4491-acf6-c0cb33be3fea"></a><span class="section-number-3">2.19</span> construct binary tree from preorder and inorder traversal</h3>
<div class="outline-text-3" id="text-2-19">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> buildTree(preorder []<span class="typename">int</span>, inorder []<span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(preorder) == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(preorder) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val: preorder[<span class="number">0</span>],</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  rio_index := find(inorder, preorder[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   preorder[<span class="number">0</span>],</span><br><span class="line">    Left:  buildTree(preorder[<span class="number">1</span>:rio_index+<span class="number">1</span>], inorder[<span class="number">0</span>:rio_index]),</span><br><span class="line">    Right: buildTree(preorder[rio_index+<span class="number">1</span>:], inorder[rio_index+<span class="number">1</span>:]),</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> find(a []<span class="typename">int</span>, x <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> a {</span><br><span class="line">    <span class="keyword">if</span> a[index] == x {</span><br><span class="line">      <span class="keyword">return</span> index</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>


<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(tree2str(buildTree([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>}, []<span class="typename">int</span>{<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>})))</span><br><span class="line">  fmt.Println(tree2str(buildTree([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>}, []<span class="typename">int</span>{<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>})))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-20" class="outline-3">
<h3 id="sec-2-20"><a id="ID-a607f754-361d-4b9f-9618-94b50d36394b" name="ID-a607f754-361d-4b9f-9618-94b50d36394b"></a><span class="section-number-3">2.20</span> construct binary tree from inorder and postorder traversal</h3>
<div class="outline-text-3" id="text-2-20">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> buildTree(inorder []<span class="typename">int</span>, postorder []<span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(inorder) == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(inorder) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{Val: inorder[<span class="number">0</span>]}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  rio_index := find(inorder, postorder[<span class="built_in">len</span>(postorder)-<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   postorder[<span class="built_in">len</span>(postorder)-<span class="number">1</span>],</span><br><span class="line">    Left:  buildTree(inorder[<span class="number">0</span>:rio_index], postorder[<span class="number">0</span>:rio_index]),</span><br><span class="line">    Right: buildTree(inorder[rio_index+<span class="number">1</span>:], postorder[rio_index:(<span class="built_in">len</span>(postorder)-<span class="number">1</span>)]),</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> find(a []<span class="typename">int</span>, x <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> a {</span><br><span class="line">    <span class="keyword">if</span> a[index] == x {</span><br><span class="line">      <span class="keyword">return</span> index</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(tree2str(buildTree([]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>}, []<span class="typename">int</span>{<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>})))</span><br><span class="line">  fmt.Println(tree2str(buildTree([]<span class="typename">int</span>{<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>}, []<span class="typename">int</span>{<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>})))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-21" class="outline-3">
<h3 id="sec-2-21"><a id="ID-0133ef0a-4b13-4ced-a7e4-c245996fb63f" name="ID-0133ef0a-4b13-4ced-a7e4-c245996fb63f"></a><span class="section-number-3">2.21</span> populating next right pointers in each node</h3>
<div class="outline-text-3" id="text-2-21">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeLinkNode {</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  TreeLinkNode *left, *right, *next;</span><br><span class="line">  TreeLinkNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>), next(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> ConnectObj {</span><br><span class="line">  TreeLinkNode *left_most;</span><br><span class="line">  TreeLinkNode *right_most;</span><br><span class="line">  ConnectObj() : left_most(<span class="literal">NULL</span>), right_most(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt;</span><br><span class="line">mergeConnect(</span><br><span class="line">	     <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; lc_dq,</span><br><span class="line">	     <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; rc_dq)</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt;::iterator it = lc_dq.begin(); it != lc_dq.end(); ++it) {</span><br><span class="line">    <span class="keyword">if</span> (it-&gt;right_most == <span class="literal">NULL</span>) {</span><br><span class="line">      it-&gt;right_most = it-&gt;left_most;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt;::iterator it = rc_dq.begin(); it != rc_dq.end(); ++it) {</span><br><span class="line">    <span class="keyword">if</span> (it-&gt;left_most == <span class="literal">NULL</span>) {</span><br><span class="line">      it-&gt;left_most = it-&gt;right_most;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> min_size = lc_dq.size() &lt; rc_dq.size() ? lc_dq.size() : rc_dq.size();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> index=<span class="number">0</span>; index &lt; min_size; index+=<span class="number">1</span>) {</span><br><span class="line">    <span class="keyword">if</span> (lc_dq[index].right_most != <span class="literal">NULL</span> &amp;&amp; rc_dq[index].left_most != <span class="literal">NULL</span>){</span><br><span class="line">      lc_dq[index].right_most-&gt;next = rc_dq[index].left_most;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    lc_dq[index].right_most = rc_dq[index].right_most;</span><br><span class="line">    rc_dq[index].left_most = lc_dq[index].left_most;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> lc_dq.size() &gt; rc_dq.size() ? lc_dq : rc_dq;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">connect</span><span class="params">(TreeLinkNode *root)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>-&gt;connectHelper(root);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; connectHelper(TreeLinkNode *root) {</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; conn_dq;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> conn_dq;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    ConnectObj rc_node;</span><br><span class="line">    rc_node.left_most = root;</span><br><span class="line">    rc_node.right_most = root;</span><br><span class="line">    <span class="keyword">if</span> ((root-&gt;left == <span class="literal">NULL</span>) &amp;&amp; (root-&gt;right == <span class="literal">NULL</span>)) {</span><br><span class="line">      conn_dq.push_back(rc_node);</span><br><span class="line">      <span class="keyword">return</span> conn_dq;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; lc_dq = connectHelper(root-&gt;left);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; rc_dq = connectHelper(root-&gt;right);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">deque</span>&lt;ConnectObj&gt; merge_dq = mergeConnect(lc_dq, rc_dq);</span><br><span class="line">    merge_dq.push_front(rc_node);</span><br><span class="line">    <span class="keyword">return</span> merge_dq;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeLinkNode* p = <span class="keyword">new</span> TreeLinkNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeLinkNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;left-&gt;left = <span class="keyword">new</span> TreeLinkNode(<span class="number">1</span>);</span><br><span class="line">  p-&gt;left-&gt;left-&gt;left = <span class="keyword">new</span> TreeLinkNode(<span class="number">1</span>);</span><br><span class="line">  p-&gt;left-&gt;right = <span class="keyword">new</span> TreeLinkNode(<span class="number">2</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeLinkNode(<span class="number">7</span>);</span><br><span class="line">  p-&gt;right-&gt;right = <span class="keyword">new</span> TreeLinkNode(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">  Solution s;</span><br><span class="line">  s.connect(p);</span><br><span class="line">  TreeLinkNode *left = p;</span><br><span class="line">  <span class="keyword">while</span> (left != <span class="literal">NULL</span>) {</span><br><span class="line">      TreeLinkNode *head = left;</span><br><span class="line">      <span class="keyword">while</span> (head !=<span class="literal">NULL</span>){</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; head-&gt;val &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">	head = head-&gt;next;</span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">      left = left-&gt;left;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-22" class="outline-3">
<h3 id="sec-2-22"><a id="ID-8c454d5c-9e2e-4bb4-942b-1342e79055ad" name="ID-8c454d5c-9e2e-4bb4-942b-1342e79055ad"></a><span class="section-number-3">2.22</span> add one row to tree</h3>
<div class="outline-text-3" id="text-2-22">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> addOneRow(root *TreeNode, v <span class="typename">int</span>, d <span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> d == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val:  v,</span><br><span class="line">      Left: root,</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> || d &lt; <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  addOneRowHelper(root, v, d)</span><br><span class="line">  <span class="keyword">return</span> root</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> addOneRowHelper(root *TreeNode, v <span class="typename">int</span>, d <span class="typename">int</span>) {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> d == <span class="number">2</span> {</span><br><span class="line">    root.Left = &amp;TreeNode{</span><br><span class="line">      Val:  v,</span><br><span class="line">      Left: root.Left,</span><br><span class="line">    }</span><br><span class="line">    root.Right = &amp;TreeNode{</span><br><span class="line">      Val:   v,</span><br><span class="line">      Right: root.Right,</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  addOneRowHelper(root.Left, v, d-<span class="number">1</span>)</span><br><span class="line">  addOneRowHelper(root.Right, v, d-<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">3</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">4</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(tree2str(addOneRow(root, <span class="number">2</span>, <span class="number">1</span>)))</span><br><span class="line">  fmt.Println(tree2str(addOneRow(root, <span class="number">2</span>, <span class="number">2</span>)))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-23" class="outline-3">
<h3 id="sec-2-23"><a id="ID-c89996d5-e334-4ca4-8ffe-bef6711710fa" name="ID-c89996d5-e334-4ca4-8ffe-bef6711710fa"></a><span class="section-number-3">2.23</span> lowest common ancestor of a bt</h3>
<div class="outline-text-3" id="text-2-23">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span> || p == root || q == root) {</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    TreeNode *left = lowestCommonAncestor(root-&gt;left, p, q);</span><br><span class="line">    TreeNode *right = lowestCommonAncestor(root-&gt;right, p, q);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left != <span class="literal">NULL</span> &amp;&amp; right != <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left != <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> left;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (right != <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> right;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeNode* p = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;left-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">  p-&gt;left-&gt;left-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">0</span>);</span><br><span class="line">  p-&gt;left-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line">  p-&gt;right-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">  Solution s;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s.lowestCommonAncestor(p, p-&gt;left-&gt;left, p-&gt;right-&gt;right)-&gt;val;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s.lowestCommonAncestor(p, p-&gt;left-&gt;left, p-&gt;left-&gt;right)-&gt;val;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2-24" class="outline-3">
<h3 id="sec-2-24"><a id="ID-ac4a74b1-6ba3-4527-a89c-6ba44b08d46c" name="ID-ac4a74b1-6ba3-4527-a89c-6ba44b08d46c"></a><span class="section-number-3">2.24</span> serialize and deserialize bt</h3>
<div class="outline-text-3" id="text-2-24">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;bt-node-def-cpp&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find_bracket_end</span><span class="params">(<span class="built_in">string</span> str, <span class="keyword">int</span> b_start)</span> </span>{</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt;  b_stack;</span><br><span class="line">  <span class="keyword">int</span> b_end=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> index = b_start; index &lt; str.size(); index += <span class="number">1</span>) {</span><br><span class="line">    <span class="keyword">char</span> c = str[index];</span><br><span class="line">    <span class="keyword">switch</span> (c) {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'('</span>:</span><br><span class="line">      b_stack.push(c);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">')'</span>:</span><br><span class="line">      b_stack.pop();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (b_stack.empty()==<span class="literal">true</span>) {</span><br><span class="line">      b_end = index;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> b_end;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">tree2str</span><span class="params">(TreeNode* t)</span> </span>{</span><br><span class="line">  <span class="keyword">if</span> (t == <span class="literal">NULL</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="built_in">ostringstream</span> os;</span><br><span class="line">  os &lt;&lt; t-&gt;val;</span><br><span class="line">  <span class="keyword">if</span> (t-&gt;left == <span class="literal">NULL</span> &amp;&amp; t-&gt;right == <span class="literal">NULL</span>) {</span><br><span class="line">    <span class="keyword">return</span> os.str();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (t-&gt;left != <span class="literal">NULL</span>) {</span><br><span class="line">    os &lt;&lt; <span class="string">"("</span> &lt;&lt; tree2str(t-&gt;left) &lt;&lt; <span class="string">")"</span>;</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    os &lt;&lt; <span class="string">"()"</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (t-&gt;right != <span class="literal">NULL</span>) {</span><br><span class="line">    os &lt;&lt; <span class="string">"("</span> &lt;&lt; tree2str(t-&gt;right) &lt;&lt; <span class="string">")"</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> os.str();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">TreeNode* <span class="title">str2tree</span><span class="params">(<span class="built_in">string</span> str)</span> </span>{</span><br><span class="line">  <span class="keyword">if</span> (str == <span class="string">""</span> || str  == <span class="string">"()"</span>) {</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> b_start = str.find(<span class="string">"("</span>);</span><br><span class="line">  <span class="keyword">if</span> (b_start &lt; <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">int</span> num = <span class="built_in">std</span>::atoi(str.c_str());</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(num);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="built_in">string</span> num_str = str.substr(<span class="number">0</span>, b_start);</span><br><span class="line">  <span class="keyword">int</span> num = <span class="built_in">std</span>::atoi(num_str.c_str());</span><br><span class="line">  TreeNode* root = <span class="keyword">new</span> TreeNode(num);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> b_end = find_bracket_end(str, b_start);</span><br><span class="line">  <span class="keyword">if</span> (b_end-b_start &gt; <span class="number">1</span>) {</span><br><span class="line">    root-&gt;left = str2tree(str.substr(b_start+<span class="number">1</span>, b_end));</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  b_start = b_end+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (b_start &lt; str.size() &amp;&amp; str[b_start]==<span class="string">'('</span>){</span><br><span class="line">    b_end = find_bracket_end(str, b_start);</span><br><span class="line">    <span class="keyword">if</span> (b_end-b_start &gt; <span class="number">1</span>) {</span><br><span class="line">      root-&gt;right = str2tree(str.substr(b_start+<span class="number">1</span>, b_end));</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Codec {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">// Encodes a tree to a single string.</span></span><br><span class="line">  <span class="function"><span class="built_in">string</span> <span class="title">serialize</span><span class="params">(TreeNode* root)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> tree2str(root);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line">  <span class="function">TreeNode* <span class="title">deserialize</span><span class="params">(<span class="built_in">string</span> data)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> str2tree(data);</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeNode* p = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;left-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">  p-&gt;left-&gt;left-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">  p-&gt;left-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line">  p-&gt;right-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">  Codec codec;</span><br><span class="line">  <span class="built_in">string</span> encode_str =codec.serialize(p);</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; encode_str &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"></span><br><span class="line">  TreeNode* np = codec.deserialize(encode_str);</span><br><span class="line">  encode_str = codec.serialize(np);</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; encode_str &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-25" class="outline-3">
<h3 id="sec-2-25"><a id="ID-7486a488-a366-4a21-9a8d-408e6bc2f779" name="ID-7486a488-a366-4a21-9a8d-408e6bc2f779"></a><span class="section-number-3">2.25</span> average of levels in binary tree</h3>
<div class="outline-text-3" id="text-2-25">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> averageOfLevels(root *TreeNode) []<span class="typename">float64</span> {</span><br><span class="line">  lo_arr := levelOrder(root)</span><br><span class="line">  aveOfLevels := <span class="built_in">make</span>([]<span class="typename">float64</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lo_arr {</span><br><span class="line">    lo := lo_arr[index]</span><br><span class="line">    <span class="keyword">var</span> sum <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> _, val := <span class="keyword">range</span> lo {</span><br><span class="line">      sum += val</span><br><span class="line">    }</span><br><span class="line">    ave := <span class="typename">float64</span>(sum) / <span class="typename">float64</span>(<span class="built_in">len</span>(lo))</span><br><span class="line">    aveOfLevels = <span class="built_in">append</span>(aveOfLevels, ave)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> aveOfLevels</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(averageOfLevels(root))</span><br><span class="line">  root.Left.Left = &amp;TreeNode{Val:<span class="number">4</span>}</span><br><span class="line">  root.Right.Right = &amp;TreeNode{Val:<span class="number">5</span>}</span><br><span class="line">  fmt.Println(averageOfLevels(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2-26" class="outline-3">
<h3 id="sec-2-26"><a id="ID-85be3858-4d8f-4e28-b192-05c19ea8046c" name="ID-85be3858-4d8f-4e28-b192-05c19ea8046c"></a><span class="section-number-3">2.26</span> <span class="todo TODO">TODO</span> house robber III</h3>
<div class="outline-text-3" id="text-2-26">
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-ae065479-6002-4220-ac17-8976f4422fe2" name="ID-ae065479-6002-4220-ac17-8976f4422fe2"></a><span class="section-number-2">3</span> bst</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><a id="ID-1bfec43c-1148-4a87-bb9d-461da564809b" name="ID-1bfec43c-1148-4a87-bb9d-461da564809b"></a><span class="section-number-3">3.1</span> BSTIterator</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeNode {</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  TreeNode *left;</span><br><span class="line">  TreeNode *right;</span><br><span class="line">  TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Node {</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  Node *next;</span><br><span class="line">  Node(<span class="keyword">int</span> x) : val(x), next(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">convertBST2SortedLst</span><span class="params">(TreeNode *lct,TreeNode *pn, TreeNode *rct)</span> </span>{</span><br><span class="line">  Node *lhead = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (lct != <span class="literal">NULL</span>) {</span><br><span class="line">    lhead = convertBST2SortedLst(lct-&gt;left, lct, lct-&gt;right);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  Node *pln = <span class="keyword">new</span> Node(pn-&gt;val);</span><br><span class="line"></span><br><span class="line">  Node *rhead = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (rct != <span class="literal">NULL</span>){</span><br><span class="line">    rhead = convertBST2SortedLst(rct-&gt;left, rct, rct-&gt;right);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  Node *head = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (lhead != <span class="literal">NULL</span>) {</span><br><span class="line">    pln-&gt;next = rhead;</span><br><span class="line">    head = lhead;</span><br><span class="line">    <span class="keyword">while</span> (lhead-&gt;next != <span class="literal">NULL</span>) {</span><br><span class="line">      lhead = lhead-&gt;next;</span><br><span class="line">    }</span><br><span class="line">    lhead-&gt;next = pln;</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    pln-&gt;next = rhead;</span><br><span class="line">    head = pln;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> head;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> BSTIterator {</span><br><span class="line">  Node* head;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  BSTIterator(TreeNode *root) {</span><br><span class="line">    <span class="keyword">if</span> (root != <span class="literal">NULL</span>) {</span><br><span class="line">      head = convertBST2SortedLst(root-&gt;left, root, root-&gt;right);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      head = <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** @return whether we have a next smallest number */</span></span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">hasNext</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;head != <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** @return the next smallest number */</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">next</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;head== <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Node *oldHead = head;</span><br><span class="line">    head = head-&gt;next;</span><br><span class="line">    <span class="keyword">int</span> num = oldHead-&gt;val;</span><br><span class="line">    <span class="keyword">delete</span> oldHead;</span><br><span class="line">    oldHead = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ~BSTIterator(){</span><br><span class="line">    Node *oldHead = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">NULL</span>){</span><br><span class="line">      oldHead = head;</span><br><span class="line">      head = head-&gt;next;</span><br><span class="line">      <span class="keyword">delete</span> oldHead;</span><br><span class="line">      oldHead = <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Your BSTIterator will be called like this:</span><br><span class="line"> * BSTIterator i = BSTIterator(root);</span><br><span class="line"> * while (i.hasNext()) cout &lt;&lt; i.next();</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeNode* p = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">  BSTIterator i = BSTIterator(p);</span><br><span class="line">  <span class="keyword">while</span> (i.hasNext())</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i.next();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><a id="ID-428464e7-5a33-4402-bfb3-c26263d807bd" name="ID-428464e7-5a33-4402-bfb3-c26263d807bd"></a><span class="section-number-3">3.2</span> to greater tree</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> convertBST(root *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> convertBSTHelper(root, <span class="number">0</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> convertBSTHelper(root *TreeNode, upper <span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    root.Val += upper</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Right != <span class="constant">nil</span> {</span><br><span class="line">    minNode := findMinBST(root.Right)</span><br><span class="line">    root.Right = convertBSTHelper(root.Right, upper)</span><br><span class="line">    root.Val += minNode.Val</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    root.Val += upper</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left != <span class="constant">nil</span> {</span><br><span class="line">    root.Left = convertBSTHelper(root.Left, root.Val)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> findMinBST(root *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> || root.Left == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> findMinBST(root.Left)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">0</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: -<span class="number">1</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: -<span class="number">3</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">4</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(convertBST(root))</span><br><span class="line">  fmt.Println(root.Left)</span><br><span class="line">  fmt.Println(root.Left.Left)</span><br><span class="line">  fmt.Println(root.Right.Right)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><a id="ID-a499ddc4-6eb0-4101-93f7-43b34155752d" name="ID-a499ddc4-6eb0-4101-93f7-43b34155752d"></a><span class="section-number-3">3.3</span> validate</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isValidBST(root *TreeNode) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isValidLeftBST(root.Left, root.Val) &amp;&amp; isValidRightBST(root.Right, root.Val)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isValidLeftBST(root *TreeNode, upper <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val &gt;= upper {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isValidLeftBST(root.Left, root.Val) &amp;&amp; isValidSubBST(root.Right, root.Val, upper)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isValidRightBST(root *TreeNode, lower <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val &lt;= lower {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isValidRightBST(root.Right, root.Val) &amp;&amp; isValidSubBST(root.Left, lower, root.Val)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> isValidSubBST(root *TreeNode, lower <span class="typename">int</span>, upper <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val &gt;= upper || root.Val &lt;= lower {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isValidSubBST(root.Left, lower, root.Val) &amp;&amp; isValidSubBST(root.Right, root.Val, upper)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(isValidBST(root))</span><br><span class="line"></span><br><span class="line">  root = &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">2</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  fmt.Println(isValidBST(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><a id="ID-a208e4f0-6f9f-4e25-a9e7-75d5ef98b574" name="ID-a208e4f0-6f9f-4e25-a9e7-75d5ef98b574"></a><span class="section-number-3">3.4</span> find mode</h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> findMode(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  modes := collect(root)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(modes) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> modes</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(modes); i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">for</span> j := i; j &gt; <span class="number">0</span>; j -= <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">if</span> modes[j] &lt; modes[j-<span class="number">1</span>] {</span><br><span class="line">	modes[j], modes[j-<span class="number">1</span>] = modes[j-<span class="number">1</span>], modes[j]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> max_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> pre <span class="typename">int</span></span><br><span class="line">  n_modes := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, mode := <span class="keyword">range</span> modes {</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">      max_count = <span class="number">1</span></span><br><span class="line">      pre = mode</span><br><span class="line">      count = <span class="number">1</span></span><br><span class="line">      n_modes = <span class="built_in">append</span>(n_modes, mode)</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> mode == pre {</span><br><span class="line">      count += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> mode != pre {</span><br><span class="line">      pre = mode</span><br><span class="line">      count = <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count == max_count {</span><br><span class="line">      n_modes = <span class="built_in">append</span>(n_modes, mode)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> count &gt; max_count {</span><br><span class="line">      max_count = count</span><br><span class="line">      n_modes = []<span class="typename">int</span>{mode}</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> n_modes</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> collect(root *TreeNode) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">append</span>(<span class="built_in">append</span>(collect(root.Left), root.Val), collect(root.Right)...)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">0</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: -<span class="number">1</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: -<span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(findMode(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><a id="ID-b9dda316-28f2-4023-8a94-78cc8429bb7a" name="ID-b9dda316-28f2-4023-8a94-78cc8429bb7a"></a><span class="section-number-3">3.5</span> convert sorted array to bst</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> sortedArrayToBST(nums []<span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val: nums[<span class="number">0</span>],</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val: nums[<span class="number">1</span>],</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: nums[<span class="number">0</span>],</span><br><span class="line">      },</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  mid := <span class="built_in">len</span>(nums) / <span class="number">2</span></span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   nums[mid],</span><br><span class="line">    Left:  sortedArrayToBST(nums[:mid]),</span><br><span class="line">    Right: sortedArrayToBST(nums[mid+<span class="number">1</span>:]),</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(tree2str(sortedArrayToBST([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>})))</span><br><span class="line">  fmt.Println(tree2str(sortedArrayToBST([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>})))</span><br><span class="line">  fmt.Println(tree2str(sortedArrayToBST([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>})))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><a id="ID-e0a572a9-3a7b-4b13-ac8f-588b0a53b0b3" name="ID-e0a572a9-3a7b-4b13-ac8f-588b0a53b0b3"></a><span class="section-number-3">3.6</span> lowest common ancestor</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> TreeNode {</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  TreeNode *left;</span><br><span class="line">  TreeNode *right;</span><br><span class="line">  TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) {}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p-&gt;val &gt; q-&gt;val) {</span><br><span class="line">      TreeNode *tmp = p;</span><br><span class="line">      p=q;</span><br><span class="line">      q=tmp;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root-&gt;val&gt;p-&gt;val &amp;&amp; root-&gt;val&lt;q-&gt;val) {</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root-&gt;val &lt; p-&gt;val) {</span><br><span class="line">      <span class="keyword">return</span> lowestCommonAncestor(root-&gt;right, p, q);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root-&gt;val &gt; q-&gt;val) {</span><br><span class="line">      <span class="keyword">return</span> lowestCommonAncestor(root-&gt;left, p, q);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root-&gt;val == p-&gt;val) {</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root-&gt;val == q-&gt;val) {</span><br><span class="line">      <span class="keyword">return</span> root;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">  TreeNode* p = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">  p-&gt;left = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">  p-&gt;right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">  Solution  s;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s.lowestCommonAncestor(p, p-&gt;left, p-&gt;right)-&gt;val;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><a id="ID-0d73f7ee-42ee-4475-86b3-70aa3d90a0f5" name="ID-0d73f7ee-42ee-4475-86b3-70aa3d90a0f5"></a><span class="section-number-3">3.7</span> recover binary search tree</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> RecoverNode <span class="keyword">struct</span> {</span><br><span class="line">  Pre        *TreeNode</span><br><span class="line">  Ppre       *TreeNode</span><br><span class="line">  Is_recover <span class="typename">int</span></span><br><span class="line">  Illegal    *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> traversalFunc <span class="keyword">func</span>(*TreeNode)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> recoverTree(root *TreeNode) {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  rNode := &amp;RecoverNode{}</span><br><span class="line">  tfunc := <span class="keyword">func</span>(rnode *RecoverNode) traversalFunc {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">func</span>(node *TreeNode) {</span><br><span class="line">      recoverFunc(node, rnode)</span><br><span class="line">    }</span><br><span class="line">  }(rNode)</span><br><span class="line">  inorderTraversal(root, tfunc)</span><br><span class="line">  <span class="keyword">if</span> rNode.Is_recover == <span class="number">0</span> &amp;&amp; rNode.Illegal != <span class="constant">nil</span> {</span><br><span class="line">    rNode.Pre.Val, rNode.Illegal.Val = rNode.Illegal.Val, rNode.Pre.Val</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> inorderTraversal(root *TreeNode, tfunc traversalFunc) {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  inorderTraversal(root.Left, tfunc)</span><br><span class="line">  tfunc(root)</span><br><span class="line">  inorderTraversal(root.Right, tfunc)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> recoverFunc(node *TreeNode, rnode *RecoverNode) {</span><br><span class="line">  <span class="keyword">if</span> node == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> rnode.Is_recover == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> rnode.Pre == <span class="constant">nil</span> {</span><br><span class="line">    rnode.Pre = node</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> node.Val &lt; rnode.Pre.Val {</span><br><span class="line">    <span class="keyword">if</span> rnode.Illegal == <span class="constant">nil</span> {</span><br><span class="line">      rnode.Illegal = rnode.Pre</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      rnode.Illegal.Val, node.Val = node.Val, rnode.Illegal.Val</span><br><span class="line">      rnode.Is_recover = <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">if</span> rnode.Illegal != <span class="constant">nil</span> {</span><br><span class="line">      <span class="keyword">if</span> rnode.Illegal.Val &lt; node.Val {</span><br><span class="line">	rnode.Illegal.Val, rnode.Pre.Val = rnode.Pre.Val, rnode.Illegal.Val</span><br><span class="line">	rnode.Is_recover = <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  rnode.Ppre = rnode.Pre</span><br><span class="line">  rnode.Pre = node</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  s := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">2</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(tree2str(s))</span><br><span class="line">  recoverTree(s)</span><br><span class="line">  fmt.Println(tree2str(s))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8"><a id="ID-01439db5-32f2-4792-b0ba-bd1cbd0fcab6" name="ID-01439db5-32f2-4792-b0ba-bd1cbd0fcab6"></a><span class="section-number-3">3.8</span> delete node</h3>
<div class="outline-text-3" id="text-3-8">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> deleteNode(root *TreeNode, key <span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val == key {</span><br><span class="line">    <span class="keyword">if</span> root.Left == <span class="constant">nil</span> || root.Right == <span class="constant">nil</span> {</span><br><span class="line">      <span class="keyword">if</span> root.Left != <span class="constant">nil</span> {</span><br><span class="line">	<span class="keyword">return</span> root.Left</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> root.Right != <span class="constant">nil</span> {</span><br><span class="line">	<span class="keyword">return</span> root.Right</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	<span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      successor := treeMinimum(root.Right)</span><br><span class="line">      root.Val = successor.Val</span><br><span class="line">      root.Right = deleteNode(root.Right, successor.Val)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val &lt; key {</span><br><span class="line">    root.Right = deleteNode(root.Right, key)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    root.Left = deleteNode(root.Left, key)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> root</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> treeMinimum(node *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> node.Left != <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> treeMinimum(node.Left)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  s := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">2</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(tree2str(s))</span><br><span class="line">  s = deleteNode(s, <span class="number">1</span>)</span><br><span class="line">  fmt.Println(tree2str(s))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-9" class="outline-3">
<h3 id="sec-3-9"><a id="ID-6b0ba0ac-cf81-4f19-96fe-9de17becc534" name="ID-6b0ba0ac-cf81-4f19-96fe-9de17becc534"></a><span class="section-number-3">3.9</span> convert sorted list to bst</h3>
<div class="outline-text-3" id="text-3-9">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ListNode <span class="keyword">struct</span> {</span><br><span class="line">  Val  <span class="typename">int</span></span><br><span class="line">  Next *ListNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortedListToBST(head *ListNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> head == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line">  length := getListLength(head)</span><br><span class="line">  <span class="keyword">return</span> sortedListToBSTHelper(head, length)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> getListLength(head *ListNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> head == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> + getListLength(head.Next)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> getListNth(head *ListNode, nth <span class="typename">int</span>) *ListNode {</span><br><span class="line">  <span class="keyword">if</span> head == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> nth &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> head</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> getListNth(head.Next, nth-<span class="number">1</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortedListToBSTHelper(head *ListNode, length <span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> length &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> length == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val: head.Val,</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> length == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">      Val: head.Val,</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: head.Next.Val,</span><br><span class="line">      },</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  mid := length / <span class="number">2</span></span><br><span class="line">  mid_node := getListNth(head, mid)</span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   mid_node.Val,</span><br><span class="line">    Left:  sortedListToBSTHelper(head, mid),</span><br><span class="line">    Right: sortedListToBSTHelper(mid_node.Next, length-<span class="number">1</span>-mid),</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  sortedLst := &amp;ListNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Next: &amp;ListNode{</span><br><span class="line">      Val:<span class="number">2</span>,</span><br><span class="line">      Next: &amp;ListNode{</span><br><span class="line">	Val:<span class="number">3</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  fmt.Println(tree2str(sortedListToBST(sortedLst)))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-10" class="outline-3">
<h3 id="sec-3-10"><a id="ID-6847ceb5-0635-4cc1-b27e-ee2ba3f1fb66" name="ID-6847ceb5-0635-4cc1-b27e-ee2ba3f1fb66"></a><span class="section-number-3">3.10</span> kth smallest elemen</h3>
<div class="outline-text-3" id="text-3-10">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> KthNode <span class="keyword">struct</span> {</span><br><span class="line">  K   <span class="typename">int</span></span><br><span class="line">  Val <span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> traversalFunc <span class="keyword">func</span>(*TreeNode)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> kthSmallest(root *TreeNode, k <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  kNode := &amp;KthNode{K: k}</span><br><span class="line">  tfunc := <span class="keyword">func</span>(knode *KthNode) traversalFunc {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">func</span>(node *TreeNode) {</span><br><span class="line">      kthFunc(node, knode)</span><br><span class="line">    }</span><br><span class="line">  }(kNode)</span><br><span class="line">  inorderTraversal(root, tfunc)</span><br><span class="line">  <span class="keyword">return</span> kNode.Val</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> inorderTraversal(root *TreeNode, tfunc traversalFunc) {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  inorderTraversal(root.Left, tfunc)</span><br><span class="line">  tfunc(root)</span><br><span class="line">  inorderTraversal(root.Right, tfunc)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> kthFunc(node *TreeNode, kn *KthNode) {</span><br><span class="line">  <span class="keyword">if</span> node == <span class="constant">nil</span> &amp;&amp; kn.K == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  kn.K -= <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> kn.K == <span class="number">0</span> {</span><br><span class="line">    kn.Val = node.Val</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  t := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">3</span>,</span><br><span class="line">    Left: &amp;TreeNode{Val: <span class="number">2</span>},</span><br><span class="line">    Right: &amp;TreeNode{Val: <span class="number">5</span>},</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(kthSmallest(t,<span class="number">1</span>))</span><br><span class="line">  fmt.Println(kthSmallest(t,<span class="number">2</span>))</span><br><span class="line">  fmt.Println(kthSmallest(t,<span class="number">3</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-11" class="outline-3">
<h3 id="sec-3-11"><a id="ID-949286c8-d2a4-465d-81aa-307003bc6509" name="ID-949286c8-d2a4-465d-81aa-307003bc6509"></a><span class="section-number-3">3.11</span> unique bst</h3>
<div class="outline-text-3" id="text-3-11">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> numTrees(n <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ctl_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, n+<span class="number">1</span>)</span><br><span class="line">  ctl_arr[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">  ctl_arr[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">2</span>; i &lt; n+<span class="number">1</span>; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; i; j += <span class="number">1</span> {</span><br><span class="line">      ctl_arr[i] += ctl_arr[j] * ctl_arr[i-j-<span class="number">1</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ctl_arr[n]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  <span class="keyword">for</span> _, n := <span class="keyword">range</span> list{</span><br><span class="line">    fmt.Println(numTrees(n))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-3-12" class="outline-3">
<h3 id="sec-3-12"><a id="ID-7c4cf8f8-6db0-49eb-9daa-abe9cd610bce" name="ID-7c4cf8f8-6db0-49eb-9daa-abe9cd610bce"></a><span class="section-number-3">3.12</span> unique bst II</h3>
<div class="outline-text-3" id="text-3-12">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> generateTrees(n <span class="typename">int</span>) []*TreeNode {</span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> []*TreeNode{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  tree_arr := []*TreeNode{</span><br><span class="line">    &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">1</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">2</span>; i &lt;= n; i += <span class="number">1</span> {</span><br><span class="line">    ng_tree_arr := <span class="built_in">make</span>([]*TreeNode, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> tree_arr {</span><br><span class="line">      tree := tree_arr[index]</span><br><span class="line">      ng_tree_arr = <span class="built_in">append</span>(ng_tree_arr, genTreesHelper(tree, i)...)</span><br><span class="line">    }</span><br><span class="line">    tree_arr = ng_tree_arr</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> tree_arr</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> genTreesHelper(root *TreeNode, greater <span class="typename">int</span>) []*TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> []*TreeNode{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  cr := cloneTree(root)</span><br><span class="line">  right := cr</span><br><span class="line">  <span class="keyword">var</span> parent *TreeNode</span><br><span class="line">  tree_arr := <span class="built_in">make</span>([]*TreeNode, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> right != <span class="constant">nil</span> {</span><br><span class="line">      rval := right.Val</span><br><span class="line">      node := &amp;TreeNode{</span><br><span class="line">	Val:  greater,</span><br><span class="line">	Left: right,</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> parent != <span class="constant">nil</span> {</span><br><span class="line">	parent.Right = node</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	cr = node</span><br><span class="line">      }</span><br><span class="line">      tree_arr = <span class="built_in">append</span>(tree_arr, cr)</span><br><span class="line"></span><br><span class="line">      cr = cloneTree(root)</span><br><span class="line">      parent = getNode(cr, rval)</span><br><span class="line">      right = parent.Right</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      parent.Right = &amp;TreeNode{Val: greater}</span><br><span class="line">      tree_arr = <span class="built_in">append</span>(tree_arr, cr)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> tree_arr</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> cloneTree(root *TreeNode) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;TreeNode{</span><br><span class="line">    Val:   root.Val,</span><br><span class="line">    Left:  cloneTree(root.Left),</span><br><span class="line">    Right: cloneTree(root.Right),</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> getNode(root *TreeNode, val <span class="typename">int</span>) *TreeNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val == val {</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Val &lt; val {</span><br><span class="line">    <span class="keyword">return</span> getNode(root.Right, val)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> getNode(root.Left, val)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  <span class="keyword">for</span> _, n := <span class="keyword">range</span> list{</span><br><span class="line">    tree_arr := generateTrees(n)</span><br><span class="line">    fmt.Println(n, <span class="built_in">len</span>(tree_arr))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

Last Updated 2017-07-16 Sun 15:30.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/07/16/leetcode-array/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/16/leetcode-array/" itemprop="url">Leetcode-array</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-16T00:00:00+08:00">
                2017-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/07/16/leetcode-array/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/07/16/leetcode-array/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Interval <span class="keyword">struct</span> {</span><br><span class="line"> Start <span class="typename">int</span></span><br><span class="line"> End   <span class="typename">int</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-f4e4fab8-d414-4790-be85-130f330e8633" name="ID-f4e4fab8-d414-4790-be85-130f330e8633"></a><span class="section-number-2">1</span> best time to buy and sell stock</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxProfit(prices []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> mp <span class="typename">int</span></span><br><span class="line">  min_p := prices[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> _, price := <span class="keyword">range</span> prices {</span><br><span class="line">    <span class="keyword">if</span> price-min_p &gt; mp {</span><br><span class="line">      mp = price - min_p</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> price &lt; min_p {</span><br><span class="line">      min_p = price</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mp</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-0c6a9a83-8b5f-4d23-a97e-f64fa7d4328d" name="ID-0c6a9a83-8b5f-4d23-a97e-f64fa7d4328d"></a><span class="section-number-2">2</span> best time to buy and sell stock II</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxProfit(prices []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> mp, pre_p, buy_p <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> status <span class="typename">string</span> <span class="comment">// buy sell</span></span><br><span class="line">  <span class="keyword">for</span> index, price := <span class="keyword">range</span> prices {</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">      pre_p = price</span><br><span class="line">      buy_p = price</span><br><span class="line">      status = <span class="string">"buy"</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> price &gt; pre_p &amp;&amp; status == <span class="string">"sell"</span> {</span><br><span class="line">      buy_p = pre_p</span><br><span class="line">      status = <span class="string">"buy"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pre_p &gt; price &amp;&amp; status == <span class="string">"buy"</span> {</span><br><span class="line">      mp += pre_p - buy_p</span><br><span class="line">      status = <span class="string">"sell"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_p = price</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> pre_p &gt; buy_p &amp;&amp; status == <span class="string">"buy"</span> {</span><br><span class="line">    mp += pre_p - buy_p</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mp</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-5d3a8d0f-7cb5-42ce-a280-8e8e55a9b44e" name="ID-5d3a8d0f-7cb5-42ce-a280-8e8e55a9b44e"></a><span class="section-number-2">3</span> plus one</h2>
<div class="outline-text-2" id="text-3">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> plusOne(digits []<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> carry <span class="typename">int</span></span><br><span class="line">  carry = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> index := <span class="built_in">len</span>(digits) - <span class="number">1</span>; index &gt;= <span class="number">0</span>; index -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> carry+digits[index] == <span class="number">10</span> {</span><br><span class="line">      carry = <span class="number">1</span></span><br><span class="line">      digits[index] = <span class="number">0</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      digits[index] += carry</span><br><span class="line">      carry = <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> carry == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> carry == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">append</span>([]<span class="typename">int</span>{<span class="number">1</span>}, digits...)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> digits</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-955a32cc-ff35-432c-87da-c1173739bd61" name="ID-955a32cc-ff35-432c-87da-c1173739bd61"></a><span class="section-number-2">4</span> pascal's triangle</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> generate(numRows <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  pt_arr := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">if</span> numRows &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> pt_arr</span><br><span class="line">  }</span><br><span class="line">  pt_arr = <span class="built_in">append</span>(pt_arr, []<span class="typename">int</span>{<span class="number">1</span>})</span><br><span class="line">  <span class="keyword">if</span> numRows == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> pt_arr</span><br><span class="line">  }</span><br><span class="line">  pt_arr = <span class="built_in">append</span>(pt_arr, []<span class="typename">int</span>{<span class="number">1</span>, <span class="number">1</span>})</span><br><span class="line">  <span class="keyword">if</span> numRows &lt; <span class="number">3</span> {</span><br><span class="line">    <span class="keyword">return</span> pt_arr</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">3</span>; i &lt;= numRows; i += <span class="number">1</span> {</span><br><span class="line">    pt := <span class="built_in">make</span>([]<span class="typename">int</span>, i)</span><br><span class="line">    pre_pt := pt_arr[i-<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">var</span> pre <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_pt {</span><br><span class="line">      <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">	pt[index] = pre_pt[index]</span><br><span class="line">	pre = pre_pt[index]</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> index == <span class="built_in">len</span>(pre_pt)-<span class="number">1</span> {</span><br><span class="line">	pt[index] = pre + pre_pt[index]</span><br><span class="line">	pt[index+<span class="number">1</span>] = pre_pt[index]</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      pt[index] = pre + pre_pt[index]</span><br><span class="line">      pre = pre_pt[index]</span><br><span class="line">    }</span><br><span class="line">    pt_arr = <span class="built_in">append</span>(pt_arr, pt)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pt_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">    fmt.Println(generate(<span class="number">3</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-f2b7b1c8-839c-4976-96d1-e95394e59b64" name="ID-f2b7b1c8-839c-4976-96d1-e95394e59b64"></a><span class="section-number-2">5</span> pascal's triangle II</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> getRow(rowIndex <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  rowIndex += <span class="number">1</span></span><br><span class="line">  pt_row := <span class="built_in">make</span>([]<span class="typename">int</span>, rowIndex)</span><br><span class="line">  <span class="keyword">if</span> rowIndex &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> pt_row</span><br><span class="line">  }</span><br><span class="line">  pt_row[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> rowIndex == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> pt_row</span><br><span class="line">  }</span><br><span class="line">  pt_row[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">3</span>; i &lt;= rowIndex; i += <span class="number">1</span> {</span><br><span class="line">    ptr := pt_row[<span class="number">0</span>:i]</span><br><span class="line">    pre_ptr := pt_row[<span class="number">0</span> : i-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">var</span> pre <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_ptr {</span><br><span class="line">      <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">	pre = pre_ptr[index]</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> index == <span class="built_in">len</span>(pre_ptr)-<span class="number">1</span> {</span><br><span class="line">	ptr[index+<span class="number">1</span>] = pre_ptr[index]</span><br><span class="line">	ptr[index] = pre + pre_ptr[index]</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      pre_num := pre_ptr[index]</span><br><span class="line">      ptr[index], pre = pre+pre_num, pre_num</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pt_row</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">    fmt.Println(getRow(<span class="number">4</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="ID-026862fc-98ae-49f7-bd7e-ecdb6854aebf" name="ID-026862fc-98ae-49f7-bd7e-ecdb6854aebf"></a><span class="section-number-2">6</span> array partition I</h2>
<div class="outline-text-2" id="text-6">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> arrayPairSum(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  sort.Ints(nums)</span><br><span class="line">  <span class="keyword">var</span> p_sum <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index := <span class="number">0</span>; index &lt; <span class="built_in">len</span>(nums); index += <span class="number">2</span> {</span><br><span class="line">    p_sum += min(nums[index], nums[index+<span class="number">1</span>])</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> p_sum</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><a id="ID-3f563c9d-eac2-4ca7-8684-4c031064e172" name="ID-3f563c9d-eac2-4ca7-8684-4c031064e172"></a><span class="section-number-2">7</span> find all numbers disappeared in an array</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findDisappearedNumbers(nums []<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">  }</span><br><span class="line">  dis_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> pre, pre_index <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> index+<span class="number">1</span> != num &amp;&amp; num != <span class="number">0</span> {</span><br><span class="line">      pre = num</span><br><span class="line">      pre_index = index</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> pre == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> dis_nums</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[pre-<span class="number">1</span>] != pre &amp;&amp; nums[pre-<span class="number">1</span>] != <span class="number">0</span> {</span><br><span class="line">      nums[pre-<span class="number">1</span>], pre = pre, nums[pre-<span class="number">1</span>]</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> nums[pre-<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">      nums[pre-<span class="number">1</span>] = pre</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    nums[pre_index] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">      <span class="keyword">if</span> index+<span class="number">1</span> != num &amp;&amp; num != <span class="number">0</span> {</span><br><span class="line">	pre = num</span><br><span class="line">	pre_index = index</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  nums[pre-<span class="number">1</span>] = pre</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> index+<span class="number">1</span> != num {</span><br><span class="line">      dis_nums = <span class="built_in">append</span>(dis_nums, index+<span class="number">1</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dis_nums</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findDisappearedNumbers(nums []<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  marks := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    marks[num-<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  dis_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, mark := <span class="keyword">range</span> marks {</span><br><span class="line">    <span class="keyword">if</span> mark == <span class="number">0</span> {</span><br><span class="line">      dis_nums = <span class="built_in">append</span>(dis_nums, index+<span class="number">1</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> dis_nums</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(findDisappearedNumbers([]<span class="typename">int</span>{<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><a id="ID-a6cad07b-f004-4e13-ae5f-8580d32df685" name="ID-a6cad07b-f004-4e13-ae5f-8580d32df685"></a><span class="section-number-2">8</span> two sum</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> twoSum(nums []<span class="typename">int</span>, target <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">    indices := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">	fir := nums[i]</span><br><span class="line">	<span class="keyword">for</span> j := i+<span class="number">1</span>; j &lt; <span class="built_in">len</span>(nums); j +=<span class="number">1</span> {</span><br><span class="line">	    secd := nums[j]</span><br><span class="line">	    <span class="keyword">if</span> fir + secd == target {</span><br><span class="line">		indices = <span class="built_in">append</span>(indices, i)</span><br><span class="line">		indices = <span class="built_in">append</span>(indices, j)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	    }</span><br><span class="line">	}</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> indices</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Definition for singly-linked list.</span><br><span class="line"> * type ListNode struct {</span><br><span class="line"> *     Val int</span><br><span class="line"> *     Next *ListNode</span><br><span class="line"> * }</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">func</span> addTwoNumbers(l1 *ListNode, l2 *ListNode) *ListNode {</span><br><span class="line">  <span class="keyword">var</span> carry <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> sum_head, sum_curr *ListNode</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> l1 == <span class="constant">nil</span> &amp;&amp; l2 == <span class="constant">nil</span> {</span><br><span class="line">      <span class="keyword">if</span> carry &gt; <span class="number">0</span> {</span><br><span class="line">	sum_node := &amp;ListNode{</span><br><span class="line">	  Val:  carry,</span><br><span class="line">	  Next: <span class="constant">nil</span>,</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> sum_head != <span class="constant">nil</span> {</span><br><span class="line">	  sum_curr.Next = sum_node</span><br><span class="line">	  sum_curr = sum_node</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  sum_head = sum_node</span><br><span class="line">	  sum_curr = sum_node</span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sum <span class="typename">int</span></span><br><span class="line">    <span class="keyword">if</span> l1 != <span class="constant">nil</span> &amp;&amp; l2 != <span class="constant">nil</span> {</span><br><span class="line">      sum = l1.Val + l2.Val + carry</span><br><span class="line">      l1, l2 = l1.Next, l2.Next</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> l2 == <span class="constant">nil</span> {</span><br><span class="line">      sum = l1.Val + carry</span><br><span class="line">      l1 = l1.Next</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> l1 == <span class="constant">nil</span> {</span><br><span class="line">      sum = l2.Val + carry</span><br><span class="line">      l2 = l2.Next</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sum &gt; <span class="number">9</span> {</span><br><span class="line">      carry = <span class="number">1</span></span><br><span class="line">      sum -= <span class="number">10</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      carry = <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sum_node := &amp;ListNode{</span><br><span class="line">      Val:  sum,</span><br><span class="line">      Next: <span class="constant">nil</span>,</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> sum_head != <span class="constant">nil</span> {</span><br><span class="line">      sum_curr.Next = sum_node</span><br><span class="line">      sum_curr = sum_node</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      sum_head = sum_node</span><br><span class="line">      sum_curr = sum_node</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> sum_head</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ListNode <span class="keyword">struct</span> {</span><br><span class="line">  Val <span class="typename">int</span></span><br><span class="line">  Next *ListNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> make_list(vals []<span class="typename">int</span>) *ListNode{</span><br><span class="line">  <span class="keyword">var</span> lst, lst_c *ListNode</span><br><span class="line">  <span class="keyword">for</span> _, val := <span class="keyword">range</span> vals {</span><br><span class="line">    node := &amp;ListNode{</span><br><span class="line">      Val: val,</span><br><span class="line">      Next: <span class="constant">nil</span>,</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> lst != <span class="constant">nil</span> {</span><br><span class="line">      lst_c.Next = node</span><br><span class="line">      lst_c = node</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      lst = node</span><br><span class="line">      lst_c = node</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> lst</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> print_list(lst *ListNode) {</span><br><span class="line">  <span class="keyword">var</span> str <span class="typename">string</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> lst == <span class="constant">nil</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    str += fmt.Sprintf(<span class="string">"%d,"</span>, lst.Val)</span><br><span class="line">    lst = lst.Next</span><br><span class="line">  }</span><br><span class="line">  str = strings.Trim(str, <span class="string">","</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"[%s]"</span>, str)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  l1 := make_list([]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>})</span><br><span class="line">  l2 := make_list([]<span class="typename">int</span>{<span class="number">5</span>,<span class="number">6</span>,<span class="number">4</span>})</span><br><span class="line">  sum_lst := addTwoNumbers(l1,l2)</span><br><span class="line">  print_list(sum_lst)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><a id="ID-e61189bf-00f4-47e4-9573-7f449688d5ef" name="ID-e61189bf-00f4-47e4-9573-7f449688d5ef"></a><span class="section-number-2">9</span> two sum II - input array is sorted</h2>
<div class="outline-text-2" id="text-9">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> twoSum(nums []<span class="typename">int</span>, target <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  indices := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">    fir := nums[i]</span><br><span class="line">    <span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; <span class="built_in">len</span>(nums); j += <span class="number">1</span> {</span><br><span class="line">      secd := nums[j]</span><br><span class="line">      <span class="keyword">if</span> fir+secd == target {</span><br><span class="line">	indices = <span class="built_in">append</span>(indices, i+<span class="number">1</span>)</span><br><span class="line">	indices = <span class="built_in">append</span>(indices, j+<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> indices</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><a id="ID-ff6497bd-6708-49cc-8fec-b31ad19be5b5" name="ID-ff6497bd-6708-49cc-8fec-b31ad19be5b5"></a><span class="section-number-2">10</span> remove duplicates from sorted array</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> removeDuplicates(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">len</span>(nums)) &lt;<span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(nums)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  pre := nums[<span class="number">0</span>]</span><br><span class="line">  size := <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> pre != num {</span><br><span class="line">      pre = num</span><br><span class="line">      nums[size] = num</span><br><span class="line">      size++</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> size</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><a id="ID-2230af93-5ae2-4282-abc5-e9d51f5dd361" name="ID-2230af93-5ae2-4282-abc5-e9d51f5dd361"></a><span class="section-number-2">11</span> remove duplicates from sorted array II</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> removeDuplicates(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">len</span>(nums)) &lt; <span class="number">3</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(nums)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="number">2</span></span><br><span class="line">  pp_num := nums[<span class="number">0</span>]</span><br><span class="line">  p_num := nums[<span class="number">1</span>]</span><br><span class="line">  nums_size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">2</span>; i &lt; nums_size; i++ {</span><br><span class="line">    <span class="keyword">if</span> nums[i] == p_num &amp;&amp; p_num == pp_num {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pp_num = p_num</span><br><span class="line">    p_num = nums[i]</span><br><span class="line">    nums[size] = nums[i]</span><br><span class="line">    size++</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> size</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><a id="ID-6ca329cf-96b6-406e-b1ac-f72f5e276e2f" name="ID-6ca329cf-96b6-406e-b1ac-f72f5e276e2f"></a><span class="section-number-2">12</span> remove element</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> removeElement(nums []<span class="typename">int</span>, val <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> size <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">if</span> num == val {</span><br><span class="line">	size = <span class="number">0</span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	size = <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num != val {</span><br><span class="line">      nums[size] = num</span><br><span class="line">      size += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> size</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><a id="ID-eecdd18d-3a8d-4b15-8486-83931c55d6d8" name="ID-eecdd18d-3a8d-4b15-8486-83931c55d6d8"></a><span class="section-number-2">13</span> majority element</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> majorityElement(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    time := num_M[num]</span><br><span class="line">    num_M[num] = time + <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> mt_num, max_times <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> num, time := <span class="keyword">range</span> num_M {</span><br><span class="line">    <span class="keyword">if</span> time &gt; max_times {</span><br><span class="line">      mt_num = num</span><br><span class="line">      max_times = time</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> mt_num</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><a id="ID-020d91c3-f039-49e0-9c39-6808fec46f85" name="ID-020d91c3-f039-49e0-9c39-6808fec46f85"></a><span class="section-number-2">14</span> <span class="done DONE">DONE</span> shortest unsorted continuous subarray</h2>
<div class="outline-text-2" id="text-14">
<ul class="org-ul">
<li>State "DONE"       from "STARTED"    <span class="timestamp-wrapper"><span class="timestamp">[2017-07-17 Mon 23:32]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findUnsortedSubarray(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  n_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line">  <span class="built_in">copy</span>(n_nums, nums)</span><br><span class="line">  sort.Ints(n_nums)</span><br><span class="line">  <span class="keyword">var</span> start, end <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> nums[index] != n_nums[index] {</span><br><span class="line">      start = index</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index := <span class="built_in">len</span>(nums) - <span class="number">1</span>; index &gt;= <span class="number">0</span>; index -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[index] != n_nums[index] {</span><br><span class="line">      end = index + <span class="number">1</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> end - start</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><a id="ID-e99a3f76-2d7f-4ab9-a908-beb1a83f094c" name="ID-e99a3f76-2d7f-4ab9-a908-beb1a83f094c"></a><span class="section-number-2">15</span> reshape the matrix</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> matrixReshape(nums [][]<span class="typename">int</span>, r <span class="typename">int</span>, c <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> || <span class="built_in">len</span>(nums[<span class="number">0</span>]) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  or := <span class="built_in">len</span>(nums)</span><br><span class="line">  oc := <span class="built_in">len</span>(nums[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">if</span> or*oc != r*c {</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  f_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> nums {</span><br><span class="line">    row := nums[index]</span><br><span class="line">    f_nums = <span class="built_in">append</span>(f_nums, row...)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  n_nums := <span class="built_in">make</span>([][]<span class="typename">int</span>, r)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; r; i += <span class="number">1</span> {</span><br><span class="line">    row := <span class="built_in">make</span>([]<span class="typename">int</span>, c)</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; c; j += <span class="number">1</span> {</span><br><span class="line">      row[j] = f_nums[i*c+j]</span><br><span class="line">    }</span><br><span class="line">    n_nums[i] = row</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> n_nums</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><a id="ID-8848824b-c05f-499a-8698-097e6d5f188f" name="ID-8848824b-c05f-499a-8698-097e6d5f188f"></a><span class="section-number-2">16</span> search insert position</h2>
<div class="outline-text-2" id="text-16">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> searchInsert(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> num == target {</span><br><span class="line">      <span class="keyword">return</span> index</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num &gt; target {</span><br><span class="line">      <span class="keyword">return</span> index</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">len</span>(nums)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><a id="ID-66d01320-b62d-4545-8df5-ad4a10985f03" name="ID-66d01320-b62d-4545-8df5-ad4a10985f03"></a><span class="section-number-2">17</span> merge sorted array</h2>
<div class="outline-text-2" id="text-17">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> merge(nums1 []<span class="typename">int</span>, m <span class="typename">int</span>, nums2 []<span class="typename">int</span>, n <span class="typename">int</span>) {</span><br><span class="line">  <span class="keyword">if</span> m == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i += <span class="number">1</span> {</span><br><span class="line">      nums1[i] = nums2[i]</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  n1_index := m - <span class="number">1</span></span><br><span class="line">  n2_index := n - <span class="number">1</span></span><br><span class="line">  index := m + n - <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> n1_index &lt; <span class="number">0</span> || n2_index &lt; <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> nums1[n1_index] &gt; nums2[n2_index] {</span><br><span class="line">      nums1[index] = nums1[n1_index]</span><br><span class="line">      n1_index -= <span class="number">1</span></span><br><span class="line">      index -= <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      nums1[index] = nums2[n2_index]</span><br><span class="line">      n2_index -= <span class="number">1</span></span><br><span class="line">      index -= <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> n2_index &gt;= <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= n2_index; i += <span class="number">1</span> {</span><br><span class="line">      nums1[i] = nums2[i]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><a id="ID-ebc5d9db-bd7a-4b85-9405-969a823eb259" name="ID-ebc5d9db-bd7a-4b85-9405-969a823eb259"></a><span class="section-number-2">18</span> maximum product of three numbers</h2>
<div class="outline-text-2" id="text-18">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> max(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maximumProduct(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  sort.Ints(nums)</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">return</span> max(nums[size-<span class="number">1</span>]*nums[size-<span class="number">2</span>]*nums[size-<span class="number">3</span>], nums[<span class="number">0</span>]*nums[<span class="number">1</span>]*nums[size-<span class="number">1</span>])</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><a id="ID-d9eff77f-9182-4424-8f25-0c4db04d89b0" name="ID-d9eff77f-9182-4424-8f25-0c4db04d89b0"></a><span class="section-number-2">19</span> maximum average subarray I</h2>
<div class="outline-text-2" id="text-19">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findMaxAverage(nums []<span class="typename">int</span>, k <span class="typename">int</span>) <span class="typename">float64</span> {</span><br><span class="line">  <span class="keyword">var</span> max_average <span class="typename">float64</span></span><br><span class="line">  <span class="keyword">for</span> index := <span class="number">0</span>; index &lt;= <span class="built_in">len</span>(nums)-k; index += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">var</span> sub_sum <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; k; j += <span class="number">1</span> {</span><br><span class="line">      sub_sum += nums[index+j]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    average := <span class="typename">float64</span>(sub_sum) / <span class="typename">float64</span>(k)</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">      max_average = average</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> max_average &lt; average {</span><br><span class="line">      max_average = average</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max_average</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><a id="ID-818861d8-8ca1-4f72-b7ac-0043b0c6a443" name="ID-818861d8-8ca1-4f72-b7ac-0043b0c6a443"></a><span class="section-number-2">20</span> move zeroes</h2>
<div class="outline-text-2" id="text-20">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> moveZeroes(nums []<span class="typename">int</span>) {</span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j := index; <span class="number">0</span> &lt; j; j -= <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">if</span> nums[j-<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">	nums[j-<span class="number">1</span>], nums[j] = nums[j], nums[j-<span class="number">1</span>]</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  nums := []<span class="typename">int</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">12</span>}</span><br><span class="line">  moveZeroes(nums)</span><br><span class="line">  fmt.Println(nums)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21"><a id="ID-b8398f40-bc7f-4dd3-bd80-06749066b2af" name="ID-b8398f40-bc7f-4dd3-bd80-06749066b2af"></a><span class="section-number-2">21</span> can place flowers</h2>
<div class="outline-text-2" id="text-21">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> canPlaceFlowers(flowerbed []<span class="typename">int</span>, n <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(flowerbed) &lt; <span class="number">1</span> &amp;&amp; n &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(flowerbed) &lt; n {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(flowerbed) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> flowerbed[<span class="number">0</span>] == <span class="number">0</span> &amp;&amp; n == <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> flowerbed {</span><br><span class="line">    <span class="keyword">if</span> flowerbed[index] == <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> index {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">if</span> flowerbed[index+<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">	flowerbed[index] = <span class="number">1</span></span><br><span class="line">	n -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">case</span> <span class="built_in">len</span>(flowerbed) - <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">if</span> flowerbed[index-<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">	flowerbed[index] = <span class="number">1</span></span><br><span class="line">	n -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">if</span> flowerbed[index-<span class="number">1</span>] == <span class="number">0</span> &amp;&amp; flowerbed[index+<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">	flowerbed[index] = <span class="number">1</span></span><br><span class="line">	n -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22"><a id="ID-6d755473-9caf-43be-89ad-c43a041b5421" name="ID-6d755473-9caf-43be-89ad-c43a041b5421"></a><span class="section-number-2">22</span> contains duplicate</h2>
<div class="outline-text-2" id="text-22">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> containsDuplicate(nums []<span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">bool</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    num_M[num] = <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">len</span>(nums) &gt; <span class="built_in">len</span>(num_M)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23"><a id="ID-ace08f3a-dd6f-4c21-a296-19aaa0cdcd93" name="ID-ace08f3a-dd6f-4c21-a296-19aaa0cdcd93"></a><span class="section-number-2">23</span> contains duplicate II</h2>
<div class="outline-text-2" id="text-23">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> containsNearbyDuplicate(nums []<span class="typename">int</span>, k <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">bool</span>)</span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> index &gt; k {</span><br><span class="line">      <span class="built_in">delete</span>(num_M, nums[index-k-<span class="number">1</span>])</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> num_M[num] {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line">    num_M[num] = <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24"><a id="ID-2d415749-6f4d-4c66-89e5-1d473029acdb" name="ID-2d415749-6f4d-4c66-89e5-1d473029acdb"></a><span class="section-number-2">24</span> contains duplicate III</h2>
<div class="outline-text-2" id="text-24">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> abs(x <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> x &lt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> -x</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> getQuot(i, w <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> i &lt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> (i+<span class="number">1</span>)/w - <span class="number">1</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> i / w</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> containsNearbyAlmostDuplicate(nums []<span class="typename">int</span>, k <span class="typename">int</span>, t <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> t &lt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>)</span><br><span class="line">  w := t + <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line"></span><br><span class="line">    quot := getQuot(num, w)</span><br><span class="line">    <span class="keyword">if</span> _, ok := num_M[quot]; ok {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pre_num, ok := num_M[quot-<span class="number">1</span>]; ok &amp;&amp; abs(num-pre_num) &lt; w {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pre_num, ok := num_M[quot+<span class="number">1</span>]; ok &amp;&amp; abs(num-pre_num) &lt; w {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    num_M[quot] = num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> index &gt;= k {</span><br><span class="line">      <span class="built_in">delete</span>(num_M, getQuot(nums[index-k], w))</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-25" class="outline-2">
<h2 id="sec-25"><a id="ID-3e2631da-23df-4faa-a5a6-5c1e392a68d5" name="ID-3e2631da-23df-4faa-a5a6-5c1e392a68d5"></a><span class="section-number-2">25</span> k-diff pairs in an array</h2>
<div class="outline-text-2" id="text-25">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findPairs(nums []<span class="typename">int</span>, k <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  sort.Ints(nums)</span><br><span class="line">  <span class="keyword">var</span> base_index, pair_size <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">for</span> i := base_index + <span class="number">1</span>; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">if</span> nums[i]-nums[base_index] &gt; k {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> nums[i]-nums[base_index] == k {</span><br><span class="line">	pair_size += <span class="number">1</span></span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    old_bi := base_index</span><br><span class="line">    <span class="keyword">for</span> i := base_index + <span class="number">1</span>; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">if</span> nums[i]-nums[base_index] &gt; <span class="number">0</span> {</span><br><span class="line">	base_index = i</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> old_bi == base_index {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> base_index == <span class="built_in">len</span>(nums)-<span class="number">1</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pair_size</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-26" class="outline-2">
<h2 id="sec-26"><a id="ID-0c6a9a83-8b5f-4d23-a97e-f64fa7d4328d" name="ID-0c6a9a83-8b5f-4d23-a97e-f64fa7d4328d"></a><span class="section-number-2">26</span> best time to buy and sell stock II</h2>
<div class="outline-text-2" id="text-26">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxProfit(prices []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> mp, pre_p, buy_p <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> status <span class="typename">string</span> <span class="comment">// buy sell</span></span><br><span class="line">  <span class="keyword">for</span> index, price := <span class="keyword">range</span> prices {</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> {</span><br><span class="line">      pre_p = price</span><br><span class="line">      buy_p = price</span><br><span class="line">      status = <span class="string">"buy"</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> price &gt; pre_p &amp;&amp; status == <span class="string">"sell"</span> {</span><br><span class="line">      buy_p = pre_p</span><br><span class="line">      status = <span class="string">"buy"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pre_p &gt; price &amp;&amp; status == <span class="string">"buy"</span> {</span><br><span class="line">      mp += pre_p - buy_p</span><br><span class="line">      status = <span class="string">"sell"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_p = price</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> pre_p &gt; buy_p &amp;&amp; status == <span class="string">"buy"</span> {</span><br><span class="line">    mp += pre_p - buy_p</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> mp</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-27" class="outline-2">
<h2 id="sec-27"><a id="ID-89cea991-3745-4b96-a8ef-9f65b8655e29" name="ID-89cea991-3745-4b96-a8ef-9f65b8655e29"></a><span class="section-number-2">27</span> <span class="done DONE">DONE</span> maximum subarray</h2>
<div class="outline-text-2" id="text-27">
<ul class="org-ul">
<li>State "DONE"       from "WAITING"    <span class="timestamp-wrapper"><span class="timestamp">[2017-07-18 Tue 23:30]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxSubArray(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  max_sum := nums[<span class="number">0</span>]</span><br><span class="line">  pre_sum := nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; size; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> pre_sum &gt; <span class="number">0</span> {</span><br><span class="line">      pre_sum = nums[i] + pre_sum</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      pre_sum = nums[i]</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> pre_sum &gt; max_sum {</span><br><span class="line">      max_sum = pre_sum</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max_sum</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-28" class="outline-2">
<h2 id="sec-28"><a id="ID-e49e7944-4682-4ad6-8aae-e401f82a2285" name="ID-e49e7944-4682-4ad6-8aae-e401f82a2285"></a><span class="section-number-2">28</span> missing number</h2>
<div class="outline-text-2" id="text-28">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> missingNumber(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> sum <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    sum += num</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">return</span> size*(size+<span class="number">1</span>)/<span class="number">2</span> - sum</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-29" class="outline-2">
<h2 id="sec-29"><a id="ID-a62621a7-3030-4023-8a95-c5b51c1718f5" name="ID-a62621a7-3030-4023-8a95-c5b51c1718f5"></a><span class="section-number-2">29</span> max consecutive ones</h2>
<div class="outline-text-2" id="text-29">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findMaxCntecutiveOnes(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> cnt, max_cnt <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">if</span> cnt &gt; max_cnt {</span><br><span class="line">	max_cnt = cnt</span><br><span class="line">      }</span><br><span class="line">      cnt = <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">1</span> {</span><br><span class="line">      cnt += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> cnt &gt; max_cnt {</span><br><span class="line">    max_cnt = cnt</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max_cnt</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-30" class="outline-2">
<h2 id="sec-30"><a id="ID-01baaeb2-7713-4dd7-bcc2-999218245060" name="ID-01baaeb2-7713-4dd7-bcc2-999218245060"></a><span class="section-number-2">30</span> rotate array</h2>
<div class="outline-text-2" id="text-30">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> reverse(nums []<span class="typename">int</span>) {</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  mid := size / <span class="number">2</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; mid; i += <span class="number">1</span> {</span><br><span class="line">    nums[i], nums[size-i-<span class="number">1</span>] = nums[size-i-<span class="number">1</span>], nums[i]</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> rotate(nums []<span class="typename">int</span>, k <span class="typename">int</span>) {</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">if</span> size == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line">  k = k % size</span><br><span class="line">  reverse(nums[<span class="number">0</span> : size-k])</span><br><span class="line">  reverse(nums[size-k : size])</span><br><span class="line">  reverse(nums)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  arr := []<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>}</span><br><span class="line">  rotate(arr, <span class="number">3</span>)</span><br><span class="line">  fmt.Println(arr)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-31" class="outline-2">
<h2 id="sec-31"><a id="ID-9b380d70-176b-4c1f-b5b3-5de9f6e6a5f0" name="ID-9b380d70-176b-4c1f-b5b3-5de9f6e6a5f0"></a><span class="section-number-2">31</span> find peak element</h2>
<div class="outline-text-2" id="text-31">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findPeakElement(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> pe <span class="typename">int</span></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; size; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">switch</span> i {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">if</span> nums[<span class="number">0</span>] &gt; nums[<span class="number">1</span>] {</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">case</span> size - <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">if</span> nums[size-<span class="number">1</span>] &gt; nums[size-<span class="number">2</span>] {</span><br><span class="line">	<span class="keyword">return</span> size - <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">if</span> nums[i-<span class="number">1</span>] &lt; nums[i] &amp;&amp; nums[i] &gt; nums[i+<span class="number">1</span>] {</span><br><span class="line">	<span class="keyword">return</span> i</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-32" class="outline-2">
<h2 id="sec-32"><a id="ID-94010a20-a154-495e-a24f-314453110e67" name="ID-94010a20-a154-495e-a24f-314453110e67"></a><span class="section-number-2">32</span> maximum product subarray</h2>
<div class="outline-text-2" id="text-32">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> max(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maxProduct(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  maxp_sub_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, size)</span><br><span class="line">  ng_maxp_sub_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, size)</span><br><span class="line">  maxp_sub_arr[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">if</span> maxp_sub_arr[<span class="number">0</span>] &lt; <span class="number">0</span> {</span><br><span class="line">    ng_maxp_sub_arr[<span class="number">0</span>] = maxp_sub_arr[<span class="number">0</span>]</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    ng_maxp_sub_arr[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; size; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[i] == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> maxp_sub_arr[i-<span class="number">1</span>] == <span class="number">0</span> {</span><br><span class="line">      maxp_sub_arr[i] = nums[i]</span><br><span class="line">      <span class="keyword">if</span> nums[i] &lt; <span class="number">0</span> {</span><br><span class="line">	ng_maxp_sub_arr[i] = maxp_sub_arr[i]</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	ng_maxp_sub_arr[i] = <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> {</span><br><span class="line">      maxp_sub_arr[i] = max(nums[i]*maxp_sub_arr[i-<span class="number">1</span>], nums[i])</span><br><span class="line">      ng_maxp_sub_arr[i] = nums[i] * ng_maxp_sub_arr[i-<span class="number">1</span>]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> nums[i] &lt; <span class="number">0</span> {</span><br><span class="line">      maxp_sub_arr[i] = nums[i] * ng_maxp_sub_arr[i-<span class="number">1</span>]</span><br><span class="line">      ng_maxp_sub_arr[i] = min(nums[i]*maxp_sub_arr[i-<span class="number">1</span>], nums[i])</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  maxp := maxp_sub_arr[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> _, subp := <span class="keyword">range</span> maxp_sub_arr {</span><br><span class="line">    <span class="keyword">if</span> subp &gt; maxp {</span><br><span class="line">      maxp = subp</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> maxp</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(maxProduct([]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">3</span>,-<span class="number">2</span>,<span class="number">4</span>,<span class="number">0</span>,-<span class="number">3</span>,-<span class="number">4</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-33" class="outline-2">
<h2 id="sec-33"><a id="ID-ae8200c6-b764-479c-9f7c-a3faee06c76c" name="ID-ae8200c6-b764-479c-9f7c-a3faee06c76c"></a><span class="section-number-2">33</span> minimum size subarray sum</h2>
<div class="outline-text-2" id="text-33">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> minSubArrayLen(s <span class="typename">int</span>, nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sub_sum, msub_arl, sub_arl <span class="typename">int</span></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  msub_arl = size + <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> index, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> sub_sum+num &lt; s {</span><br><span class="line">      sub_sum += num</span><br><span class="line">      sub_arl += <span class="number">1</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sub_sum+num &gt;= s {</span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> sub_arl &lt; <span class="number">1</span> {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	del_num := nums[index-sub_arl]</span><br><span class="line">	sub_sum -= del_num</span><br><span class="line">	sub_arl -= <span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> sub_sum+num &lt; s {</span><br><span class="line">	  sub_sum += num</span><br><span class="line">	  sub_arl += <span class="number">1</span></span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> sub_arl+<span class="number">1</span> &lt; msub_arl {</span><br><span class="line">	msub_arl = sub_arl + <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> msub_arl == size+<span class="number">1</span> {</span><br><span class="line">    msub_arl = <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> msub_arl</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(minSubArrayLen(<span class="number">15</span>, []<span class="typename">int</span>{<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">8</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-34" class="outline-2">
<h2 id="sec-34"><a id="ID-5054147d-6967-4087-9995-3d0b99934c1c" name="ID-5054147d-6967-4087-9995-3d0b99934c1c"></a><span class="section-number-2">34</span> array nesting</h2>
<div class="outline-text-2" id="text-34">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> arrayNesting(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  anl_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> max_anl <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> anl_arr[num] &gt; <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> anl <span class="typename">int</span></span><br><span class="line">    next_num := num</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      anl_arr[next_num] = <span class="number">1</span></span><br><span class="line">      anl += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">      next_num = nums[next_num]</span><br><span class="line">      <span class="keyword">if</span> next_num == num {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> anl &gt; max_anl {</span><br><span class="line">      max_anl = anl</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max_anl</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(arrayNesting([]<span class="typename">int</span>{<span class="number">5</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">2</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-35" class="outline-2">
<h2 id="sec-35"><a id="ID-750b5ff8-538b-4e0f-b55b-a069ac517bed" name="ID-750b5ff8-538b-4e0f-b55b-a069ac517bed"></a><span class="section-number-2">35</span> triangle</h2>
<div class="outline-text-2" id="text-35">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &lt; b {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> minimumTotal(triangle [][]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  pre_nums := triangle[<span class="number">0</span>]</span><br><span class="line">  trg_size := <span class="built_in">len</span>(triangle)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; trg_size; i += <span class="number">1</span> {</span><br><span class="line">    nums := triangle[i]</span><br><span class="line">    n_size := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">for</span> j, _ := <span class="keyword">range</span> nums {</span><br><span class="line">      <span class="keyword">switch</span> j {</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">	nums[<span class="number">0</span>] += pre[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">case</span> n_size - <span class="number">1</span>:</span><br><span class="line">	nums[n_size-<span class="number">1</span>] += pre_nums[n_size-<span class="number">2</span>]</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">	nums[j] += min(pre_nums[j-<span class="number">1</span>], pre_nums[j])</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    pre_nums = nums</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  min_total := pre_nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> pre_nums {</span><br><span class="line">    <span class="keyword">if</span> num &lt; min_total {</span><br><span class="line">      min_total = num</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> min_total</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-36" class="outline-2">
<h2 id="sec-36"><a id="ID-d8ad10e9-7e42-43ea-a9a5-5c2d8a0e54d4" name="ID-d8ad10e9-7e42-43ea-a9a5-5c2d8a0e54d4"></a><span class="section-number-2">36</span> subsets</h2>
<div class="outline-text-2" id="text-36">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> subsets(nums []<span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{[]<span class="typename">int</span>{}}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  sub_sets := subsets(nums[<span class="number">1</span>:])</span><br><span class="line">  sets := sub_sets</span><br><span class="line">  num := nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> _, set := <span class="keyword">range</span> sub_sets {</span><br><span class="line">    nset := <span class="built_in">append</span>([]<span class="typename">int</span>{num}, set...)</span><br><span class="line">    sets = <span class="built_in">append</span>(sets, nset)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sets</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-37" class="outline-2">
<h2 id="sec-37"><a id="ID-270533c8-ac2c-4cc2-b3e5-a8b6caf8316c" name="ID-270533c8-ac2c-4cc2-b3e5-a8b6caf8316c"></a><span class="section-number-2">37</span> subsets II</h2>
<div class="outline-text-2" id="text-37">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> {</span><br><span class="line">  Num   <span class="typename">int</span></span><br><span class="line">  Count <span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> subsetsWithDup(nums []<span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    num_M[num] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  items := <span class="built_in">make</span>([]*Item, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> num, count := <span class="keyword">range</span> num_M {</span><br><span class="line">    item := &amp;Item{</span><br><span class="line">      Num:   num,</span><br><span class="line">      Count: count,</span><br><span class="line">    }</span><br><span class="line">    items = <span class="built_in">append</span>(items, item)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> subsets(items)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> subsetsHelper(item *Item, sub_sets [][]<span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  sets := sub_sets</span><br><span class="line">  <span class="keyword">for</span> _, set := <span class="keyword">range</span> sub_sets {</span><br><span class="line">    <span class="keyword">var</span> _count <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> _count == item.Count {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      set = <span class="built_in">append</span>([]<span class="typename">int</span>{item.Num}, set...)</span><br><span class="line">      sets = <span class="built_in">append</span>(sets, set)</span><br><span class="line">      _count += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> sets</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> subsets(items []*Item) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(items) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{[]<span class="typename">int</span>{}}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> subsetsHelper(items[<span class="number">0</span>], subsets(items[<span class="number">1</span>:]))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-38" class="outline-2">
<h2 id="sec-38"><a id="ID-6d7e99d7-ca10-432b-b77e-9d2c37cab25d" name="ID-6d7e99d7-ca10-432b-b77e-9d2c37cab25d"></a><span class="section-number-2">38</span> search in rotated sorted array</h2>
<div class="outline-text-2" id="text-38">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> search(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  start, end := <span class="number">0</span>, <span class="built_in">len</span>(nums)-<span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> start &lt;= end {</span><br><span class="line">    mid := start + (end-start)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target {</span><br><span class="line">      <span class="keyword">return</span> mid</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> start == end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[start] &lt;= nums[mid] &amp;&amp; (target &lt; nums[start] || nums[mid] &lt; target)) ||</span><br><span class="line">      (nums[mid] &lt;= nums[end] &amp;&amp; (target &gt;= nums[mid] &amp;&amp; nums[end] &gt;= target)) {</span><br><span class="line">      start = mid + <span class="number">1</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[start] &lt;= nums[mid] &amp;&amp; (target &gt;= nums[start] &amp;&amp; nums[mid] &gt;= target)) ||</span><br><span class="line">      (nums[mid] &lt;= nums[end] &amp;&amp; (target &lt; nums[mid] || nums[end] &lt; target)) {</span><br><span class="line">      end = mid - <span class="number">1</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-39" class="outline-2">
<h2 id="sec-39"><a id="ID-13f468b8-2c4a-4d08-949b-f0a1826be40a" name="ID-13f468b8-2c4a-4d08-949b-f0a1826be40a"></a><span class="section-number-2">39</span> search in rotated sorted array II</h2>
<div class="outline-text-2" id="text-39">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> search(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  start, end := <span class="number">0</span>, <span class="built_in">len</span>(nums)-<span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> start &lt;= end {</span><br><span class="line">    <span class="keyword">if</span> nums[start] == nums[end] {</span><br><span class="line">      <span class="keyword">if</span> nums[start] == target {</span><br><span class="line">	<span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      dup_num := nums[start]</span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> start == end || nums[start] != dup_num {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	start++</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> start == end || nums[end] != dup_num {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	end--</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    mid := start + (end-start)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] == target {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> start == end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[start] &lt;= nums[mid] &amp;&amp; (target &lt; nums[start] || nums[mid] &lt; target)) ||</span><br><span class="line">      (nums[mid] &lt;= nums[end] &amp;&amp; (target &gt;= nums[mid] &amp;&amp; nums[end] &gt;= target)) {</span><br><span class="line">      start = mid + <span class="number">1</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[start] &lt;= nums[mid] &amp;&amp; (target &gt;= nums[start] &amp;&amp; nums[mid] &gt;= target)) ||</span><br><span class="line">      (nums[mid] &lt;= nums[end] &amp;&amp; (target &lt; nums[mid] || nums[end] &lt; target)) {</span><br><span class="line">      end = mid - <span class="number">1</span></span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-40" class="outline-2">
<h2 id="sec-40"><a id="ID-090f04ca-1173-404a-9057-1b1456ec67ad" name="ID-090f04ca-1173-404a-9057-1b1456ec67ad"></a><span class="section-number-2">40</span> search a 2d matrix</h2>
<div class="outline-text-2" id="text-40">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> searchMatrix(matrix [][]<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  length := <span class="built_in">len</span>(matrix)</span><br><span class="line">  <span class="keyword">if</span> length &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line">  start, end := <span class="number">0</span>, length-<span class="number">1</span></span><br><span class="line">  width := <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">for</span> start &lt;= end {</span><br><span class="line">    <span class="keyword">if</span> start == end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    mid := start + (end-start)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> matrix[mid][<span class="number">0</span>] &gt; target {</span><br><span class="line">      end = mid - <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> matrix[mid][<span class="number">0</span>] &lt; target {</span><br><span class="line">      <span class="keyword">if</span> target &gt; matrix[mid][width-<span class="number">1</span>] {</span><br><span class="line">	start = mid + <span class="number">1</span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	start = mid</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> binary_search(matrix[start], target) != -<span class="number">1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> binary_search(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  start, end := <span class="number">0</span>, <span class="built_in">len</span>(nums)-<span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> start &lt;= end {</span><br><span class="line">    mid := start + (end-start)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] &gt; target {</span><br><span class="line">      end = mid - <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> nums[mid] &lt; target {</span><br><span class="line">      start = mid + <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> mid</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-41" class="outline-2">
<h2 id="sec-41"><a id="ID-165bd17e-19e9-4142-8e81-09ff10c502f7" name="ID-165bd17e-19e9-4142-8e81-09ff10c502f7"></a><span class="section-number-2">41</span> sort colors</h2>
<div class="outline-text-2" id="text-41">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> sortColors(nums []<span class="typename">int</span>) {</span><br><span class="line">  colors := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    colors[num] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> base <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> color, count := <span class="keyword">range</span> colors {</span><br><span class="line">    <span class="keyword">for</span> count &gt; <span class="number">0</span> {</span><br><span class="line">      nums[base] = color</span><br><span class="line">      count--</span><br><span class="line">      base++</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-42" class="outline-2">
<h2 id="sec-42"><a id="ID-5734d05f-3a6a-46e5-b7df-1e93a580d822" name="ID-5734d05f-3a6a-46e5-b7df-1e93a580d822"></a><span class="section-number-2">42</span> set matrix zeroes</h2>
<div class="outline-text-2" id="text-42">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> setZeroes(matrix [][]<span class="typename">int</span>) {</span><br><span class="line">  length := <span class="built_in">len</span>(matrix)</span><br><span class="line">  <span class="keyword">if</span> length &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line">  width := <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">  row_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">bool</span>, length)</span><br><span class="line">  col_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">bool</span>, width)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i++ {</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; width; j++ {</span><br><span class="line">      <span class="keyword">if</span> matrix[i][j] == <span class="number">0</span> {</span><br><span class="line">	row_M[i] = <span class="constant">true</span></span><br><span class="line">	col_M[j] = <span class="constant">true</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(row_M) &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> row, _ := <span class="keyword">range</span> row_M {</span><br><span class="line">      <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; width; i++ {</span><br><span class="line">	matrix[row][i] = <span class="number">0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(col_M) &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> col, _ := <span class="keyword">range</span> col_M {</span><br><span class="line">      <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i++ {</span><br><span class="line">	matrix[i][col] = <span class="number">0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-43" class="outline-2">
<h2 id="sec-43"><a id="ID-1b34fd51-e1d2-4439-9499-e9616e1ab91d" name="ID-1b34fd51-e1d2-4439-9499-e9616e1ab91d"></a><span class="section-number-2">43</span> unique paths</h2>
<div class="outline-text-2" id="text-43">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> uniquePaths(m <span class="typename">int</span>, n <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> m &lt; <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> m</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  matrix := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">2</span>)</span><br><span class="line">  matrix[<span class="number">0</span>] = <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">  matrix[<span class="number">1</span>] = <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ {</span><br><span class="line">    matrix[<span class="number">0</span>][i] = <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  matrix[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  pre_row := matrix[<span class="number">0</span>]</span><br><span class="line">  curr_row := matrix[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ {</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++ {</span><br><span class="line">      curr_row[j] = curr_row[j-<span class="number">1</span>] + pre_row[j]</span><br><span class="line">    }</span><br><span class="line">    pre_row, curr_row = curr_row, pre_row</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pre_row[n-<span class="number">1</span>]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-44" class="outline-2">
<h2 id="sec-44"><a id="ID-ff13a976-fca6-4df2-aee9-d7d9190e4d13" name="ID-ff13a976-fca6-4df2-aee9-d7d9190e4d13"></a><span class="section-number-2">44</span> unique paths II</h2>
<div class="outline-text-2" id="text-44">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> uniquePathsWithObstacles(obstacleGrid [][]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  m := <span class="built_in">len</span>(obstacleGrid)</span><br><span class="line">  <span class="keyword">if</span> m &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">  n := <span class="built_in">len</span>(obstacleGrid[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][<span class="number">0</span>] == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  matrix := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">2</span>)</span><br><span class="line">  matrix[<span class="number">0</span>] = <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">  matrix[<span class="number">1</span>] = <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ {</span><br><span class="line">    <span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][i] == <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    matrix[<span class="number">0</span>][i] = <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> m &gt; <span class="number">1</span> &amp;&amp; obstacleGrid[<span class="number">1</span>][<span class="number">0</span>] == <span class="number">0</span> {</span><br><span class="line">    matrix[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  pre_row := matrix[<span class="number">0</span>]</span><br><span class="line">  curr_row := matrix[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ {</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; n; j++ {</span><br><span class="line">      <span class="keyword">if</span> obstacleGrid[i][j] == <span class="number">0</span> {</span><br><span class="line">	<span class="keyword">if</span> j &gt; <span class="number">0</span> {</span><br><span class="line">	  curr_row[j] = curr_row[j-<span class="number">1</span>] + pre_row[j]</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  curr_row[j] = pre_row[j]</span><br><span class="line">	}</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	curr_row[j] = <span class="number">0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    pre_row, curr_row = curr_row, pre_row</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pre_row[n-<span class="number">1</span>]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-45" class="outline-2">
<h2 id="sec-45"><a id="ID-c2be23dd-adb0-4b83-9184-58dc843a0a72" name="ID-c2be23dd-adb0-4b83-9184-58dc843a0a72"></a><span class="section-number-2">45</span> spiral matrix</h2>
<div class="outline-text-2" id="text-45">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> spiralOrder(matrix [][]<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  m := <span class="built_in">len</span>(matrix)</span><br><span class="line">  <span class="keyword">if</span> m &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line">  n := <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">  row_start := <span class="number">0</span></span><br><span class="line">  row_end := m</span><br><span class="line">  col_start := <span class="number">0</span></span><br><span class="line">  col_end := n</span><br><span class="line">  so_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>, m*n)</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">for</span> i := col_start; i &lt; col_end; i++ {</span><br><span class="line">      so_arr = <span class="built_in">append</span>(so_arr, matrix[row_start][i])</span><br><span class="line">    }</span><br><span class="line">    row_start += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> row_start == row_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := row_start; i &lt; row_end; i++ {</span><br><span class="line">      so_arr = <span class="built_in">append</span>(so_arr, matrix[i][col_end-<span class="number">1</span>])</span><br><span class="line">    }</span><br><span class="line">    col_end -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> col_start == col_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := col_end - <span class="number">1</span>; i &gt;= col_start; i-- {</span><br><span class="line">      so_arr = <span class="built_in">append</span>(so_arr, matrix[row_end-<span class="number">1</span>][i])</span><br><span class="line">    }</span><br><span class="line">    row_end -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> row_start == row_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := row_end - <span class="number">1</span>; i &gt;= row_start; i-- {</span><br><span class="line">      so_arr = <span class="built_in">append</span>(so_arr, matrix[i][col_start])</span><br><span class="line">    }</span><br><span class="line">    col_start += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> col_start == col_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> so_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-46" class="outline-2">
<h2 id="sec-46"><a id="ID-32644016-6137-4694-82ab-d041d47f9c7d" name="ID-32644016-6137-4694-82ab-d041d47f9c7d"></a><span class="section-number-2">46</span> spiral matrix II</h2>
<div class="outline-text-2" id="text-46">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> generateMatrix(n <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  matrix := <span class="built_in">make</span>([][]<span class="typename">int</span>, n)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ {</span><br><span class="line">    matrix[i] = <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">  }</span><br><span class="line">  row_start := <span class="number">0</span></span><br><span class="line">  row_end := n</span><br><span class="line">  col_start := <span class="number">0</span></span><br><span class="line">  col_end := n</span><br><span class="line">  num := <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">for</span> i := col_start; i &lt; col_end; i++ {</span><br><span class="line">      matrix[row_start][i] = num</span><br><span class="line">      num += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    row_start += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> row_start == row_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := row_start; i &lt; row_end; i++ {</span><br><span class="line">      matrix[i][col_end-<span class="number">1</span>] = num</span><br><span class="line">      num += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    col_end -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> col_start == col_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := col_end - <span class="number">1</span>; i &gt;= col_start; i-- {</span><br><span class="line">      matrix[row_end-<span class="number">1</span>][i] = num</span><br><span class="line">      num += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    row_end -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> row_start == row_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i := row_end - <span class="number">1</span>; i &gt;= row_start; i-- {</span><br><span class="line">      matrix[i][col_start] = num</span><br><span class="line">      num += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    col_start += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> col_start == col_end {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> matrix</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-47" class="outline-2">
<h2 id="sec-47"><a id="ID-9970d21a-0c12-42c9-8594-b0b5b5db0f53" name="ID-9970d21a-0c12-42c9-8594-b0b5b5db0f53"></a><span class="section-number-2">47</span> merge intervals</h2>
<div class="outline-text-2" id="text-47">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> merge(intervals []Interval) []Interval {</span><br><span class="line">  size := <span class="built_in">len</span>(intervals)</span><br><span class="line">  <span class="keyword">if</span> size &lt; <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> intervals</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  sort.Slice(intervals,</span><br><span class="line">    <span class="keyword">func</span>(i, j <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">      <span class="keyword">return</span> intervals[i].Start &lt; intervals[j].Start</span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">  merge_intervals := <span class="built_in">make</span>([]Interval, <span class="number">0</span>)</span><br><span class="line">  interval := intervals[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; size; i++ {</span><br><span class="line">    <span class="keyword">if</span> interval.End &gt;= intervals[i].Start {</span><br><span class="line">      <span class="keyword">if</span> interval.End &lt; intervals[i].End {</span><br><span class="line">	interval.End = intervals[i].End</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      merge_intervals = <span class="built_in">append</span>(merge_intervals, interval)</span><br><span class="line">      interval = intervals[i]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> interval.Start != intervals[<span class="number">0</span>].Start {</span><br><span class="line">    merge_intervals = <span class="built_in">append</span>(merge_intervals, interval)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(merge_intervals) &lt; <span class="number">1</span> {</span><br><span class="line">    merge_intervals = <span class="built_in">append</span>(merge_intervals, interval)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> merge_intervals</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-48" class="outline-2">
<h2 id="sec-48"><a id="ID-c65ca6ba-643c-4ff1-9356-4f76dab393ee" name="ID-c65ca6ba-643c-4ff1-9356-4f76dab393ee"></a><span class="section-number-2">48</span> jump game</h2>
<div class="outline-text-2" id="text-48">
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">canJump</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (nums.size() &lt; <span class="number">2</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[<span class="number">0</span>]==<span class="number">0</span>) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; position_deq;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; position_set;</span><br><span class="line">    position_deq.push_back(<span class="number">0</span>);</span><br><span class="line">    position_set.insert(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span> (position_deq.size()&gt;<span class="number">0</span>) {</span><br><span class="line">      <span class="keyword">int</span> position = position_deq.front();</span><br><span class="line">      position_deq.pop_front();</span><br><span class="line">      <span class="keyword">if</span> (nums[position] &gt; <span class="number">0</span>) {</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nums[position]; i++) {</span><br><span class="line">	  <span class="keyword">int</span> new_position = position +i;</span><br><span class="line">	  <span class="keyword">if</span> (new_position == nums.size()-<span class="number">1</span>) {</span><br><span class="line">	    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	  }</span><br><span class="line"></span><br><span class="line">	  <span class="keyword">if</span> (nums[new_position]&gt;<span class="number">0</span> &amp;&amp;</span><br><span class="line">	      position_set.find(new_position) != position_set.end()) {</span><br><span class="line">	    position_deq.push_back(new_position);</span><br><span class="line">	  }</span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> canJump(nums []<span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">var</span> i, reach <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> ; i &lt; size &amp;&amp; i &lt;= reach; i++ {</span><br><span class="line">    <span class="keyword">if</span> i+nums[i] &gt; reach {</span><br><span class="line">      reach = i + nums[i]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> i == size</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-49" class="outline-2">
<h2 id="sec-49"><a id="ID-acea46fd-e76f-4827-a106-142064ee678e" name="ID-acea46fd-e76f-4827-a106-142064ee678e"></a><span class="section-number-2">49</span> search for a range</h2>
<div class="outline-text-2" id="text-49">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> searchRange(nums []<span class="typename">int</span>, target <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  target_index := binary_search(nums, target)</span><br><span class="line">  <span class="keyword">if</span> target_index == -<span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{-<span class="number">1</span>, -<span class="number">1</span>}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  start_index := target_index</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    s_index := binary_search(nums[:start_index], target)</span><br><span class="line">    <span class="keyword">if</span> s_index == -<span class="number">1</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    start_index = s_index</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  end_index := target_index</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    e_index := binary_search(nums[end_index+<span class="number">1</span>:], target)</span><br><span class="line">    <span class="keyword">if</span> e_index == -<span class="number">1</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    end_index += <span class="number">1</span> + e_index</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> []<span class="typename">int</span>{start_index, end_index}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> binary_search(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  start, end := <span class="number">0</span>, <span class="built_in">len</span>(nums)-<span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> start &lt;= end {</span><br><span class="line">    mid := start + (end-start)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> nums[mid] &gt; target {</span><br><span class="line">      end = mid - <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> nums[mid] &lt; target {</span><br><span class="line">      start = mid + <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> mid</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-50" class="outline-2">
<h2 id="sec-50"><a id="ID-a4ca5347-1970-4b97-8c06-ffed8d7b5b86" name="ID-a4ca5347-1970-4b97-8c06-ffed8d7b5b86"></a><span class="section-number-2">50</span> rotate image</h2>
<div class="outline-text-2" id="text-50">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> rotate(matrix [][]<span class="typename">int</span>) {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(matrix) &lt; <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="built_in">len</span>(matrix)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; size-<span class="number">1</span>; i++ {</span><br><span class="line">    <span class="keyword">var</span> tmp <span class="typename">int</span></span><br><span class="line">    matrix[i][size-<span class="number">1</span>], tmp = matrix[<span class="number">0</span>][i], matrix[i][size-<span class="number">1</span>]</span><br><span class="line">    matrix[size-<span class="number">1</span>][size-i-<span class="number">1</span>], tmp = tmp, matrix[size-<span class="number">1</span>][size-i-<span class="number">1</span>]</span><br><span class="line">    matrix[size-i-<span class="number">1</span>][<span class="number">0</span>], tmp = tmp, matrix[size-i-<span class="number">1</span>][<span class="number">0</span>]</span><br><span class="line">    matrix[<span class="number">0</span>][i] = tmp</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> size-<span class="number">2</span> &gt; <span class="number">0</span> {</span><br><span class="line">    sub_matrix := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>, size-<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; size-<span class="number">1</span>; i++ {</span><br><span class="line">      sub_matrix = <span class="built_in">append</span>(sub_matrix, matrix[i][<span class="number">1</span>:size-<span class="number">1</span>])</span><br><span class="line">    }</span><br><span class="line">    rotate(sub_matrix)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-51" class="outline-2">
<h2 id="sec-51"><a id="ID-860aecd0-4b89-475e-8af6-6b1e5bc782ed" name="ID-860aecd0-4b89-475e-8af6-6b1e5bc782ed"></a><span class="section-number-2">51</span> valid triangle number</h2>
<div class="outline-text-2" id="text-51">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> triangleNumber(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">3</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">  sort.Ints(nums)</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; size-<span class="number">2</span>; i++ {</span><br><span class="line">    <span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; size-<span class="number">1</span>; j++ {</span><br><span class="line">      <span class="keyword">for</span> k := j + <span class="number">1</span>; k &lt; size; k++ {</span><br><span class="line">	<span class="keyword">if</span> nums[i]+nums[j] &lt;= nums[k] {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	count++</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> count</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-52" class="outline-2">
<h2 id="sec-52"><a id="ID-e1f076a6-94de-4e75-9531-79fac8113fa6" name="ID-e1f076a6-94de-4e75-9531-79fac8113fa6"></a><span class="section-number-2">52</span> <span class="done DONE">DONE</span> task scheduler</h2>
<div class="outline-text-2" id="text-52">

<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-03-07 Wed 21:55]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> leastInterval(tasks []<span class="typename">byte</span>, n <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(tasks)</span><br><span class="line">  }</span><br><span class="line">  n += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  task_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">byte</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">for</span> _, tc := <span class="keyword">range</span> tasks {</span><br><span class="line">    task_M[tc] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  task_num_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> _, task_num := <span class="keyword">range</span> task_M {</span><br><span class="line">    task_num_arr = <span class="built_in">append</span>(task_num_arr, task_num)</span><br><span class="line">  }</span><br><span class="line">  sort.Ints(task_num_arr)</span><br><span class="line"></span><br><span class="line">  remain_tc_num := <span class="built_in">len</span>(task_num_arr)</span><br><span class="line">  <span class="keyword">var</span> interval_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> remain_tc_num &lt; <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    fmt.Println(remain_tc_num, interval_num, task_num_arr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> remain_tc_num &lt; n {</span><br><span class="line">      remain_max_tn := task_num_arr[remain_tc_num-<span class="number">1</span>]</span><br><span class="line">      tn_index := remain_tc_num - <span class="number">2</span></span><br><span class="line">      same_max_tn_num := <span class="number">1</span></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> tn_index &lt; <span class="number">0</span> || task_num_arr[tn_index] &lt; remain_max_tn {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	same_max_tn_num += <span class="number">1</span></span><br><span class="line">	tn_index -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">      interval_num += (task_num_arr[remain_tc_num-<span class="number">1</span>]-<span class="number">1</span>)*n + same_max_tn_num</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    min_tn := task_num_arr[remain_tc_num-n]</span><br><span class="line">    tn_index := remain_tc_num - n + <span class="number">1</span></span><br><span class="line">    same_min_tn_num := <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> tn_index == remain_tc_num || task_num_arr[tn_index] &gt; min_tn {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      same_min_tn_num += <span class="number">1</span></span><br><span class="line">      tn_index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    interval_num += (min_tn) * n</span><br><span class="line"></span><br><span class="line">    rs_index := remain_tc_num - n</span><br><span class="line">    ls_index := rs_index + same_min_tn_num</span><br><span class="line">    fmt.Println(rs_index, ls_index, same_min_tn_num)</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> ls_index == remain_tc_num {</span><br><span class="line">	<span class="keyword">for</span> {</span><br><span class="line">	  <span class="keyword">if</span> rs_index == remain_tc_num {</span><br><span class="line">	    <span class="keyword">break</span></span><br><span class="line">	  }</span><br><span class="line">	  task_num_arr[rs_index] = task_num_arr[remain_tc_num-<span class="number">1</span>]</span><br><span class="line">	  rs_index += <span class="number">1</span></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      task_num_arr[rs_index] = task_num_arr[ls_index] - min_tn</span><br><span class="line">      rs_index += <span class="number">1</span></span><br><span class="line">      ls_index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    remain_tc_num -= same_min_tn_num</span><br><span class="line">    sort.Ints(task_num_arr)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> interval_num</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> leastInterval(tasks []<span class="typename">byte</span>, n <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(tasks)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  task_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">byte</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">for</span> _, tc := <span class="keyword">range</span> tasks {</span><br><span class="line">    task_M[tc] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  task_num_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">26</span>)</span><br><span class="line">  tn_index := <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> _, task_num := <span class="keyword">range</span> task_M {</span><br><span class="line">    task_num_arr[tn_index] = task_num</span><br><span class="line">    tn_index += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  sort.Ints(task_num_arr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> interval_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> task_num_arr[<span class="number">25</span>] &lt;= <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> tn_index <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> tn_index &gt; n {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> task_num_arr[<span class="number">25</span>] == <span class="number">0</span> {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> tn_index &lt; <span class="number">26</span> &amp;&amp; task_num_arr[<span class="number">25</span>-tn_index] &gt; <span class="number">0</span> {</span><br><span class="line">	task_num_arr[<span class="number">25</span>-tn_index] -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">      interval_num += <span class="number">1</span></span><br><span class="line">      tn_index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    sort.Ints(task_num_arr)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> interval_num</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(leastInterval([]<span class="typename">byte</span>(<span class="string">"FJJAJFCHJBEGGFACIFJCJCHCADGHBFGCCAEBHJEIFDEACDBDJJCFDDJHAECDJDGGBCEGHIDHFEIBDEIECJGIDEDJCACCDIJBDHHJGBGAHEHEDEJEJCFCJGBCIIHFADGFCCFGCJBBICJJEGHCIGJIGGJGGEGBIJBHDHGFCHCDAGBHHBJCAFJGFEBFEBBAEFEHIICGJDHEFGGDEBFJJJDHEBDJIFCIEHFEGDECFEDEAIEADHGCIEGAHIGGAGFHJDFAGHBJAHBHCGFACCBIGGBCJJIEGDIJICGAJGFJFCFGJIEBGFADAIAEHFDDCBJIJHICDAGFIBEDCJGIHECEIIBBHJCFIDBFHFACAABDCAGBGFEGAAACJHHGCCBCEBEFIEEDIHGFAHBJBGHCCBGCBAEGAJGDCIGFGGAJEIDEAFAHCEDDDHIFFAFAACJDJHIFACBCACCHAJIBAIFJCIBCEEEJGFEIAAEBJHHHAHJEFEFGJDIDIFBJDAADFGBJHFADHCBAJHIFHEGBAFFACDGIIJHHCJGBADBFJDIAFFFFAEBCGHEBBAGDCCEACFGAIFBHJGCBHDAHBHHCAFICFACJIHHFBBDECJFCEAJECAEBAJFJJJHHCIEGGHJJHHHJHAGICECDGGFHDGHAEIDAHGEABFICAFBAIFGIFDABJBDFGJJAACHGFBIIJAHDFEFJBFCGEAGHEHHFIGCCGJBHFHDIBDIFHIDFGGEACAGHGHJFDFGDDCJCJGGGGHHGDEHGCBFIFCHJIAFDCFCEEDDCGBFEJCIEDBBIIIHCECJFGAIJDICGFIEIEFAGEJAIADAGJFEDIAEJICJBFBECEFGEJJIEDFCHHBGDIIFBGCFJBGJHDGCCIIEIBHBIGFHGCJDCEGFCHDACDHBCHIBAJCBDJDHFBAGGJIEFADHDBCAHFGBFHBHIJDHIBCDGAEAAIFIFBBIFAEIABGCFIAFIDHBIIBJFEBBBDCJEJJGDFFFGIHJJGDGF"</span>) <span class="number">8</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-53" class="outline-2">
<h2 id="sec-53"><a id="ID-8e1a9bca-15d4-4066-8f44-1b59059412a1" name="ID-8e1a9bca-15d4-4066-8f44-1b59059412a1"></a><span class="section-number-2">53</span> <span class="done DONE">DONE</span> word search</h2>
<div class="outline-text-2" id="text-53">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2017-07-24 Mon 00:27]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Coord {</span><br><span class="line">  <span class="keyword">int</span> x;</span><br><span class="line">  <span class="keyword">int</span> y;</span><br><span class="line">  <span class="keyword">char</span> letter;</span><br><span class="line">  <span class="keyword">int</span> seq_num;</span><br><span class="line">  <span class="keyword">int</span> dir;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> CoordComp {</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">const</span> Coord&amp; lhs, <span class="keyword">const</span> Coord&amp; rhs)</span> <span class="keyword">const</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (lhs.x&lt;rhs.x) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (lhs.x&gt;rhs.x) {</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> lhs.y&lt;rhs.y;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Solution {</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">exist</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; board, <span class="built_in">string</span> word)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; board.size(); i++) {</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j &lt; board[i].size(); j++) {</span><br><span class="line">	<span class="keyword">if</span> (board[i][j]==word[<span class="number">0</span>]) {</span><br><span class="line">	  Coord coord={i,j,word[<span class="number">0</span>],<span class="number">0</span>,<span class="number">0</span>};</span><br><span class="line">	  <span class="built_in">stack</span>&lt;Coord&gt; coord_stk;</span><br><span class="line">	  <span class="built_in">set</span>&lt;Coord,CoordComp&gt; coord_set;</span><br><span class="line">	  coord_stk.push(coord);</span><br><span class="line">	  coord_set.insert(coord);</span><br><span class="line">	  <span class="keyword">while</span> (coord_stk.size()&gt;<span class="number">0</span>) {</span><br><span class="line">	    Coord coord = coord_stk.top();</span><br><span class="line">	    <span class="keyword">if</span> (coord.seq_num == word.size()-<span class="number">1</span>) {</span><br><span class="line">	      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	    }</span><br><span class="line">	    coord_stk.pop();</span><br><span class="line">	    coord_set.erase(coord);</span><br><span class="line">	    <span class="keyword">int</span> x, y;</span><br><span class="line">	    x = coord.x;</span><br><span class="line">	    y = coord.y;</span><br><span class="line">	    <span class="keyword">for</span> (<span class="keyword">int</span> dir=coord.dir; dir&lt;<span class="number">4</span>; dir++) {</span><br><span class="line">	      <span class="keyword">if</span> (dir == <span class="number">0</span> &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; board[x][y-<span class="number">1</span>]==word[coord.seq_num+<span class="number">1</span>]) {</span><br><span class="line">		coord.dir = <span class="number">1</span>;</span><br><span class="line">		coord_stk.push(coord);</span><br><span class="line">		coord_set.insert(coord);</span><br><span class="line">		Coord next_coord={x,y-<span class="number">1</span>,word[coord.seq_num+<span class="number">1</span>],coord.seq_num+<span class="number">1</span>,<span class="number">0</span>};</span><br><span class="line">		<span class="keyword">if</span> (coord_set.find(next_coord) == coord_set.end()) {</span><br><span class="line">		  coord_stk.push(next_coord);</span><br><span class="line">		  coord_set.insert(next_coord);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	      }</span><br><span class="line"></span><br><span class="line">	      <span class="keyword">if</span> (dir == <span class="number">1</span> &amp;&amp; x &gt; <span class="number">0</span> &amp;&amp; board[x-<span class="number">1</span>][y]==word[coord.seq_num+<span class="number">1</span>]) {</span><br><span class="line">		coord.dir = <span class="number">2</span>;</span><br><span class="line">		coord_stk.push(coord);</span><br><span class="line">		coord_set.insert(coord);</span><br><span class="line">		Coord next_coord={x-<span class="number">1</span>,y,word[coord.seq_num+<span class="number">1</span>],coord.seq_num+<span class="number">1</span>,<span class="number">0</span>};</span><br><span class="line">		<span class="keyword">if</span> (coord_set.find(next_coord) == coord_set.end()) {</span><br><span class="line">		  coord_stk.push(next_coord);</span><br><span class="line">		  coord_set.insert(next_coord);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	      }</span><br><span class="line"></span><br><span class="line">	      <span class="keyword">if</span> (dir == <span class="number">2</span></span><br><span class="line">		  &amp;&amp; y &lt; board[x].size()-<span class="number">1</span></span><br><span class="line">		  &amp;&amp; board[x][y+<span class="number">1</span>]==word[coord.seq_num+<span class="number">1</span>]) {</span><br><span class="line">		coord.dir = <span class="number">3</span>;</span><br><span class="line">		coord_stk.push(coord);</span><br><span class="line">		coord_set.insert(coord);</span><br><span class="line">		Coord next_coord={x,y+<span class="number">1</span>,word[coord.seq_num+<span class="number">1</span>],coord.seq_num+<span class="number">1</span>,<span class="number">0</span>};</span><br><span class="line">		<span class="keyword">if</span> (coord_set.find(next_coord) == coord_set.end()) {</span><br><span class="line">		  coord_stk.push(next_coord);</span><br><span class="line">		  coord_set.insert(next_coord);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	      }</span><br><span class="line"></span><br><span class="line">	      <span class="keyword">if</span> (dir == <span class="number">3</span></span><br><span class="line">		  &amp;&amp; x &lt; board.size()-<span class="number">1</span></span><br><span class="line">		  &amp;&amp; board[x+<span class="number">1</span>][y]==word[coord.seq_num+<span class="number">1</span>]) {</span><br><span class="line">		coord.dir = <span class="number">4</span>;</span><br><span class="line">		coord_stk.push(coord);</span><br><span class="line">		coord_set.insert(coord);</span><br><span class="line">		Coord next_coord={x+<span class="number">1</span>,y,word[coord.seq_num+<span class="number">1</span>],coord.seq_num+<span class="number">1</span>,<span class="number">0</span>};</span><br><span class="line">		<span class="keyword">if</span> (coord_set.find(next_coord) == coord_set.end()) {</span><br><span class="line">		  coord_stk.push(next_coord);</span><br><span class="line">		  coord_set.insert(next_coord);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	      }</span><br><span class="line">	    }</span><br><span class="line">	  }</span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-54" class="outline-2">
<h2 id="sec-54"><a id="ID-3c9fd5f8-caee-494b-9c68-4cd95da3603d" name="ID-3c9fd5f8-caee-494b-9c68-4cd95da3603d"></a><span class="section-number-2">54</span> <span class="todo TODO">TODO</span> next permutation</h2>
<div class="outline-text-2" id="text-54">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> nextPermutation(nums []<span class="typename">int</span>)  {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-55" class="outline-2">
<h2 id="sec-55"><a id="ID-61db87e7-b342-4fda-89f4-b38fffe91cb7" name="ID-61db87e7-b342-4fda-89f4-b38fffe91cb7"></a><span class="section-number-2">55</span> <span class="todo TODO">TODO</span> 4sum</h2>
<div class="outline-text-2" id="text-55">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> fourSum(nums []<span class="typename">int</span>, target <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-56" class="outline-2">
<h2 id="sec-56"><a id="ID-bbc65872-21e9-4af2-8502-34392f0fcc14" name="ID-bbc65872-21e9-4af2-8502-34392f0fcc14"></a><span class="section-number-2">56</span> <span class="todo TODO">TODO</span> 3sum closest</h2>
<div class="outline-text-2" id="text-56">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> threeSumClosest(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-57" class="outline-2">
<h2 id="sec-57"><a id="ID-406bfb92-c083-4822-b269-6226bc252df1" name="ID-406bfb92-c083-4822-b269-6226bc252df1"></a><span class="section-number-2">57</span> <span class="todo TODO">TODO</span> 3sum</h2>
<div class="outline-text-2" id="text-57">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> threeSum(nums []<span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-58" class="outline-2">
<h2 id="sec-58"><a id="ID-087cc323-659d-479e-bb6e-d78d9ac72fc1" name="ID-087cc323-659d-479e-bb6e-d78d9ac72fc1"></a><span class="section-number-2">58</span> <span class="done DONE">DONE</span> Image Smoother</h2>
<div class="outline-text-2" id="text-58">
<ul class="org-ul">
<li>State "DONE"       from "STARTED"    <span class="timestamp-wrapper"><span class="timestamp">[2017-09-20 Wed 10:27]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> imageSmoother(M [][]<span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  m := <span class="built_in">len</span>(M)</span><br><span class="line">  n := <span class="built_in">len</span>(M[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">if</span> m == <span class="number">0</span> || n == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line">  dirs := [][]<span class="typename">int</span>{</span><br><span class="line">    []<span class="typename">int</span>{<span class="number">0</span>, <span class="number">1</span>}, []<span class="typename">int</span>{<span class="number">0</span>, -<span class="number">1</span>}, []<span class="typename">int</span>{<span class="number">1</span>, <span class="number">0</span>}, []<span class="typename">int</span>{-<span class="number">1</span>, <span class="number">0</span>},</span><br><span class="line">    []<span class="typename">int</span>{-<span class="number">1</span>, -<span class="number">1</span>}, []<span class="typename">int</span>{<span class="number">1</span>, <span class="number">1</span>}, []<span class="typename">int</span>{-<span class="number">1</span>, <span class="number">1</span>}, []<span class="typename">int</span>{<span class="number">1</span>, -<span class="number">1</span>}}</span><br><span class="line"></span><br><span class="line">  sM := <span class="built_in">make</span>([][]<span class="typename">int</span>, m)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i += <span class="number">1</span> {</span><br><span class="line">    ar := <span class="built_in">make</span>([]<span class="typename">int</span>, n)</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; n; j += <span class="number">1</span> {</span><br><span class="line">      sum := M[i][j]</span><br><span class="line">      cnt := <span class="number">1</span></span><br><span class="line">      <span class="keyword">for</span> k := <span class="number">0</span>; k &lt; <span class="built_in">len</span>(dirs); k += <span class="number">1</span> {</span><br><span class="line">	x := i + dirs[k][<span class="number">0</span>]</span><br><span class="line">	y := j + dirs[k][<span class="number">1</span>]</span><br><span class="line">	<span class="keyword">if</span> x &lt; <span class="number">0</span> || x &gt; m-<span class="number">1</span> || y &lt; <span class="number">0</span> || y &gt; n-<span class="number">1</span> {</span><br><span class="line">	  <span class="keyword">continue</span></span><br><span class="line">	}</span><br><span class="line">	sum += M[x][y]</span><br><span class="line">	cnt++</span><br><span class="line">      }</span><br><span class="line">      ar[j] = sum / cnt</span><br><span class="line">    }</span><br><span class="line">    sM[i] = ar</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> sM</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-59" class="outline-2">
<h2 id="sec-59"><a id="ID-6f97f643-5cd8-4348-981c-7ce9cf6534c3" name="ID-6f97f643-5cd8-4348-981c-7ce9cf6534c3"></a><span class="section-number-2">59</span> <span class="done DONE">DONE</span> Longest Continuous Increasing Subsequence</h2>
<div class="outline-text-2" id="text-59">

<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2017-09-20 Wed 22:35]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findLengthOfLCIS(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> length, sub_length <span class="typename">int</span></span><br><span class="line">  pre_num := nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    <span class="keyword">if</span> num &gt; pre_num {</span><br><span class="line">      sub_length += <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">if</span> sub_length &gt; length {</span><br><span class="line">	length = sub_length</span><br><span class="line">      }</span><br><span class="line">      sub_length = <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    pre_num = num</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> sub_length &gt; length {</span><br><span class="line">    length = sub_length</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> length</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-60" class="outline-2">
<h2 id="sec-60"><a id="ID-aaffd0cc-52e9-469a-af56-a0070351deb4" name="ID-aaffd0cc-52e9-469a-af56-a0070351deb4"></a><span class="section-number-2">60</span> <span class="done DONE">DONE</span> Non-decreasing Array</h2>
<div class="outline-text-2" id="text-60">
<ul class="org-ul">
<li>State "DONE"       from "STARTED"    <span class="timestamp-wrapper"><span class="timestamp">[2017-09-21 Thu 09:50]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> checkPossibility(nums []<span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">var</span> cnt <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums)-<span class="number">1</span>; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[i] &gt; nums[i+<span class="number">1</span>] {</span><br><span class="line">      <span class="keyword">if</span> i == <span class="number">0</span> || nums[i-<span class="number">1</span>] &lt;= nums[i+<span class="number">1</span>] {</span><br><span class="line">	nums[i] = nums[i+<span class="number">1</span>]</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	nums[i+<span class="number">1</span>] = nums[i]</span><br><span class="line">      }</span><br><span class="line">      cnt += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> cnt &gt; <span class="number">1</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-61" class="outline-2">
<h2 id="sec-61"><a id="ID-8bc8bd71-e497-4a3a-94a5-4eff72eb2f9e" name="ID-8bc8bd71-e497-4a3a-94a5-4eff72eb2f9e"></a><span class="section-number-2">61</span> Find All Duplicates in an Array</h2>
<div class="outline-text-2" id="text-61">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findDuplicates(nums []<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  marks := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    marks[num-<span class="number">1</span>] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  dups_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, mark := <span class="keyword">range</span> marks {</span><br><span class="line">    <span class="keyword">if</span> mark &gt; <span class="number">1</span> {</span><br><span class="line">      dups_nums = <span class="built_in">append</span>(dups_nums, index+<span class="number">1</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> dups_nums</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-62" class="outline-2">
<h2 id="sec-62"><a id="ID-38614b17-69d7-474d-8490-2180978ceea9" name="ID-38614b17-69d7-474d-8490-2180978ceea9"></a><span class="section-number-2">62</span> <span class="todo TODO">TODO</span> Beautiful Arrangement</h2>
<div class="outline-text-2" id="text-62">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> countArrangement(N <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-63" class="outline-2">
<h2 id="sec-63"><a id="ID-38614b17-69d7-474d-8490-2180978ceea9" name="ID-38614b17-69d7-474d-8490-2180978ceea9"></a><span class="section-number-2">63</span> <span class="done DONE">DONE</span> Beautiful Arrangement II</h2>
<div class="outline-text-2" id="text-63">

<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-03-09 Fri 23:05]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> constructArray(n <span class="typename">int</span>, k <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  l, h := <span class="number">1</span>, <span class="number">1</span>+k</span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    arr = <span class="built_in">append</span>(arr, l)</span><br><span class="line">    arr = <span class="built_in">append</span>(arr, h)</span><br><span class="line">    l += <span class="number">1</span></span><br><span class="line">    h -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> l == h {</span><br><span class="line">      arr = <span class="built_in">append</span>(arr, l)</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> l &gt; h {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := k + <span class="number">2</span>; i &lt;= n; i += <span class="number">1</span> {</span><br><span class="line">    arr = <span class="built_in">append</span>(arr, i)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(constructArray(<span class="number">10</span>, <span class="number">1</span>))</span><br><span class="line">  fmt.Println(constructArray(<span class="number">10</span>, <span class="number">3</span>))</span><br><span class="line">  fmt.Println(constructArray(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line">  fmt.Println(constructArray(<span class="number">10</span>, <span class="number">7</span>))</span><br><span class="line">  fmt.Println(constructArray(<span class="number">10</span>, <span class="number">9</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-64" class="outline-2">
<h2 id="sec-64"><a id="ID-f85012a9-ce32-4c45-892f-159db8dea2a6" name="ID-f85012a9-ce32-4c45-892f-159db8dea2a6"></a><span class="section-number-2">64</span> <span class="todo TODO">TODO</span> Degree of an Array</h2>
<div class="outline-text-2" id="text-64">

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findShortestSubArray(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-65" class="outline-2">
<h2 id="sec-65"><a id="ID-2860e1fe-6614-4b2c-af22-5a756a49f457" name="ID-2860e1fe-6614-4b2c-af22-5a756a49f457"></a><span class="section-number-2">65</span> <span class="done DONE">DONE</span> Toeplitz Matrix</h2>
<div class="outline-text-2" id="text-65">

<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-03-07 Wed 22:36]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> isToeplitzMatrix(matrix [][]<span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(matrix) &lt; <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  r_num := <span class="built_in">len</span>(matrix)</span><br><span class="line">  c_num := <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">  r_index := r_num - <span class="number">1</span></span><br><span class="line">  c_index := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> r_index == <span class="number">0</span> &amp;&amp; c_index == c_num {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    rd_index := r_index + <span class="number">1</span></span><br><span class="line">    cd_index := c_index + <span class="number">1</span></span><br><span class="line">    num := matrix[r_index][c_index]</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> rd_index == r_num || cd_index == c_num {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> matrix[rd_index][cd_index] != num {</span><br><span class="line">	<span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      rd_index += <span class="number">1</span></span><br><span class="line">      cd_index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> r_index &gt; <span class="number">0</span> {</span><br><span class="line">      r_index -= <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      c_index += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-66" class="outline-2">
<h2 id="sec-66"><a id="ID-78fb0695-e1a8-4cc8-aa48-692cde197b63" name="ID-78fb0695-e1a8-4cc8-aa48-692cde197b63"></a><span class="section-number-2">66</span> <span class="done DONE">DONE</span> Insert Delete GetRandom O(1) - Duplicates allowed</h2>
<div class="outline-text-2" id="text-66">

<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-03-26 Mon 18:07]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"math/rand"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> RcPair <span class="keyword">struct</span> {</span><br><span class="line">  Val    <span class="typename">int</span></span><br><span class="line">  MIndex <span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> RandomizedCollection <span class="keyword">struct</span> {</span><br><span class="line">  Nums []RcPair</span><br><span class="line">  NumM <span class="keyword">map</span>[<span class="typename">int</span>][]<span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line"><span class="keyword">func</span> Constructor() RandomizedCollection {</span><br><span class="line">  <span class="keyword">return</span> RandomizedCollection{</span><br><span class="line">    Nums: <span class="built_in">make</span>([]RcPair, <span class="number">0</span>),</span><br><span class="line">    NumM: <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>][]<span class="typename">int</span>),</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Inserts a value to the collection. Returns true if the collection did not already contain the specified element. */</span></span><br><span class="line"><span class="keyword">func</span> (this *RandomizedCollection) Insert(val <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  iArr, bExist := this.NumM[val]</span><br><span class="line">  <span class="keyword">if</span> !bExist {</span><br><span class="line">    iArr = <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  }</span><br><span class="line">  rcPair := RcPair{</span><br><span class="line">    Val:    val,</span><br><span class="line">    MIndex: <span class="built_in">len</span>(iArr),</span><br><span class="line">  }</span><br><span class="line">  this.Nums = <span class="built_in">append</span>(this.Nums, rcPair)</span><br><span class="line">  iArr = <span class="built_in">append</span>(iArr, <span class="built_in">len</span>(this.Nums)-<span class="number">1</span>)</span><br><span class="line">  this.NumM[val] = iArr</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> !bExist</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Removes a value from the collection. Returns true if the collection contained the specified element. */</span></span><br><span class="line"><span class="keyword">func</span> (this *RandomizedCollection) Remove(val <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> iArr, bExist := this.NumM[val]; bExist {</span><br><span class="line">    last_p := this.Nums[<span class="built_in">len</span>(this.Nums)-<span class="number">1</span>]</span><br><span class="line">    this.Nums[iArr[<span class="built_in">len</span>(iArr)-<span class="number">1</span>]] = last_p</span><br><span class="line">    this.NumM[last_p.Val][last_p.MIndex] = iArr[<span class="built_in">len</span>(iArr)-<span class="number">1</span>]</span><br><span class="line">    iArr = iArr[:<span class="built_in">len</span>(iArr)-<span class="number">1</span>]</span><br><span class="line">    this.Nums = this.Nums[:<span class="built_in">len</span>(this.Nums)-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(iArr) == <span class="number">0</span> {</span><br><span class="line">      <span class="built_in">delete</span>(this.NumM, val)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      this.NumM[val] = iArr</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Get a random element from the collection. */</span></span><br><span class="line"><span class="keyword">func</span> (this *RandomizedCollection) GetRandom() <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">return</span> this.Nums[rand.Intn(<span class="built_in">len</span>(this.Nums))].Val</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (this *RandomizedCollection) Debug() {</span><br><span class="line">  fmt.Println(this.Nums)</span><br><span class="line">  fmt.Println(this.NumM)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  rc := Constructor()</span><br><span class="line">  rc.Insert(<span class="number">4</span>)</span><br><span class="line">  rc.Insert(<span class="number">3</span>)</span><br><span class="line">  rc.Insert(<span class="number">4</span>)</span><br><span class="line">  rc.Insert(<span class="number">2</span>)</span><br><span class="line">  rc.Insert(<span class="number">4</span>)</span><br><span class="line">  rc.Debug()</span><br><span class="line">  rc.Remove(<span class="number">4</span>)</span><br><span class="line">  rc.Debug()</span><br><span class="line">  rc.Remove(<span class="number">4</span>)</span><br><span class="line">  rc.Remove(<span class="number">4</span>)</span><br><span class="line">  rc.Debug()</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-67" class="outline-2">
<h2 id="sec-67"><a id="ID-b408a3b4-d2fd-4352-86b4-401d9b4bd031" name="ID-b408a3b4-d2fd-4352-86b4-401d9b4bd031"></a><span class="section-number-2">67</span> <span class="done DONE">DONE</span> 第一个缺失的正数</h2>
<div class="outline-text-2" id="text-67">

<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-04-07 Sat 22:41]</span></span>
</li>
</ul>
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> firstMissingPositive(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  length := <span class="built_in">len</span>(nums)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i += <span class="number">1</span> {</span><br><span class="line">    p := nums[i]</span><br><span class="line">    <span class="keyword">for</span> p &gt; <span class="number">0</span> &amp;&amp; p &lt;= length &amp;&amp; nums[p-<span class="number">1</span>] != p {</span><br><span class="line">      x := nums[p-<span class="number">1</span>]</span><br><span class="line">      nums[p-<span class="number">1</span>] = p</span><br><span class="line">      p = x</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[i] != i+<span class="number">1</span> {</span><br><span class="line">      <span class="keyword">return</span> i + <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> length + <span class="number">1</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

Last Updated 2018-04-25 Wed 22:16.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/06/12/go-source-code-block-in-org/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/12/go-source-code-block-in-org/" itemprop="url">在Org-mode中执行Go代码</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-12T00:00:00+08:00">
                2017-06-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/06/12/go-source-code-block-in-org/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/06/12/go-source-code-block-in-org/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
在未使用 <code>org-mode</code> 前，学习和实验Go的特性（例如 <i>context</i> ）的步骤如下：
</p>
<ul class="org-ul">
<li>打开终端
</li>
<li>跳转到学习示例目录下
</li>
<li>创建子目录，例如 <i>context</i> , 然后跳入子目录， 创建 <i>main.go</i> 文件
</li>
<li>编写简单的示例代码
</li>
<li>编译和运行代码示例,若出错调试，返回上个步骤
</li>
</ul>
<p>
上面的过程有些可精简，例如在IDE中，目录跳转可在对话框中完成，代码的编写，编译和运行都可在IDE中完成。
在IDE中流程如下：
</p>
<ul class="org-ul">
<li>在学习示例目录下，创建一个新的示例工程
</li>
<li>编写简单的示例代码, 编译和运行
</li>
</ul>
<p>
在IDE中，整个流程精简了很多。
作为语言使用者，我们可能需要把实验过的示例代码留存，以便能应用在日后的开发中。
上面的两个流程，都会根据实验的包或者语言特性，创建相应的子目录，经过这样的处理，代码示例都聚合到了一起，方便了翻阅和修改。
示例代码的执行结果，大多是直接输出到终端的，你要验证原有示例代码的执行结果，你必须要重新执行代码，因为执行结果并没有留存。
若是这个示例代码，是很久之前的，可能是一年以前的， 这个时候你看到代码的时候，可能会时一脸懵逼。
这个时候你会想，为什么当时没有多留些信息，让我知道，为什么做这个示例，以及这段代码完成了什么功能。
</p>

<p>
<code>Org-mode</code> 简单配置后， 可完美的解决以上问题，代码留存，执行结果留存，文学编程（在编码过程中书写文档）。
</p>
<div class="export">
<p>
&lt;img src="/images/go-babel/go-babel-example.jpeg&rdquo; /&gt;
</p>

</div>
<p>
上图展示了一个子问题的各个部分，问题描述，解决方案，代码，以及代码的执行结果。
子问题对应 <code>Org-mode</code> 中的子目录，然后所有问题都可聚合在一个 <code>Org-mode</code> 文档中。
现在流程可简化为：
</p>
<ul class="org-ul">
<li>跳转到 <code>Org-mode</code> 文档中
</li>
<li>创建子目录，书写解决方案，编码实现
</li>
</ul>
<p>
借助 <code>Org-mode</code> 强大的特性，可很容易的复用代码以及查询。
</p>

<p>
对于 <code>Org-mode</code> 不熟悉的，可先浏览<a href="http://orgmode.org/" rel="external nofollow noopener noreferrer" target="_blank">Org-mode的主页</a>。
<code>Org-mode</code> 通过 <code>Babel</code> 执行代码，对此不熟悉的读者， 可阅读我之前<a href="https://brantou.github.io/2017/04/01/babel-intro/">翻译的文档</a>。
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-7833b08e-6e45-4aa0-bf51-408bf3e8933b" name="ID-7833b08e-6e45-4aa0-bf51-408bf3e8933b"></a><span class="section-number-2">1</span> ob-go</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>Babel</code> 可执行<a href="http://orgmode.org/worg/org-contrib/babel/languages.html" rel="external nofollow noopener noreferrer" target="_blank">多种语言的代码</a>， 但官方的收录的语言支持中，没有Go。
但Go是如此的炙手可热，没有官方支持，肯定也会有先行者实现支持。
感谢 <a href="https://github.com/pope" rel="external nofollow noopener noreferrer" target="_blank">pope</a> 在 <a href="http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-C.html" rel="external nofollow noopener noreferrer" target="_blank">ob-C</a> 实现了ob-go , 实现了 <code>Babel</code> 对于Go的支持。
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><a id="ID-7637b028-9f26-49f5-a833-49b4275f0ab8" name="ID-7637b028-9f26-49f5-a833-49b4275f0ab8"></a><span class="section-number-3">1.1</span> 简介</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a href="https://github.com/pope/ob-go" rel="external nofollow noopener noreferrer" target="_blank">ob-go</a> 使<a href="https://brantou.github.io/2017/04/01/babel-intro/"> Org-babel</a> 可执行Go代码。
与解释语言可直接执行不同，Go需要先编译为可执行文件，然后运行。
Go代码通过 <code>go run</code> 命令编译和运行。
若代码中没有 <code>main</code> 函数，默认情况下，代码会被包裹在简单的 <code>main</code> 函数中。
若 <code>:package</code> 选项没设置并且代码中没有声明 <code>package</code> ， 则 <code>main</code> package 被声明。
示例如下，代码被执行，执行结果被回写到 <code>buffer</code> 中。
</p>
<pre class="example">
#+BEGIN_SRC go :imports "fmt"
  fmt.Println("Hello, org-mode")
#+END_SRC
</pre>

<pre class="example">
#+RESULTS:
: Hello, org-mode
</pre>

<p>
使用快捷键 <code>C-c C-v v</code> 可查看被扩展后的代码。
</p>
<div class="export">
<p>
&lt;img src="/images/go-babel/go-ob-ex.gif&rdquo; /&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><a id="ID-b1f03234-2e94-4371-aa89-325e9cb3eebe" name="ID-b1f03234-2e94-4371-aa89-325e9cb3eebe"></a><span class="section-number-3">1.2</span> Go特定的头参数(Header Arguments)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
除了 <code>Babel</code> 的常规头参数之外，下面是一些Go语言特定的头文件。
</p>
<dl class="org-dl">
<dt> <code>:args</code> </dt><dd>            传递命令行参数到代码编译后的可执行文件，传递超过多参数，需要使用 <code>list</code> 。
</dd>
<dt> <code>:flags</code> </dt><dd>              传递给 <code>go run</code> 或者 <code>go build</code> 的flags(未使用成功)。
</dd>
<dt> <code>:main</code> </dt><dd>             若没设置 <code>no</code> ， 代码将会被包裹在 <code>main</code> 函数中。默认 <code>yes</code> 。
</dd>
<dt> <code>:imports</code> </dt><dd>                为代码提供 <i>imports</i> 的快捷支持。 当处理 <code>main</code> 函数时，应该使用这个选项。 要 <i>import</i> 多个包，请使用 <code>list</code> 。
</dd>
<dt> <code>:package</code> </dt><dd>                设置当前代码块 <i>tangle</i> 时的包名。 需要： <code>:main no</code> 。 若没设置，同时代码中没有包名声明， <code>main</code> 包将被声明。
</dd>
<dt> <code>:var</code> </dt><dd>            <code>ob-go</code> 支持 <code>Babel</code> 的变量，不过目前还不完备。
</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-92d63e46-c8e6-445f-979a-f55e4664a632" name="ID-92d63e46-c8e6-445f-979a-f55e4664a632"></a><span class="section-number-2">2</span> 配置</h2>
<div class="outline-text-2" id="text-2">
<p>
这里假设Go的开发环境已经配置完毕，同时你的机器上的 <code>Emacs</code> 和 <code>Org-mode</code> 都是最近的版本，对于 <code>Babel</code> 都是完整支持的。
由于 <code>ob-go</code> 没有并入 <code>Org-mode</code> 所以需要单独配置。 步骤如下：
</p>
<ul class="org-ul">
<li><code>M-x find-library ob-C</code> , 找到的目录 <code>org-plus-contrib</code>
</li>
<li>新建 <i>ob-go.el</i> , 然后把 <a href="https://github.com/brantou/ob-go/blob/master/ob-go.el" rel="external nofollow noopener noreferrer" target="_blank">github中代码</a> 复制到新建的文件中
</li>
<li>配置 <code>org-babel-load-languages</code>, 如下：
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-babel-do-load-languages&#10; &#39;org-babel-load-languages&#10; &#39;((python . t)&#10;   (C . t)&#10;   (go . t)&#10;   (emacs-lisp . t)&#10;   (shell . t)))</span><br></pre></td></tr></table></figure>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-874bcc5c-b558-4afb-9610-1277a8886b34" name="ID-874bcc5c-b558-4afb-9610-1277a8886b34"></a><span class="section-number-2">3</span> 编码流程</h2>
<div class="outline-text-2" id="text-3">
<p>
最近在 <a href="https://leetcode.com/brantou89/" rel="external nofollow noopener noreferrer" target="_blank">LeetCode</a> 上做编程训练，这里就以解决上面的问题的流程来做说明。
</p>
<ul class="org-ul">
<li>在LeetCode页面上，仔细阅读和理解问题，这里以 <a href="https://leetcode.com/problems/merge-two-binary-trees/" rel="external nofollow noopener noreferrer" target="_blank">Merge Two Binary Trees</a> 为例
</li>
<li>跳转到 <i>leetcode.org</i> ， 创建 <i>merge two binary trees</i> 子目录
</li>
<li>创建名为 <i>merge-two-bt</i> 的Go代码块
</li>
<li>通过快捷键 <code>C-c '= 打开Go语言特定的编辑模式buffer中,然后编码。
    在编码过程完成后， =C-c '= 完成并关闭编辑buffer；或者对自己编辑不满意， =C-c C-k</code> 取消编辑并关闭编辑buffer。
<div class="export">
<p>
&lt;img src="/images/go-babel/go-ob-leetcode.gif&rdquo; /&gt;
</p>

</div>
</li>
<li>把定义好的代码块整合到一起，然后执行(<a href="https://play.golang.org/p/93dZx1kg6l" rel="external nofollow noopener noreferrer" target="_blank">完整代码</a>)。
<div class="export">
<p>
&lt;img src="/images/go-babel/go-ob-leetcode-cmp.gif&rdquo; /&gt;
</p>

</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-431ab3b1-5167-4291-9052-8cfdf59a46b6" name="ID-431ab3b1-5167-4291-9052-8cfdf59a46b6"></a><span class="section-number-2">4</span> 使用示例</h2>
<div class="outline-text-2" id="text-4">
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><a id="ID-02c50881-cbba-4a4b-b4b4-c795a68230a2" name="ID-02c50881-cbba-4a4b-b4b4-c795a68230a2"></a><span class="section-number-3">4.1</span> 导入多个包</h3>
<div class="outline-text-3" id="text-4-1">
<pre class="example">
#+BEGIN_SRC go :imports '("fmt" "time")
  fmt.Println("当前时间：", time.Now())
#+END_SRC
</pre>

<pre class="example">
#+RESULTS:
: 当前时间： 2017-06-12 18:04:20.562355811 +0800 CST
</pre>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><a id="ID-dcfbf20f-9a74-44f0-b9f6-a54161937d0a" name="ID-dcfbf20f-9a74-44f0-b9f6-a54161937d0a"></a><span class="section-number-3">4.2</span> 命令行参数传递</h3>
<div class="outline-text-3" id="text-4-2">
<pre class="example">
#+BEGIN_SRC go :imports '("fmt" "os") :args '("bable" "golang")
  fmt.Println(os.Args[1], os.Args[2])
#+END_SRC
</pre>

<pre class="example">
#+RESULTS:
: bable golang
</pre>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><a id="ID-5062984d-dc0e-413d-a226-6b20e4ea44f0" name="ID-5062984d-dc0e-413d-a226-6b20e4ea44f0"></a><span class="section-number-3">4.3</span> 多入参</h3>
<div class="outline-text-3" id="text-4-3">
<pre class="example">
#+NAME: sum
#+BEGIN_SRC go :imports "fmt" :var a=12 b=13
  fmt.Println(a+b)
#+END_SRC
</pre>

<pre class="example">
#+RESULTS:
: 25
</pre>

<pre class="example">
#+call: sum(a=22,b=23)
</pre>

<pre class="example">
#+RESULTS:
: 45
</pre>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><a id="ID-bb583b9e-9294-4a4b-84d7-24ebfddbfc6d" name="ID-bb583b9e-9294-4a4b-84d7-24ebfddbfc6d"></a><span class="section-number-3">4.4</span> 代码组织</h3>
<div class="outline-text-3" id="text-4-4">
<pre class="example">
#+NAME: min
#+BEGIN_SRC  go
  func min(a, b int) int {
    if a &gt; b {
      return b
    } else {
      return a
    }
  }
#+END_SRC
</pre>

<pre class="example">
#+NAME: get-min
#+BEGIN_SRC go :var a=0 b=0 :imports "fmt" :noweb strip-export
  &lt;&lt;min&gt;&gt;
</pre>

<pre class="example">
  func main() {
    fmt.Println(min(a,b))
  }
#+END_SRC
</pre>

<pre class="example">
#+call: get-min(27, 23)
</pre>

<pre class="example">
#+RESULTS:
: 23
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-0cdd3e45-27dc-448c-a9a8-f62a21ed0a6e" name="ID-0cdd3e45-27dc-448c-a9a8-f62a21ed0a6e"></a><span class="section-number-2">5</span> 总结</h2>
<div class="outline-text-2" id="text-5">
<p>
Org-mode于我来说，就是一个神器，打破了我对一个编辑器的认知，打破了我对一个信息收集器的认知。
Org-mode依托于强大的 <i>Emacs</i>, 借助于 <i>Babel</i>,  使文档和代码无缝的结合在了一起, 一会编码，一会记录，
一会调试，一会执行。 不失为，学习语言，尝试新工具的不二神器。
再来一段Go代码:
</p>
<pre class="example">
#+BEGIN_SRC go :imports "fmt"
  fmt.Println("Goodbye, Gopher!")
#+END_SRC
</pre>
</div>
</div>

Last Updated 2017-12-24 Sun 23:05.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400" alt="Brantou">
            
              <p class="site-author-name" itemprop="name">Brantou</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/brantou" target="_blank" title="GitHub" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/brantou89" target="_blank" title="Twitter" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:brantou89@gmail.com" target="_blank" title="E-Mail" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://www.jianshu.com/u/105d1cd5010c" target="_blank" title="Jianshu" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-heartbeat"></i>Jianshu</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Brantou</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow noopener noreferrer">NexT.Pisces</a> v5.1.3</div>



  <div class="footer-custom">Hosted by <a target="_blank" href="https://pages.github.com" rel="external nofollow noopener noreferrer">GitHub Pages</a></div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	

		<script type="text/javascript">
		_hcwp = window._hcwp || [];

		_hcwp.push({widget:"Bloggerstream", widget_id: 89947, selector:".hc-comment-count", label: "{\%COUNT%\}" });

		

		(function() {
		if("HC_LOAD_INIT" in window)return;
		HC_LOAD_INIT = true;
		var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").substr(0, 2).toLowerCase();
		var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
		hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://w.hypercomments.com/widget/hc/89947/"+lang+"/widget.js";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hcc, s.nextSibling);
		})();
		</script>

	
















  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
