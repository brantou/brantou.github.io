<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta property="og:type" content="website">
<meta property="og:title" content="Brantou的日常">
<meta property="og:url" content="https://brantou.github.io/index.html">
<meta property="og:site_name" content="Brantou的日常">
<meta property="og:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brantou的日常">
<meta name="twitter:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://brantou.github.io/"/>





  <title> Brantou的日常 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Brantou的日常</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">二三事</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/07/org-spreadsheet-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/07/org-spreadsheet-intro/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-07T16:20:49+08:00">
                2017-04-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.html">Org as a spreadsheet system: a short introduction</a>, 由 <b>Bastien</b>  编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-org44221dc" class="outline-2">
<h2 id="org44221dc">序言</h2>
<div class="outline-text-2" id="text-org44221dc">
<p>
这篇简短的教程将介绍使用 <code>Org</code> 作为电子表格系统需要的基础知识。
</p>

<p>
从一个非常简单的表开始:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-right">

<col class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">student</th>
<th scope="col" class="org-right">maths</th>
<th scope="col" class="org-right">physics</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bertrand</td>
<td class="org-right">13</td>
<td class="org-right">09</td>
</tr>

<tr>
<td class="org-left">henri</td>
<td class="org-right">15</td>
<td class="org-right">14</td>
</tr>

<tr>
<td class="org-left">arnold</td>
<td class="org-right">17</td>
<td class="org-right">13</td>
</tr>
</tbody>
</table>

<p>
上面的表格在 <code>Org</code> 文件中的样式:
</p>
<pre class="example">
| student  | maths | physics |
|----------+-------+---------|
| bertrand |    13 |      09 |
| henri    |    15 |      14 |
| arnold   |    17 |      13 |
</pre>

<p>
本教程的目的是阐述如何从上面简单的表生成出如下所示的包含平均每个学生和每个学科的平均分的表：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-right">

<col class="org-right">

<col class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">student</th>
<th scope="col" class="org-right">maths</th>
<th scope="col" class="org-right">physics</th>
<th scope="col" class="org-right">mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bertrand</td>
<td class="org-right">13</td>
<td class="org-right">09</td>
<td class="org-right">11</td>
</tr>

<tr>
<td class="org-left">henri</td>
<td class="org-right">15</td>
<td class="org-right">14</td>
<td class="org-right">14.5</td>
</tr>

<tr>
<td class="org-left">arnold</td>
<td class="org-right">17</td>
<td class="org-right">13</td>
<td class="org-right">15</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">means</td>
<td class="org-right">15</td>
<td class="org-right">12</td>
<td class="org-right">13.5</td>
</tr>
</tbody>
</table>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/04/07/org-spreadsheet-intro/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/06/org-lookups/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/06/org-lookups/" itemprop="url">
                  Org tutorial on table lookup functions
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T00:00:00+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<div id="outline-container-org83dd10c" class="outline-2">
<h2 id="org83dd10c">Introduction</h2>
<div class="outline-text-2" id="text-org83dd10c">
<p>
Org provides three different functions for performing searches and
data dependent calculations in tables. These functions can, among
other things, be used to implement associative arrays, count
matching cells, rank results, or group data. The following examples
will hopefully help you in getting started with these functions.
</p>
</div>
</div>

<div id="outline-container-orgc7c27af" class="outline-2">
<h2 id="orgc7c27af">Associative array with unique keys</h2>
<div class="outline-text-2" id="text-orgc7c27af">
<p>
The most straightforward use of lookups is to treat part of an org
table as an associative array: a key can be used to look up a
corresponding value.
</p>

<p>
Say you are taking a trip to Scandinavia, and you want to keep track
of how much money you have spent on the trip. You decide to convert
all sums to euros. Before your trip you write down the following
table of approximate currency rates.
</p>
<pre class="example">
 #+TBLNAME: rates
| currency        | abbreviation | euros |
|-----------------+--------------+-------|
| euro            | eur          |     1 |
| Norwegian krone | nok          |  0.14 |
| Swedish krona   | sek          |  0.12 |
| US dollar       | usd          |  0.77 |
</pre>

<p>
In what follows we will use the function <code>org-lookup-first</code> and the
previous table <code>rates</code> to automatically convert the sums in
different currencies to euros. The signature of function
<code>org-lookup-first</code> looks as follows:
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-lookup-first VAL S-LIST R-LIST &#38;amp;optional PREDICATE)</span><br></pre></td></tr></table></figure>
</div>
<p>
Assuming that <code>PREDICATE</code> is <code>nil</code>, in which case the default
predicate <code>equal</code> is used, this function does a search for the first
instance of <code>VAL</code> in <code>S-LIST</code> and returns the a value from the
corresponding position in <code>R-LIST</code>. In the table below, each sum is
assigned a currency abbreviation; a lookup is done in table <code>rates</code>
above in the second column for the corresponding abbreviation, and
then the corresponding rate is returned from the third column. For
each row only the first four columns need to filled; columns 5 and 6
are calculated automatically. Notice that an error results if the
key is not found: in the last row, an empty key is being searched
for.
</p>

<pre class="example">
|  date | expense          |  sum | currency |   rate |  euros |
|-------+------------------+------+----------+--------+--------|
|  1.3. | flights          |  324 | eur      |      1 |    324 |
|  4.6. | books and maps   |  243 | usd      |   0.77 | 187.11 |
| 30.7. | rental car       | 8300 | sek      |   0.12 |   996. |
|  2.7. | hotel            | 1150 | sek      |   0.12 |   138. |
|  2.7. | lunch            |  190 | sek      |   0.12 |   22.8 |
|  3.7. | fishing licenses | 1400 | nok      |   0.14 |   196. |
|  3.7. | gasoline         |  340 |          | #ERROR | #ERROR |
 #+TBLFM: $5='(org-lookup-first $4 '(remote(rates,@2$2..@>$2)) '(remote(rates,@2$3..@>$3)))::$6=$5*$3
</pre>
</div>
</div>

<div id="outline-container-orgfae2697" class="outline-2">
<h2 id="orgfae2697">Multiple matches with preferred ordering</h2>
<div class="outline-text-2" id="text-orgfae2697">
<p>
A common task for teachers is the assignment of exam grades from
total marks. The starting point for such grading is a table with
grade boundaries. Below is one such table, with the rows in
increasing order of the lower bound required for a particular grade.
</p>

<pre class="example">
 #+TBLNAME: grade-boundaries
| lower bound | grade |
|-------------+-------|
|           0 | F     |
|          10 | D     |
|          20 | C     |
|          30 | B     |
|          40 | A     |
</pre>

<p>
We will use the function <code>org-lookup-last</code> and the previous table
<code>grade-boundaries</code> to assign grades to students based on their
marks. The signature of function <code>org-lookup-last</code> is exactly like
the signature of <code>org-lookup-first</code>:
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-lookup-last VAL S-LIST R-LIST &#38;amp;optional PREDICATE)</span><br></pre></td></tr></table></figure>
</div>
<p>
However, this function does a search for the <i>last</i> match in
<code>S-LIST</code> and returns the a value from the corresponding position in
<code>R-LIST</code>. Here the idea of the lookup used in assigning the grade is
as follows. Say a student's exam result is 33 marks.  We look for
the <i>last</i> row in the table for which the student's marks are greater
than or equal to the lower bound; in this case it is the row with
lower bound 30. The student's grade is the corresponding element from
the second column, in this case a B.
</p>

<p>
Thus, given the number of marks <code>VAL</code> of a student, we find the last
row of the first column of table <code>grade-boundaries</code> for which the
lower bound <code>S</code> fulfils <code>(>= VAL S)</code>. Thus we will use <code>>=</code> as
<code>PREDICATE</code> to perform the matching. Note that <code>VAL</code> and <code>S</code> are
assigned as arguments to the predicate in the order they are in the
signature of <code>org-lookup-last</code>, where <code>VAL</code> precedes <code>S-LIST</code>. The
following table does the conversion from total marks to the final
grade.  Notice the literal interpolation <code>L</code> of table values into
the Elisp formula, which is needed because some values are numbers
and some are symbols.
</p>

<pre class="example">
| student | marks | grade |
|---------+-------+-------|
| X       |    30 | B     |
| Y       |    29 | C     |
| Z       |     5 | F     |
| W       |    55 | A     |
 #+TBLFM: $3='(org-lookup-last $2 '(remote(grade-boundaries,@2$1..@>$1)) '(remote(grade-boundaries,@2$2..@>$2)) '>=);L
</pre>
</div>
</div>

<div id="outline-container-orgd5734dc" class="outline-2">
<h2 id="orgd5734dc">Counting matching cells</h2>
<div class="outline-text-2" id="text-orgd5734dc">
<p>
The function <code>org-lookup-all</code> can not be used by itself in a table
equation, because it returns a list of values. However, powerful
lookup tasks can be performed by combining the function with other
Elisp functions.
</p>

<p>
As a simple example consider counting the number of missing values
in a table. The signature of function <code>org-lookup-all</code> is exactly
like the signatures of the other two lookup functions:
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-lookup-all VAL S-LIST R-LIST &#38;amp;optional PREDICATE)</span><br></pre></td></tr></table></figure>
</div>
<p>
However, this function does a search for the <i>all</i> matches in
<code>S-LIST</code> and returns the all corresponding values from the
corresponding positions in <code>R-LIST</code>. As is the case with
<code>org-lookup-first</code> and <code>org-lookup-last</code>, if <code>R-LIST</code> is <code>nil</code>, then
the corresponding matching values of <code>S-LIST</code> are returned
directly. Notice the use of the <code>E</code> flag to retain empty fields in
the range. Also notice that in this case we are doing the lookup in
a true two-dimensional range, which is thus also possible
</p>

<pre class="example">
| group | round 1 | round 2 |
|-------+---------+---------|
| A     |         |     2.4 |
| B     |     4.7 |      11 |
| C     |         |         |
| D     |       5 |         |
| E     |         |     7.2 |
| F     |     3.2 |     4.3 |
| G     |         |     4.4 |
| H     |         |       8 |
|-------+---------+---------|
| total | missing |       7 |
 #+TBLFM: @>$3='(length(org-lookup-all "" '(@2$2..@-1$3) nil));E
</pre>
</div>
</div>

<div id="outline-container-orgf346868" class="outline-2">
<h2 id="orgf346868">Ranking results</h2>
<div class="outline-text-2" id="text-orgf346868">
<p>
Another example application of <code>org-lookup-all</code> is an automatic
ranking of results. In the table below, a larger total number of
marks is better. Notice that the Elisp expression also
automatically takes care of ties.
</p>

<pre class="example">
| group | marks | rank |
|-------+-------+------|
| A     |    22 |    2 |
| B     |    22 |    2 |
| C     |    14 |    4 |
| D     |    28 |    1 |
| E     |     9 |    5 |
 #+TBLFM: $3='(+ 1 (length (org-lookup-all $2 '(@2$2..@>$2) nil '<)));n <="" pre="">
</)));n></pre></div>
</div>

<div id="outline-container-orgdcb76a7" class="outline-2">
<h2 id="orgdcb76a7">Frequency counts from raw data</h2>
<div class="outline-text-2" id="text-orgdcb76a7">
<p>
A common situation in the analysis of data is the classification
(grouping) of raw data values for, e.g., visualisation. Often this
is done by counting the frequencies of observations within certain
bounds. The function <code>org-lookup-all</code>, combined with other Elisp
functions, can be used to perform this task. This example also shows
how to construct more complicated lookup rules using multiple values
from a table.
</p>

<p>
Consider the following table with different results from different
groups A-I.
</p>
<pre class="example">
 #+TBLNAME: raw-data
| group | result |
|-------+--------|
| A     |    2.3 |
| B     |    4.2 |
| C     |    1.1 |
| D     |    3.6 |
| E     |    4.5 |
| F     |    2.4 |
| G     |    1.0 |
| H     |    2.3 |
| I     |    2.8 |
</pre>

<p>
We will classify the results into different, mutually exclusive
classes. For example, the observations that will belong to the first
class are in the interval <code>[1, 1.9]</code> (endpoints included). In order
to perform this classification, we define the following two-place
predicate function <code>in-interval</code>. Notice that the first parameter of
this function is a pair whose first element is the lower bound and
second member the upper bound of the interval.
</p>

<pre class="example">
#+BEGIN_SRC emacs-lisp
  (defun in-interval (bounds el)
    (and (>= el (car bounds)) (<= el="" (cadr="" bounds))))="" #+end_src="" <="" pre="">

<pre class="example">
#+RESULTS:
: in-interval
</pre>

<p>
Using this predicate function, we can construct a table with class
boundaries and corresponding frequencies. Note that the first
argument to the function <code>org-lookup-all</code>, which is then passed over
as the first argument to the predicate <code>in-interval</code>, is the pair of
bounds.
</p>

<pre class="example">
| lower bound | upper bound | frequency |
|-------------+-------------+-----------|
|           1 |         1.9 |         2 |
|           2 |         2.9 |         4 |
|           3 |         3.9 |         1 |
|           4 |         4.9 |         2 |
 #+TBLFM: $3='(length (org-lookup-all '($1 $2) '(remote(raw-data,@2$2..@>$2)) nil 'in-interval));N
</pre>
</=></pre></div>
</div>
<div id="outline-container-org7653fae" class="outline-2">
<h2 id="org7653fae">Conclusion</h2>
<div class="outline-text-2" id="text-org7653fae">
<p>
The org lookup functions can be used for a large number of different
data-dependent calculations. For example, the following spreadsheet
operations familiar to libreoffice or Excel users can be implemented
using them: <code>HLOOKUP</code>, <code>VLOOKUP</code>, <code>COUNTIF</code>, <code>SUMIF</code> and
<code>FREQUENCY</code>. If you have other interesting examples of the use of
these functions, feel free to send them to the org mailing list and
we will be happy to add them on this page.
</p>
</div>
</div>

Last Updated 2017-04-06 Thu 18:13.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 24.5.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/06/org-spreadsheet-lisp-formulas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/06/org-spreadsheet-lisp-formulas/" itemprop="url">
                  Org as a spreadsheet system: using Emacs lisp as formulas
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T00:00:00+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-orgdd78c2d" class="outline-2">
<h2 id="orgdd78c2d">Introduction</h2>
<div class="outline-text-2" id="text-orgdd78c2d">
<p>
This tutorial explains how to use Emacs Lisp as formulas in Org tables.  If
you want a general tutorial on how to use Org as a spreadsheet system, read
this tutorial.  You can also check the complete Org documentation on this
topic<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>.
</p>
</div>
</div>

<div id="outline-container-org3fc491e" class="outline-2">
<h2 id="org3fc491e">Example 1: manipulate cells</h2>
<div class="outline-text-2" id="text-org3fc491e">
<p>
Here is a simple table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">First name</th>
<th scope="col" class="org-left">Last Name</th>
<th scope="col" class="org-left">Email</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">John</td>
<td class="org-left">Doe</td>
<td class="org-left">john.doe@emacs.edu</td>
</tr>

<tr>
<td class="org-left">Jennie</td>
<td class="org-left">Duh</td>
<td class="org-left">jennie.duh@emacs.edu</td>
</tr>
</tbody>
</table>

<p>
You easily notice the pattern <code>[firstname].[lastname]@emacs.edu</code> for the
third column.  Given a first name and a last name, it should be easy to
compute the result for the "Email" column.
</p>

<p>
Okay, let's do it then.  First put your cursor in the third column:
</p>


<div class="figure">
<p><img src="http://orgmode.org/worg/images/bzg/org-spreadsheet-table1.jpg" alt="org-spreadsheet-table1.jpg">
</p>
</div>

<p>
Now type <code>C-c }</code> to display the table's coordinates.
</p>

<p>
For each row, you want to concatenate the content of the first column
(accessed with <code>$1</code>) to a string with a dot (".") to the cell of the second
column (accessed with <code>$2</code>) and to the string "@emacs.edu".  In Emacs Lisp,
you would write this:
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="quoted">'(concat $<span class="number">1</span> <span class="string">"."</span> $<span class="number">2</span> <span class="string">"@emacs.edu"</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
Now copy this formula, type <code>C-c =</code> in the bottom right field to insert a
<i>column formula</i><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> and copy the formula here.  Hitting <code>RET</code> will
immediately insert the result in this field (<code>Jack.Goody@emacs.edu</code>) and
add the <code>#+TBLFM</code> line at the bottom of the table.
</p>

<p>
<b>Caveat</b>: beware of the initial quote: the formula is the <i>expression
itself</i>, not its value.  This expression will only have a meaning when the
<code>$1</code> and <code>$2</code> references will be replaced by the right strings, an the
expression will then by applied as a formula by pressing <code>C-c C-c</code> on
<code>#+TBLFM</code>.
</p>

<p>
So you now have this table:
</p>


<div class="figure">
<p><img src="http://orgmode.org/worg/images/bzg/org-spreadsheet-table2.jpg" alt="org-spreadsheet-table2.jpg">
</p>
</div>

<p>
At the time the formula is evaluated, the references <code>$1</code> and <code>$2</code> are
interpreted and replaced by the values of these cells <i>as strings</i>: you
don't need to enclose <code>$1</code> with quotes ("$1").
</p>

<p>
If you want to force the references (<code>$1</code> and <code>$2</code>) to be interpreted as
numbers, add the flag <code>;N</code> at the end of the Emacs lisp expression.  See
for example this table
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-right">

<col class="org-right">

<col class="org-right">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">First name</th>
<th scope="col" class="org-left">Last Name</th>
<th scope="col" class="org-right">Maths</th>
<th scope="col" class="org-right">French</th>
<th scope="col" class="org-right">Mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">John</td>
<td class="org-left">Doe</td>
<td class="org-right">12</td>
<td class="org-right">16</td>
<td class="org-right">14</td>
</tr>

<tr>
<td class="org-left">Jennie</td>
<td class="org-left">Duh</td>
<td class="org-right">15</td>
<td class="org-right">9</td>
<td class="org-right">12</td>
</tr>
</tbody>
</table>

<p>
where we used this formula for the fifth column:
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5='(/ (+ $3 $4) 2);N</span><br></pre></td></tr></table></figure>
</div>

<p>
As an exercise, try to find Emacs lisp formula for the fifth column in this
table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-right">

<col class="org-right">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">First name</th>
<th scope="col" class="org-left">Last Name</th>
<th scope="col" class="org-right">Maths</th>
<th scope="col" class="org-right">French</th>
<th scope="col" class="org-left">Mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">John</td>
<td class="org-left">Doe</td>
<td class="org-right">12</td>
<td class="org-right">16</td>
<td class="org-left">John: 14</td>
</tr>

<tr>
<td class="org-left">Jennie</td>
<td class="org-left">Duh</td>
<td class="org-right">15</td>
<td class="org-right">9</td>
<td class="org-left">Jennie: 12</td>
</tr>
</tbody>
</table>

<p>
All you have is the values of the first four columns.  (Hint: check the
Emacs lisp functions <code>string-to-number</code> and <code>number-to-string</code>.)
</p>

<p>
<b>Solution</b>: we cannot use the <code>;N</code> flag because it will force
interpretation of the cells as numbers, and if we do so, we will not be
able to access the value of cells in the first row.  So one idea is to
use <code>string-to-number</code> and <code>number-to-string</code> this way:
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5='(concat $1 &#34;: &#34; (number-to-string (/ (+ (string-to-number $3) (string-to-number $4)) 2)))</span><br></pre></td></tr></table></figure>
</div>

<p>
Another idea is to use the <code>;L</code> flag: instead of using interpreting cells
as strings or numbers, it inserts their content literally in the Emacs lisp
expression.  So the formula above can safely be replaced by this more
condensed one:
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5='(concat &#34;$1&#34; &#34;: &#34; (number-to-string (/ (+ $3 $4) 2)));L</span><br></pre></td></tr></table></figure>
</div>

<p>
Note the double-quotes around "$1": that's because inserting a first name
literally would mean "it is an Emacs lisp symbol".  So, when using the <code>;L</code>
flag, adding double-quotes makes sure the reference is interpreted as a
string.
</p>

<p>
We're done!
</p>
</div>
</div>

<div id="outline-container-org11d457b" class="outline-2">
<h2 id="org11d457b">Example 2: manipulating ranges</h2>
<div class="outline-text-2" id="text-org11d457b">
<p>
Suppose now we have this table
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Col1</th>
<th scope="col" class="org-left">Col2</th>
<th scope="col" class="org-left">Col3</th>
<th scope="col" class="org-left">Col4</th>
<th scope="col" class="org-left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">?</td>
<td class="org-left">?</td>
<td class="org-left">in Col1 and Col2 (no duplicates)</td>
<td class="org-left">only in Col1</td>
<td class="org-left">only in Col2</td>
</tr>

<tr>
<td class="org-left">?</td>
<td class="org-left">?</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">&#x2026;</td>
</tr>

<tr>
<td class="org-left">?</td>
<td class="org-left">?</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">&#x2026;</td>
</tr>
</tbody>
</table>

<p>
<code>Col1</code> and <code>Col2</code> contain strings.
</p>

<p>
We want the first cell of the third column to contain a string with all the
strings that are in both <code>Col1</code> and <code>Col2</code>, with no duplicates.  <code>Col4</code>
contains strings that are only in <code>Col1</code> (and not in <code>Col2</code>) whereas <code>Col5</code>
contains strings that are only in <code>Col2</code> (and not in <code>Col1</code>).
</p>

<p>
How to automate this with an Emacs lisp formula?
</p>

<p>
Let's first figure out the result we want for a simple table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Col1</th>
<th scope="col" class="org-left">Col2</th>
<th scope="col" class="org-left">Col3</th>
<th scope="col" class="org-left">Col4</th>
<th scope="col" class="org-left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">a</td>
<td class="org-left">a</td>
<td class="org-left">a b c d</td>
<td class="org-left">c</td>
<td class="org-left">d</td>
</tr>

<tr>
<td class="org-left">a</td>
<td class="org-left">b</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">b</td>
<td class="org-left">a</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">c</td>
<td class="org-left">d</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Now let's get the values of the first column starting from the second row.
</p>

<p>
The "a" on the top left cell can be accessed through the reference
<code>@2$1</code>.  The "c" on the bottom left cell can be accessed through the
reference <code>@5$1</code>.  The range of cells can then be accessed with
<code>@2$1..@5$1</code>.
</p>

<p>
Let's add this range in the first cell of <code>Col3</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Col1</th>
<th scope="col" class="org-left">Col2</th>
<th scope="col" class="org-left">Col3</th>
<th scope="col" class="org-left">Col4</th>
<th scope="col" class="org-left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">a</td>
<td class="org-left">a</td>
<td class="org-left">a a b c</td>
<td class="org-left">c</td>
<td class="org-left">d</td>
</tr>

<tr>
<td class="org-left">a</td>
<td class="org-left">b</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">b</td>
<td class="org-left">a</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">c</td>
<td class="org-left">d</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Here is the formula:
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: @2$3='(mapconcat 'identity (list @2$1..@5$1) &#34; &#34;)</span><br></pre></td></tr></table></figure>
</div>

<p>
How to read it?
</p>

<p>
When interpreted, the range <code>@2$1..@5$1</code> is replaced by the values of the
cells, separated with a space.  So <code>(list @2$1..@5$1)</code> becomes <code>(list "a"
"a" "b" "c")</code> and the whole formula becomes
</p>

<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="quoted">'(mapconcat 'identity (list <span class="string">"a"</span> <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"c"</span>) <span class="string">" "</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
which basically means "Concatenate elements of ("a" "a" "b" "c") and add a
single space between each of them".
</p>

<p>
Let's generalize and say that we don't know how many rows our table
contains.  The range <code>@2$1..@5$1</code> becomes <code>@2$1..@>$1</code> where <code>@></code> means
"the last row" and <code>@>$1</code> "the last row in the first column".
</p>

<p>
Remember: we want the third column to contain a string with all the strings
that are in both <code>Col1</code> and <code>Col2</code>, with no duplicates.  Let's first list
all values from <code>Col1</code> and <code>Col2</code> with <code>(list @2$1..@>$1 @2$2..@>$2)</code>, then
delete duplicates like this <code>(delete-dups (list @2$1..@>$1 @2$2..@>$2))</code>
then put this expression in the one we already have above.
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: @2$3='(mapconcat 'identity (delete-dups (list @2$1..@&#38;gt;$1 @2$2..@&#38;gt;$2)) &#34; &#34;)</span><br></pre></td></tr></table></figure>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Col1</th>
<th scope="col" class="org-left">Col2</th>
<th scope="col" class="org-left">Col3</th>
<th scope="col" class="org-left">Col4</th>
<th scope="col" class="org-left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">a</td>
<td class="org-left">a</td>
<td class="org-left">a b c d</td>
<td class="org-left">?</td>
<td class="org-left">?</td>
</tr>

<tr>
<td class="org-left">a</td>
<td class="org-left">b</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">b</td>
<td class="org-left">a</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">c</td>
<td class="org-left">d</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Okay.  Now that you know how to manipulate ranges, you can replace the "?"
with the right formulas&#x2026;  remember: <code>Col4</code> contains strings that are only
in <code>Col1</code> and not in <code>Col2</code>, whereas <code>Col5</code> contains strings that are only
in <code>Col2</code> and not in <code>Col1</code>.  (Hint: you can write your own functions and
use them in an Emacs lisp formula.)
</p>

<p>
Don't forget that you can edit a table's formulas with by hitting C-c '
anywhere on the table: it will open the formulas editor, which highlights
references that the cursor is on (both in the formulas editor and in the
table).  The formulas editor is really handy when you need to check that
your references are correct.  Also, hitting <code>TAB</code> on a formulas in this
editor will pretty-print the formula, which helps editing a lot !
</p>
</div>
</div>

<div id="outline-container-org25a1060" class="outline-2">
<h2 id="org25a1060">Conclusion</h2>
<div class="outline-text-2" id="text-org25a1060">
<p>
Please check the Org manual for (condensed but accurate and up to date)
information on using Lisp as formulas: see the manual online or as an Info
page.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
If you are reading this tutorial from within Emacs, go to the
spreadsheet section of the manual by clicking on this link:
the spreadsheet.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Column formulas apply to the whole column, whereas Field formulas
only apply to the current field.  Field formulas can be inserted by
pressing <code>C-u C-c =</code> in a field.
</p></div></div>


</div>
</div>
Last Updated 2017-04-07 Fri 16:44.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" target="_blank" rel="external">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" target="_blank" rel="external">Emacs</a> 24.5.1 (<a href="http://orgmode.org" target="_blank" rel="external">Org</a> mode 9.0.5)

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/01/babel-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/01/babel-intro/" itemprop="url">
                  Babel: org-mode的多语言编程环境
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-01T00:00:00+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-contrib/babel/intro.html">Babel: Introduction</a>, 由 <b>Eric Schulte</b> ,  <b>Dan Davison</b>, <b>Tom Dye</b> 编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-org4a722e6" class="outline-2">
<h2 id="introduction"><a id="org4a722e6"></a><span class="section-number-2">1</span> 序言</h2>
<div class="outline-text-2" id="text-introduction">
<p>
<b>Bable</b> 可让许多不同的语言工作一起。
编程语言生活在自然语言的 <code>Org-mode</code> 文档的代码块之中。
一个数据片段可从一个表格传递给一个 <code>Pythoh</code> 代码块，然后可能再转移到一个 <code>R</code> 代码块，
最终以数据块被嵌入段落的中间而终结，或者通过 <code>gnuplot</code> 代码块生成图片嵌入在文档中。
</p>

<p>
通过扩展 <a href="http://orgmode.org/">Org-mode</a>, 使其具有编辑,导出和执行源代码的功能, <b>Babel</b> 将 <code>Org-mode</code> 变成了文学编程和可重复性研究的工具。
</p>

<p>
<b>Babel</b> 通过提供以下特性来增强 <a href="http://orgmode.org/manual/Literal-examples.html">Org-mode对代码代码块的支持</a>:
Babel augments Org-mode support for code blocks by providing:
</p>

<ul class="org-ul">
<li>代码块的交互和执行结果导出</li>
<li>代码块可像函数一样可参数化，引用其他代码块，可被远程调用</li>
<li>拼接，导出源代码到文件支持文学编程。</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/04/01/babel-intro/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/21/just-try/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/21/just-try/" itemprop="url">
                  Org-mode 手册版
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-21T00:00:00+08:00">
                2017-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>
org-mode我用了两年，却未曾深入。
最近两周静下心来，仔仔细细的钻研了一番，深深被这厮震撼到了，作为文档编辑工作，在我的认知范围里，无出其右。
归纳整理于此，以作留存，馈与日后。
</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/21/just-try/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/11/org-syntax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/11/org-syntax/" itemprop="url">
                  Org 语法概览
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-11T00:00:00+08:00">
                2017-03-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>
原文<a href="http://orgmode.org/worg/dev/org-syntax.html">Org Syntax (draft)</a><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>由 <b>Nicolas Goaziou</b> 编辑，维护。本文只做学习之用。
</p>
</blockquote>

<p>
本文档描述和说明被org的解析器和导出器框架使用的语法，当然还有几个对于当前语法的意见和建议。
</p>

<p>
在 <b>Org</b> 语法中核心概念是： 只有 <b>headlines</b>, <b>sections</b>, <b>planning lines</b> 和 <b>property drawers</b> 四种语法结构是上下文无关的<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup><sup>, </sup><sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>；
其他语法结构只能存在于特定 <i>Environments</i> 之中。
</p>

<p>
<i>Environments</i> 从大到小(作用范围的尺度来做分类标准,从最宽到最窄)，大致可分为三类: "Greater element", "Element" 和 "Object"。
<b>Element</b> 被用到了两个类的命名中，Greater 和 non-Greater, 这代表了什么呢？代表了这两类有共通之处，即它们的上下文都会被清除，重新初始化。
</p>

<p>
<b>Paragraph</b> 是最小的语法单元。 定义 <b>Element</b> 的子语法结构和 <b>Paragraph</b> 同级,即不能包含 <b>Paragraph</b> 或者被包含在 <b>Paragraph</b> 中。
一个 <b>Object</b> 可以作为一部分被一个 <b>Element</b> 所包含。 <b>Greater element</b> 的任意部分都可以是一个 <b>Element</b> 。
</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/03/11/org-syntax/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/07/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/07/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-07T00:00:00+08:00">
                2017-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400"
               alt="Brantou" />
          <p class="site-author-name" itemprop="name">Brantou</p>
           
              <p class="site-description motion-element" itemprop="description">The best time to plant a tree was 20 years ago. The second best time is now.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/brantou" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/brantou89" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Brantou</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  





  

  

  

  

</body>
</html>
