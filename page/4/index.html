<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">










  <meta name="baidu-site-verification" content="2NCO1zLkcL">







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|monospace:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Brantou的日常" type="application/atom+xml">






<meta name="description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta property="og:type" content="website">
<meta property="og:title" content="Brantou的日常">
<meta property="og:url" content="https://brantou.github.io/page/4/index.html">
<meta property="og:site_name" content="Brantou的日常">
<meta property="og:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Brantou的日常">
<meta name="twitter:description" content="The best time to plant a tree was 20 years ago. The second best time is now.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://brantou.github.io/page/4/">





  <title>Brantou的日常 - The best time to plant a tree was 20 years ago. The second best time is now.</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-99654689-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a82c2fbb2a57e8b3c01e31a60807a7f6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Brantou的日常</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">二三事</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/09/org-lookups/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/09/org-lookups/" itemprop="url">Org-mode表查找功能的简明教程</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-09T00:00:00+08:00">
                2017-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/09/org-lookups/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/04/09/org-lookups/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-tutorials/org-lookups.html" rel="external nofollow noopener noreferrer" target="_blank">Org tutorial on table lookup functions</a>, 由 <b>Jarmo Hurri</b>  编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">序言</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>Org</code> 提供三个不同的函数，用于在表中执行搜索和数据依赖的计算。
这些函数可以用于实现数组关联，统计匹配单元格，结果排名或分组数据。
以下示例将有助于开始使用这些功能。
</p>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">具有唯一键的关联数组</h2>
<div class="outline-text-2" id="text-2">
<p>
查找最直接的用法是将 <code>Org</code> 表的一部分视为关联数组：一个键可用于查找相应的值。
</p>

<p>
假设你去斯堪的纳维亚，并且想跟踪你花了多少钱在旅途中。 你决定将所有金额转换为欧元。
在行程之前，你请记下大致汇率,如下表所示:
</p>

<pre class="example">
 #+TBLNAME: rates
| currency        | abbreviation | euros |
|-----------------+--------------+-------|
| euro            | eur          |     1 |
| Norwegian krone | nok          |  0.14 |
| Swedish krona   | sek          |  0.12 |
| US dollar       | usd          |  0.77 |
</pre>

<p>
接下来将使用函数 <code>org-lookup-first</code> 和前面的汇率表格来自动将不同货币的金额转换成欧元。
函数 <code>org-lookup-first</code> 的签名如下:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">org-lookup-first</span> VAL S-LIST R-LIST <span class="keyword">&amp;optional</span> PREDICATE)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
假定 <code>PREDICATE</code> 为 <code>nil</code> ，在这种情况下使用默认谓词(<i>predicate</i>) <code>equal</code> ，
则该函数将在 <code>S-LIST</code> 中搜索 <code>VAL</code> 的第一个实例，并从 <code>R-LIST</code> 中的相应位置返回一个值。
在下表中，每笔金额分配了货币缩写; 对于相应的缩写，在汇率表格的第二列中进行查找，然后从第三列返回相应的汇率。
对于每一行只需要填充前四列; 第5列和第6列自动计算产生。
请注意，如果找不到键值，则会出现错误：在最后一行中，空键将被搜索。
</p>
<pre class="example">
|  date | expense          |  sum | currency |   rate |  euros |
|-------+------------------+------+----------+--------+--------|
|  1.3. | flights          |  324 | eur      |      1 |    324 |
|  4.6. | books and maps   |  243 | usd      |   0.77 | 187.11 |
| 30.7. | rental car       | 8300 | sek      |   0.12 |   996. |
|  2.7. | hotel            | 1150 | sek      |   0.12 |   138. |
|  2.7. | lunch            |  190 | sek      |   0.12 |   22.8 |
|  3.7. | fishing licenses | 1400 | nok      |   0.14 |   196. |
|  3.7. | gasoline         |  340 |          | #ERROR | #ERROR |
 #+TBLFM: $5='(org-lookup-first $4 '(remote(rates,@2$2..@&gt;$2)) '(remote(rates,@2$3..@&gt;$3)))::$6=$5*$3
</pre>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">多个匹配优先排序</h2>
<div class="outline-text-2" id="text-3">
<p>
教师的常见任务是从总分中分配考试成绩。
这种分级的起点是具有等级边界的表。
以下是一个这样的表，其中行按照特定等级所需的下限的递增排序。
</p>
<pre class="example">
 #+TBLNAME: grade-boundaries
| lower bound | grade |
|-------------+-------|
|           0 | F     |
|          10 | D     |
|          20 | C     |
|          30 | B     |
|          40 | A     |
</pre>

<p>
使用函数 <code>org-lookup-last</code> 和根据前面的 <code>等级边界</code> 表来为学生分配成绩。
函数 <code>org-lookup-last</code> 的签名与 <code>org-lookup-first</code> 的完全相同:
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-lookup-last VAL S-LIST R-LIST &#38;optional PREDICATE)</span><br></pre></td></tr></table></figure>
</div>

<p>
函数 <code>org-lookup-last</code> 会搜索 <code>S-LIST</code> 中的最后一个匹配项，并从 <code>R-LIST</code> 中的相应位置返回一个值。
用于分配等级的查找思想如下:假定学生的考试成绩是33分。我们寻找学生的 <i>marks</i> 大于或等于下限的表中的最后一行;
在这种情况下，它是下边界的行30。学生的成绩是第二列的相应元素，在这种情况下是B.
</p>

<p>
因此，给定学生的标记数VAL，找到下限S满足 <code>(&gt;= VAL S)</code> 的表等级边界的第一列的最后一行。
因此，我们将使用 <code>&gt;=</code> 作为 <code>PREDICATE</code> 来执行匹配。
注意， <code>VAL</code> 和 <code>S</code> 按照它们在 <code>org-lookup-last</code> 的签名中的顺序被分配给谓词，其中 <code>VAL</code> 在 <code>S-LIST</code> 之前。
下表列出了从总 <i>marks</i> 到最终成绩的转换。
注: 文字插值 <code>L</code> 表示表值的字面值插入到Elisp公式中，这是必须的，因为一些值是数字，一些是符号。
</p>

<pre class="example">
| student | marks | grade |
|---------+-------+-------|
| X       |    30 | B     |
| Y       |    29 | C     |
| Z       |     5 | F     |
| W       |    55 | A     |
 #+TBLFM: $3='(org-lookup-last $2 '(remote(grade-boundaries,@2$1..@&gt;$1)) '(remote(grade-boundaries,@2$2..@&gt;$2)) '&gt;=);L
</pre>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">统计匹配单元格</h2>
<div class="outline-text-2" id="text-4">
<p>
函数 <code>org-lookup-all</code> 不能在表等式中使用自己，因为它返回值列表。
但是，通过将函数与其他 <i>elisp</i> 函数相结合，可执行强大的查找任务。
</p>

<p>
作为一个简单的例子，计算表中缺少值的数量。
函数 <code>org-lookup-all</code> 的签名与其他两个查找函数的签名完全相同：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(org-lookup-all VAL S-LIST R-LIST &#38;optional PREDICATE)</span><br></pre></td></tr></table></figure>
</div>

<p>
数搜索 <code>S-LIST</code> 中的所有匹配项，并从 <code>R-LIST</code> 中的相应位置返回所有相应的值。
与org-lookup-first和org-lookup-last的情况一样，如果 <code>R-LIST</code> 为nil，则直接返回 <code>S-LIST</code> 相应匹配值。
注意使用 <code>E</code> 标志来保留范围内的空字段。 还要注意，在这种情况下，以真正的二维范围来进行查找，这也是可能的
</p>
<pre class="example">
| group | round 1 | round 2 |
|-------+---------+---------|
| A     |         |     2.4 |
| B     |     4.7 |      11 |
| C     |         |         |
| D     |       5 |         |
| E     |         |     7.2 |
| F     |     3.2 |     4.3 |
| G     |         |     4.4 |
| H     |         |       8 |
|-------+---------+---------|
| total | missing |       7 |
 #+TBLFM: @&gt;$3='(length(org-lookup-all "" '(@2$2..@-1$3) nil));E
</pre>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">排序结果</h2>
<div class="outline-text-2" id="text-5">
<p>
<code>org-lookup-all</code> 的另一个示例应用是结果的自动排序。
在下表中，总数越大越好。 请注意，Elisp表达式还自动处理关联关系。
</p>
<pre class="example">
| group | marks | rank |
|-------+-------+------|
| A     |    22 |    2 |
| B     |    22 |    2 |
| C     |    14 |    4 |
| D     |    28 |    1 |
| E     |     9 |    5 |
 #+TBLFM: $3='(+ 1 (length (org-lookup-all $2 '(@2$2..@&gt;$2) nil '&lt;)));N
</pre>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">统计原始数据的频率</h2>
<div class="outline-text-2" id="text-6">
<p>
数据分析中的常见情况是对可视化的原始数据值进行分类（分组）。
通常是通过统计在特定范围内的出现频率来完成的。 可使用函数 <code>org-lookup-all</code> ，结合其他 <i>elisp</i> 函数来执行此任务。
此示例还显示了如何使用表中的多个值构建更复杂的查找规则。
</p>

<p>
考虑下表，不同组A-I的不同结果。
</p>
<pre class="example">
 #+TBLNAME: raw-data
| group | result |
|-------+--------|
| A     |    2.3 |
| B     |    4.2 |
| C     |    1.1 |
| D     |    3.6 |
| E     |    4.5 |
| F     |    2.4 |
| G     |    1.0 |
| H     |    2.3 |
| I     |    2.8 |
</pre>

<p>
将结果分为不同的，并且相斥的类。
例如，属于第一类的值在区间 <code>[1，1.9]</code> （包括端点）中。
为了执行这样的分类，我们定义了以下两参数谓词函数 <code>in-interval</code> 。
请注意，此函数的第一个参数是一对，其第一个元素是下限，第二个成员是该间隔的上限。
</p>
<pre class="example">
#+BEGIN_SRC emacs-lisp
  (defun in-interval (bounds el)
    (and (&gt;= el (car bounds)) (&lt;= el (cadr bounds))))
#+END_SRC
</pre>

<pre class="example">
#+RESULTS:
: in-interval
</pre>

<p>
使用这个谓词函数，我们可以构造一个具有分类边界和相应频率的表。
请注意，函数 <code>org-lookup-all</code> 的第一个参数是作为第一个参数传递给谓词 <code>in-interval</code> 中的第一个参数，是一对边界。
</p>
<pre class="example">
| lower bound | upper bound | frequency |
|-------------+-------------+-----------|
|           1 |         1.9 |         2 |
|           2 |         2.9 |         4 |
|           3 |         3.9 |         1 |
|           4 |         4.9 |         2 |
 #+TBLFM: $3='(length (org-lookup-all '($1 $2) '(remote(raw-data,@2$2..@&gt;$2)) nil 'in-interval));N
</pre>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">结论</h2>
<div class="outline-text-2" id="text-7">
<p>
Org 的 <code>lookup</code> 函数可用于大量不同的数据相关计算。
例如，libreoffice或Excel用户熟悉的以下电子表格操作都可以使用它们来实现： <code>HLOOKUP</code> ， <code>VLOOKUP</code> ， <code>COUNTIF</code> ， <code>SUMIF</code> 和 <code>FREQUENCY</code> 。
</p>
</div>
</div>

Last Updated 2017-05-23 Tue 13:28.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/08/org-spreadsheet-lisp-formulas/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/08/org-spreadsheet-lisp-formulas/" itemprop="url">在Org-mode的电子表格中使用elisp公式</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-08T00:00:00+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/08/org-spreadsheet-lisp-formulas/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/04/08/org-spreadsheet-lisp-formulas/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-lisp-formulas.html" rel="external nofollow noopener noreferrer" target="_blank">Org as a spreadsheet system: using Emacs lisp as formulas</a>, 由 <b>Bastien</b>  编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">序言</h2>
<div class="outline-text-2" id="text-1">
<p>
本教程介绍如何在Org表中使用Emacs Lisp作为公式。
如果想要了解如何使用Org作为电子表格系统的一般教程，请阅读<a href="https://brantou.github.io/2017/04/06/org-spreadsheet-intro/">这个教程</a>。
还可以查看有关此主题的<a href="http://orgmode.org/manual/The-spreadsheet.html#The-spreadsheet" rel="external nofollow noopener noreferrer" target="_blank">完整Org文档</a><sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>。
</p>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">示例 1: 操纵单元格</h2>
<div class="outline-text-2" id="text-2">
<p>
下面是一个简单的表格:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">First name</th>
<th scope="col" class="left">Last Name</th>
<th scope="col" class="left">Email</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">John</td>
<td class="left">Doe</td>
<td class="left">john.doe@emacs.edu</td>
</tr>

<tr>
<td class="left">Jennie</td>
<td class="left">Duh</td>
<td class="left">jennie.duh@emacs.edu</td>
</tr>
</tbody>
</table>

<p>
你会很容易就注意到第三列模式： <code>[firstname].[lastname]@emacs.edu</code> 。
给出 <i>First name</i> 和 <i>Last name</i> ，很容易计算 <i>Email</i> 列的结果。
</p>

<p>
首先将光标放在第三列中:
</p>

<div class="figure">
<p><img src="http://orgmode.org/worg/images/bzg/org-spreadsheet-table1.jpg" alt="org-spreadsheet-table1.jpg">
</p>
</div>

<p>
现在键入 <code>C-c }</code> 显示表的坐标(引用)。
</p>

<p>
对于每一行，需要将第一列（使用 <code>$1</code> 访问）的内容连接到点（"."），然后连接到第二列（使用 <code>$2</code> 访问）的单元格, 最后连接到字符串 "@emacs.edu"。
使用 <i>Emacs Lisp</i> 编写的公式如下所示:
</p>

<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="quoted">'(concat (downcase $<span class="number">1</span>) <span class="string">"."</span> (downcase $<span class="number">2</span>) <span class="string">"@emacs.edu"</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
现在复制这个公式，在右下角的字段中键入 <code>C-c =</code> 来插入列公式<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup>，然后粘贴公式。
点击 <code>RET</code> 将立即将结果插入此单元格（ <code>jack.goody@emacs.edu</code> ），并在表格的底部添加 <code>＃+TBLFM</code> 行。
</p>

<p>
警告：请注意初始引用 ( <i>initial quote</i> ) ：公式是表达式本身 (<i>expression itself</i>) ，而不是其值。
当 <code>$1</code> 和 <code>$2</code> 引用将被正确的字符串替换时，该表达式将只有一个含义，然后通过在 <code>＃+TBLFM</code> 上键入 <code>C-c C-c</code> 来应用该表达式。
</p>

<p>
经过公式计算表格如下:
</p>


<div class="figure">
<p><img src="http://orgmode.org/worg/images/bzg/org-spreadsheet-table2.jpg" alt="org-spreadsheet-table2.jpg">
</p>
</div>

<p>
在执行公式时， <code>$1</code> 和 <code>$2</code> 将被解释并由这些单元格的值替换为字符串：不需要用 ="= 括起 <code>$1</code> 。
</p>

<p>
如果需要强制 <code>$1</code> 和 <code>$2</code> 被解释为数字，请在 <i>Emacs lisp</i> 表达式的末尾添加标志 <code>;N</code> 。 参见下面表格:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="right">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">First name</th>
<th scope="col" class="left">Last Name</th>
<th scope="col" class="right">Maths</th>
<th scope="col" class="right">French</th>
<th scope="col" class="right">Mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">John</td>
<td class="left">Doe</td>
<td class="right">12</td>
<td class="right">16</td>
<td class="right">14</td>
</tr>

<tr>
<td class="left">Jennie</td>
<td class="left">Duh</td>
<td class="right">15</td>
<td class="right">9</td>
<td class="right">12</td>
</tr>
</tbody>
</table>

<p>
使用如下公式计算第五列:
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5=&#39;(/ (+ $3 $4) 2);N</span><br></pre></td></tr></table></figure>
</div>

<p>
作为一个练习，尝试写出下面表第五列的Emacs lisp公式:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="right">

<col class="right">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">First name</th>
<th scope="col" class="left">Last Name</th>
<th scope="col" class="right">Maths</th>
<th scope="col" class="right">French</th>
<th scope="col" class="left">Mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">John</td>
<td class="left">Doe</td>
<td class="right">12</td>
<td class="right">16</td>
<td class="left">John: 14</td>
</tr>

<tr>
<td class="left">Jennie</td>
<td class="left">Duh</td>
<td class="right">15</td>
<td class="right">9</td>
<td class="left">Jennie: 12</td>
</tr>
</tbody>
</table>

<p>
前四列的值是目前已知的，在此基础上构造出第五列。 （提示：参阅 <i>Emacs lisp</i> 函数 <code>string-to-number</code> 和 <code>number-to-string</code> 。）
</p>

<p>
<b>解决方案</b> ：不能使用 <code>;N</code> 标志，因为它会强制将单元格解释为数字，如果这样做，将无法访问第一行单元格的值。
所以一个方案就是使用 <code>string-to-number</code> 和 <code>number-to-string</code>, 如下所示：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5=&#39;(concat $1 &#34;: &#34; (number-to-string (/ (+ (string-to-number $3) (string-to-number $4)) 2)))</span><br></pre></td></tr></table></figure>
</div>

<p>
另一个解决方案是使用 <code>;L</code> 标志：单元格内容不是被直接解释成字符串或数字，而是直接插入到 <i>Emacs lisp</i> 表达式中。
所以上面的公式可以安全地被下面这个更精简的代替：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: $5=&#39;(concat &#34;$1&#34; &#34;: &#34; (number-to-string (/ (+ $3 $4) 2)));L</span><br></pre></td></tr></table></figure>
</div>

<p>
注意 ="$1"= 的双引号：因为在字面上插入 <i>First name</i> 将意味着 "it is an Emacs lisp symbol" 。
所以，当使用 <code>;L</code> 标志时，添加双引号确保引用被解释为一个字符串。
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">示例 2: 操纵行列区间</h2>
<div class="outline-text-2" id="text-3">
<p>
假设有以下表格
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Col1</th>
<th scope="col" class="left">Col2</th>
<th scope="col" class="left">Col3</th>
<th scope="col" class="left">Col4</th>
<th scope="col" class="left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">?</td>
<td class="left">?</td>
<td class="left">in Col1 and Col2 (no duplicates)</td>
<td class="left">only in Col1</td>
<td class="left">only in Col2</td>
</tr>

<tr>
<td class="left">?</td>
<td class="left">?</td>
<td class="left">&#x2026;</td>
<td class="left">&#x2026;</td>
<td class="left">&#x2026;</td>
</tr>

<tr>
<td class="left">?</td>
<td class="left">?</td>
<td class="left">&#x2026;</td>
<td class="left">&#x2026;</td>
<td class="left">&#x2026;</td>
</tr>
</tbody>
</table>

<p>
<code>Col1</code> 和 <code>Col2</code> 包含字符串。
</p>

<p>
第三列的第一个单元格包含一个字符串，这个字符串由 <code>Col1</code> 和 <code>Col2</code> 中的所有字符串去重后组成。
<code>Col4</code> 包含仅在 <code>Col1</code> （不在 <code>Col2</code> ）中的字符串，而 <code>Col5</code> 包含仅在 <code>Col2</code> （不在 <code>Col1</code> ）中的字符串。
</p>

<p>
如何使用Emacs lisp公式来自动计算出结果？
</p>

<p>
首先弄清楚想要的结果:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Col1</th>
<th scope="col" class="left">Col2</th>
<th scope="col" class="left">Col3</th>
<th scope="col" class="left">Col4</th>
<th scope="col" class="left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">a</td>
<td class="left">a</td>
<td class="left">a b c d</td>
<td class="left">c</td>
<td class="left">d</td>
</tr>

<tr>
<td class="left">a</td>
<td class="left">b</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">b</td>
<td class="left">a</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">c</td>
<td class="left">d</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
现在从第二行开始获取第一列的值。
</p>

<p>
可通过引用 <code>@2$1</code> 访问左上角单元格中的“a”。 可通过引用 <code>@5$1</code> 访问左下方单元格上的“c”。 然后可使用 <code>@2$1..@5$1</code> 访问单元格区间内值。
</p>

<p>
将上面获取的区间添加到 <code>Col3</code> 的第一个单元格中:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Col1</th>
<th scope="col" class="left">Col2</th>
<th scope="col" class="left">Col3</th>
<th scope="col" class="left">Col4</th>
<th scope="col" class="left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">a</td>
<td class="left">a</td>
<td class="left">a a b c</td>
<td class="left">c</td>
<td class="left">d</td>
</tr>

<tr>
<td class="left">a</td>
<td class="left">b</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">b</td>
<td class="left">a</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">c</td>
<td class="left">d</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
公式如下:
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: @2$3=&#39;(mapconcat &#39;identity (list @2$1..@5$1) &#34; &#34;)</span><br></pre></td></tr></table></figure>
</div>

<p>
公式要怎么解读呢?
</p>

<p>
解释时，区间 <code>@2$1..@5$1</code> 由单元格的值替换，并用空格分隔。
所以 <code>(list @2$1..@5$1)</code> 变成 <code>(list "a" "a" "b" "c")</code> ，整个公式变成
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="quoted">'(mapconcat 'identity (list <span class="string">"a"</span> <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"c"</span>) <span class="string">" "</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
上面的公式大体意味着的连接 <code>("a" "a" "b" "c")</code> 中元素，并在每个元素之间添加一个空格。
</p>

<p>
把问题更一般话，我很可能不知道表包含多少行。
区间 <code>@2$1..@5$1</code> 变成 <code>@2$1..@&gt;$1</code> 其中 <code>@&gt;</code> 表示“最后一行”， <code>@&gt;$1</code> 表示“第一列的最后一行”。
</p>

<p>
记住：我们希望第三列包含一个字符串，这个字符串由 <code>Col1</code> 和 <code>Col2</code> 中的所有字符串去重后组成。
首先从 <code>Col1</code> 和 <code>Col2</code> 列出所有值 <code>(list =@2$1..@&gt;$1 @2$2..@&gt;$2)</code> ，
然后删除重复项 <code>(delete-dups (list @2$1..@&gt;$1 @2$2..@&gt;$2))</code>, 最后把这个表达式放在上面已有的表达式中。
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: @2$3=&#39;(mapconcat &#39;identity (delete-dups (list @2$1..@&#62;$1 @2$2..@&#62;$2)) &#34; &#34;)</span><br></pre></td></tr></table></figure>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Col1</th>
<th scope="col" class="left">Col2</th>
<th scope="col" class="left">Col3</th>
<th scope="col" class="left">Col4</th>
<th scope="col" class="left">Col5</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">a</td>
<td class="left">a</td>
<td class="left">a b c d</td>
<td class="left">c</td>
<td class="left">d</td>
</tr>

<tr>
<td class="left">a</td>
<td class="left">b</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">b</td>
<td class="left">a</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">c</td>
<td class="left">d</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
好的。 现在你已经知道如何操纵区间，你可以用正确的公式替换 "?"了&#x2026;
记住： <code>Col4</code> 包含仅在 <code>Col1</code> 中而不在 <code>Col2</code> 中的字符串，而 <code>Col5</code> 包含仅在 <code>Col2</code> 中而不在 <code>Col1</code> 中的字符串。
(注：可以编写自己的函数并在 <i>Emacs lisp</i> 公式中使用它们)
</p>

<p>
<code>Col4</code> 和 <code>Col5</code> 的公式如下：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TBLFM: @2$4=&#39;(apply &#39;concat (delete-if (lambda(e) (member e (list @2$2..@&#62;$2))) (list @2$1..@&#62;$1)))&#10;#+TBLFM: @2$5=&#39;(apply &#39;concat (delete-if (lambda(e) (member e (list @2$1..@&#62;$1))) (list @2$2..@&#62;$2)))</span><br></pre></td></tr></table></figure>
</div>

<p>
不要忘记，可以通过在表上的任何位置点击 =C-c '= 来编辑表的公式：
它将打开公式编辑器，并突出显示光标所在的引用（在公式编辑器和表中）。
当需要检查引用是否正确时，公式编辑器非常方便。
此外，在该编辑器中的公式上点击 <code>TAB</code> 将格式化公式，这样更有助于公式编辑！
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">结论</h2>
<div class="outline-text-2" id="text-4">
<p>
请浏览Org手册（精简但准确和最新）使用Lisp作为公式的信息：请参阅<a href="http://orgmode.org/manual/Formula-syntax-for-Lisp.html" rel="external nofollow noopener noreferrer" target="_blank">在线手册</a> 和 <a href="http://orgmode.org/org.html#Formula-syntax-for-Lisp" rel="external nofollow noopener noreferrer" target="_blank">相关信息页</a>。
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
如果在Emacs中阅读本教程，请浏览手册的电子表格部分，点击链接：<a href="http://orgmode.org/org.html#The-spreadsheet" rel="external nofollow noopener noreferrer" target="_blank">电子表格</a>。
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
列公式适用于整个列，而单元格公式仅适用于当前单元格。 可以通过在字段中按 <code>C-u C-c =</code> 来插入单元格公式。
</p></div>


</div>
</div>
Last Updated 2017-05-23 Tue 13:28.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/06/org-spreadsheet-intro/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/06/org-spreadsheet-intro/" itemprop="url">Org-mode的电子表格的简明教程</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T00:00:00+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/06/org-spreadsheet-intro/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/04/06/org-spreadsheet-intro/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.html" rel="external nofollow noopener noreferrer" target="_blank">Org as a spreadsheet system: a short introduction</a>, 由 <b>Bastien</b>  编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">序言</h2>
<div class="outline-text-2" id="text-1">
<p>
这篇简短的教程将介绍使用 <code>Org</code> 作为电子表格系统需要的基础知识。
</p>

<p>
从一个非常简单的表开始:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">student</th>
<th scope="col" class="right">maths</th>
<th scope="col" class="right">physics</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">bertrand</td>
<td class="right">13</td>
<td class="right">09</td>
</tr>

<tr>
<td class="left">henri</td>
<td class="right">15</td>
<td class="right">14</td>
</tr>

<tr>
<td class="left">arnold</td>
<td class="right">17</td>
<td class="right">13</td>
</tr>
</tbody>
</table>

<p>
上面的表格在 <code>Org</code> 文件中的样式:
</p>
<pre class="example">
| student  | maths | physics |
|----------+-------+---------|
| bertrand |    13 |      09 |
| henri    |    15 |      14 |
| arnold   |    17 |      13 |
</pre>

<p>
本教程的目的是阐述如何从上面简单的表生成出如下所示的包含平均每个学生和每个学科的平均分的表：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="right">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">student</th>
<th scope="col" class="right">maths</th>
<th scope="col" class="right">physics</th>
<th scope="col" class="right">mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">bertrand</td>
<td class="right">13</td>
<td class="right">09</td>
<td class="right">11</td>
</tr>

<tr>
<td class="left">henri</td>
<td class="right">15</td>
<td class="right">14</td>
<td class="right">14.5</td>
</tr>

<tr>
<td class="left">arnold</td>
<td class="right">17</td>
<td class="right">13</td>
<td class="right">15</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">means</td>
<td class="right">15</td>
<td class="right">12</td>
<td class="right">13.5</td>
</tr>
</tbody>
</table>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">熟悉引用</h2>
<div class="outline-text-2" id="text-2">
<p>
先从每个学生的平均值开始。
</p>
<pre class="example">
| student  | maths | physics | mean      |
|----------+-------+---------+-----------|
| bertrand |    13 |      09 | [formula] |
| henri    |    15 |      14 |           |
| arnold   |    17 |      13 |           |
</pre>

<p>
在往 <code>[formula]</code> 中插入公式之前，需要知道如何引用 ( <b>refer</b> )一行，一列或一个单元格。
</p>

<p>
了解引用的最简单的方法是当你在一个单元格时，键入 <code>C-c ?</code> 。
</p>

<p>
例如，如果在 <code>[formula]</code> 单元格中， <code>C-c ?</code> 展示给你的信息是： <code>line @2, col $4, ref @2$4 or D2</code> ，
这表示在第四列的第二行上，而这个字段的引用是 <code>@2$4</code> 或 <code>D2</code> 。
</p>

<p>
在任何时刻，如果不清楚行和列，可以随时使用 <code>C-c }</code> 打开引用的可视化网格：
<img src="http://orgmode.org/worg/images/bzg/reference_visualization.jpg" alt="reference_visualization.jpg">
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">第一个公式</h2>
<div class="outline-text-2" id="text-3">
<p>
将光标放在（空） <code>[formula]</code> 单元格中, 然后在此字段中输入 <code>:=vmean（$2..$3）</code> 。
该公式意味着：计算此行中第二（ <code>$2</code> ）到 第三（ <code>$3</code> ）单元格的字段平均值。
如果喜欢其他符号，请输入 <code>:=vmean(B&amp;..C&amp;)</code> &#x2013; 其中 <code>&amp;</code> 字符代表在这一行。
</p>

<p>
在上面键入公式的行中，键入 <code>C-c C-c</code> , 你将观察到两点变化： 1） <code>:=vmean（$2..$3）</code> 已被计算结果代替，2）以 <code>＃+TBLFM</code> 开头的新行已被插入到表的底部。
</p>

<p>
<code>＃+TBLFM</code> 行包含表的所有公式，在手动编辑时应小心。
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">列公式和单元格公式</h2>
<div class="outline-text-2" id="text-4">
<p>
经过上面的操作，表格变成了:
</p>
<pre class="example">
| student  | maths | physics | mean |
|----------+-------+---------+------|
| bertrand |    13 |      09 |   11 |
| henri    |    15 |      14 |      |
| arnold   |    17 |      13 |      |
#+tblfm: @2$4=vmean($2..$3)
</pre>

<p>
但是我们真正想要的是计算“Mean”列中所有单元格的公式。 换句话说，我们真的想要一个列公式，而不是单元格公式。
</p>

<p>
要使用列公式替换当前公式，请返回到已定义的单元格，然后键入 <code>=vmean($2..$3)</code> 。 请注意，与之前插入的唯一区别在于公式以 <code>=</code> 替代前缀 <code>:=</code> 。
完成后，在单元格中执行 <code>C-c C-c</code> ：列公式替换先前公式，这正是我们想要的。
</p>

<p>
一旦执行了上面步骤，该单元格中的值应该与以前相同（即11），现在可以通过键入 <code>C-u C-c *</code> (或者在 <code>#+TBLFM</code> 行键入 <code>C-c C-c</code> ) 重新应用公式来更新此列中的所有单元格。
</p>

<p>
经过上面的步骤，表格如下所示:
</p>
<pre class="example">
| student  | maths | physics | mean |
|----------+-------+---------+------|
| bertrand |    13 |      09 |   11 |
| henri    |    15 |      14 | 14.5 |
| arnold   |    17 |      13 |   15 |
#+tblfm: $4=vmean($2..$3)
</pre>

<p>
由于在 <code>＃+TBLFM</code> 中的单个公式现在适用于整个列，所以它不包含任何对行的引用。 公式以前被应用于 <code>@2$4</code> 单元格，现在它被应用于 <code>$4</code> 列。
</p>

<p>
最后，为每个学科平均值添加一行。 此行包含两个字段公式，每个公式计算同一列中上面单元格的平均值:
</p>
<pre class="example">
| student  | maths | physics | mean |
|----------+-------+---------+------|
| bertrand |    13 |      09 |   11 |
| henri    |    15 |      14 | 14.5 |
| arnold   |    17 |      13 |   15 |
|----------+-------+---------+------|
| means    |    15 |      12 |      |
#+tblfm: $4=vmean($2..$3)::@5$2=vmean(@2$2..@4$2)::@5$3=vmean(@2$3..@4$3)
</pre>

<p>
表格如下所示:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="right">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">student</th>
<th scope="col" class="right">maths</th>
<th scope="col" class="right">physics</th>
<th scope="col" class="right">mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">bertrand</td>
<td class="right">13</td>
<td class="right">09</td>
<td class="right">11</td>
</tr>

<tr>
<td class="left">henri</td>
<td class="right">15</td>
<td class="right">14</td>
<td class="right">14.5</td>
</tr>

<tr>
<td class="left">arnold</td>
<td class="right">17</td>
<td class="right">13</td>
<td class="right">15</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">means</td>
<td class="right">15</td>
<td class="right">12</td>
<td class="right">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">交互的编辑公式</h2>
<div class="outline-text-2" id="text-5">
<p>
我们可通过将公式直接插入到表格单元格的方式来定义它们：在一个字段中键入 <code>=</code> 开始列公式的定义，和键入 <code>:=</code> 开始一个单元格公式的定义。
</p>

<p>
如果你喜欢，可以在 <i>minibuffer</i> 中编辑公式：使用 <code>C-c =</code> 编辑列公式或 <code>C-u C-c =</code> 用于字段公式。
</p>

<p>
但是也可以通过键入 =C-c '= 在专用缓冲区中交互式地编辑公式。 此新缓冲区列出了表的所有公式，并提供编辑引用的功能。
</p>

<p>
当光标在引用上方时，表中的相应字段将突出显示。 很好！ 但可以做的更多：可以使用 <code>S-&lt;left/right/up/down&gt;</code> 键实际选择引用。
</p>


<div class="figure">
<p><img src="http://orgmode.org/worg/images/bzg/formulas_editor.jpg" alt="formulas_editor.jpg">
</p>
</div>

<p>
注：不用担心使用 <code>M-&lt;left/right&gt;</code> 左右移动列或 <code>M-&lt;up/down&gt;</code> 上下移动行会混淆 <code>＃+TBLFM</code> 行中的引用，因为每次移动都会自动更新引用。
</p>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Calc和Elisp公式</h2>
<div class="outline-text-2" id="text-6">
<p>
公式的默认语法是 <i>Calc</i> ，用于进行计算的 <i>GNU Emacs</i> 包。
</p>

<p>
以下是<a href="http://www.delorie.com/gnu/docs/calc/calc_21.html" rel="external nofollow noopener noreferrer" target="_blank">Calc手册 </a>中关于代数式公式的摘录:
</p>
<pre class="example">
Algebraic formulas use the operators `+', `-', `*', `/', and `^'. You
can use parentheses to make the order of evaluation clear. In the
absence of parentheses, `^' is evaluated first, then `*', then `/',
then finally `+' and `-'. For example, the expression

2 + 3*4*5 / 6*7^8 - 9

is equivalent to

2 + ((3*4*5) / (6*(7^8)) - 9
</pre>

<p>
在 <code>Org</code> 表中，可使用引用而不是值来执行计算。
</p>

<p>
但是，如果需要使用 <i>Emacs lisp</i> 代码而不是 <i>Calc</i> ？
</p>

<p>
例如，将每个学生与Pi数字的十进制相关联，具体取决于他们在数学和物理学上的平均数。
</p>

<p>
为此，需要告诉 <code>Org</code> Pi数值的值。 可以通过添加以下行来实现：
</p>
<pre class="example">
#+CONSTANTS: pi=3.14159265358979323846
</pre>
<p>
(不要忘了在 <code>#+CONSTANTS</code> 行上 键入 <code>C-c C-c</code> 以刷新 <i>Local</i> 设置)
</p>

<p>
你定义的 <i>Emacs lisp</i> 公式可能如下所示:
</p>
<pre class="example">
$5='(substring (number-to-string $pi) (round $4) (1+ (round $4)));N
</pre>

<p>
Ahem.  Let's parse this:
</p>

<ul class="org-ul">
<li><code>(substring S A B)</code>: 获取 <code>S</code> 字符串  <code>A</code> 和 <code>B</code> 之间的子串
</li>
<li><code>(number-to-string $pi)</code>:  把常量"Pi"转换成字符串
</li>
<li><code>(round $4)</code>: 获取 <code>$4</code> 四舍五入后整数值
</li>
<li><code>;N</code>: 把当前单元格的值当成整数，而不是字符串
</li>
</ul>

<p>
如果学生的平均数是10，该公式返回的Pi中第十位数字。
</p>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">调试公式</h2>
<div class="outline-text-2" id="text-7">
<p>
现在表格如下所示:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="right">

<col class="right">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Student</th>
<th scope="col" class="right">Maths</th>
<th scope="col" class="right">Physics</th>
<th scope="col" class="right">Mean</th>
<th scope="col" class="right">Pi number</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Bertrand</td>
<td class="right">13</td>
<td class="right">09</td>
<td class="right">11</td>
<td class="right">5</td>
</tr>

<tr>
<td class="left">Henri</td>
<td class="right">15</td>
<td class="right">14</td>
<td class="right">14.5</td>
<td class="right">7</td>
</tr>

<tr>
<td class="left">Arnold</td>
<td class="right">17</td>
<td class="right">13</td>
<td class="right">15</td>
<td class="right">9</td>
</tr>
</tbody>
</table>

<p>
如果你回顾这个表，并试图了解 <i>Emacs Lisp</i> 函数具体完成了那些计算;
这个时候，你会产生疑惑，你可能会想要调试公式，并按步骤一步一步进行计算。
</p>

<p>
在表格的任意地方键入 <code>C-c {</code> 或 在一个单元格中键入 <code>C-c C-c</code> （或 <code>C-u C-c *</code> 在这个表的任何地方）都会打开表格公式调试器。
然后将一个一个地执行公式的计算，并在一个单独的缓冲区显示关于每个公式的计算步骤的细节。
</p>
<pre class="example">
Substitution history of formula
Orig:   '(substring (number-to-string $pi) (round $4) (1+ (round $4)));N
$xyz-&gt;  '(substring (number-to-string 3.14159265358979323846) (round $4) (1+ (round $4)))
@r$c-&gt;  '(substring (number-to-string 3.14159265358979323846) (round $4) (1+ (round $4)))
$1-&gt;    '(substring (number-to-string 3.14159265358979323846) (round 11) (1+ (round 11)))
Result: 5
Format: NONE
Final:  5
</pre>

<p>
一旦调试完成，再次键入 <code>C-c {</code> 关闭调试器。
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">很多, 还有更多</h2>
<div class="outline-text-2" id="text-8">
<p>
使用 <code>Org</code> 作为电子表格系统非常容易上手。
</p>

<p>
本教程只是冰山一叫，你可以做的远不止于此！ 可以使用相对引用，为公式的列和参数定义名称，定义自动重新计算的单元格等。还可以在公式中使用 <i>Emacs lisp</i> （<a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-lisp-formulas.html" rel="external nofollow noopener noreferrer" target="_blank">请阅读本教程</a>）。
</p>

<p>
浏览下 <a href="http://orgmode.org/org.html#Advanced-features" rel="external nofollow noopener noreferrer" target="_blank">Org-mode手册</a> 中的高级功能，它会给你一个更广阔的视角&#x2026;
</p>
</div>
</div>

Last Updated 2017-06-01 Thu 13:40.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/04/01/babel-intro/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/01/babel-intro/" itemprop="url">Babel: org-mode的元编程</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-01T00:00:00+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/01/babel-intro/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/04/01/babel-intro/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
原文<a href="http://orgmode.org/worg/org-contrib/babel/intro.html" rel="external nofollow noopener noreferrer" target="_blank">Babel: Introduction</a>, 由 <b>Eric Schulte</b> ,  <b>Dan Davison</b>, <b>Tom Dye</b> 编辑，维护。本文只做学习之用。
</p>
</blockquote>

<div id="outline-container-introduction" class="outline-2">
<h2 id="introduction"><a id="sec-1" name="sec-1"></a><a id="ID-bee7e406-bb22-498e-a068-f0402cde93d0" name="ID-bee7e406-bb22-498e-a068-f0402cde93d0"></a><span class="section-number-2">1</span> 序言</h2>
<div class="outline-text-2" id="text-introduction">
<p>
<b>Bable</b> 可让许多不同的语言工作一起。
编程语言生活在自然语言的 <code>Org-mode</code> 文档的代码块之中。
一个数据片段可从一个表格传递给一个 <code>Pythoh</code> 代码块，然后可能再转移到一个 <code>R</code> 代码块，
最终以数据块被嵌入段落的中间而终结，或者通过 <code>gnuplot</code> 代码块生成图片嵌入在文档中。
</p>

<p>
通过扩展 <a href="http://orgmode.org/" rel="external nofollow noopener noreferrer" target="_blank">Org-mode</a>, 使其具有编辑,导出和执行源代码的功能, <b>Babel</b> 将 <code>Org-mode</code> 变成了文学编程和可重复性研究的工具。
</p>

<p>
<b>Babel</b> 通过提供以下特性来增强 <a href="http://orgmode.org/manual/Literal-examples.html" rel="external nofollow noopener noreferrer" target="_blank">Org-mode对代码代码块的支持</a>:
Babel augments Org-mode support for code blocks by providing:
</p>

<ul class="org-ul">
<li>代码块的交互和执行结果导出
</li>
<li>代码块可像函数一样可参数化，引用其他代码块，可被远程调用
</li>
<li>拼接，导出源代码到文件支持文学编程。
</li>
</ul>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-108e87f7-8457-4e8f-bf8d-daaf10f80462" name="ID-108e87f7-8457-4e8f-bf8d-daaf10f80462"></a><span class="section-number-2">2</span> 概述</h2>
<div class="outline-text-2" id="text-2">
<p>
<b>Babel</b> 在几个不同的方面提供了新的功能，不同的人可能想在不同的地方开始。
</p>

<dl class="org-dl">
<dt> 在 <code>Org-mode</code> 中使用代码块 </dt><dd>    如果目前你还不知道怎么在 <code>Org-mode</code> 中创建代码块，
或者不清楚怎样在 <code>Org-mode</code> 的缓冲区和语言主模式编辑缓冲区(the language major-mode edit buffer)之间切换，
那么你需要应该看看<a href="http://orgmode.org/manual/Literal-examples.html" rel="external nofollow noopener noreferrer" target="_blank">Org 手册</a>中的相关部分 和 <a href="#source-code-blocks-org">下面的代码块章节</a>, 尝试下，然后赶紧回来。
</dd>
<dt> 执行代码 </dt><dd>    <b>Babel</b> 的核心是能够在 <code>Org-mode</code> 代码块中执行代码，
从其他块和表格获取输入，并输出到更多的块和表。 从<a href="#source-code-execution">源代码执行</a>开始描述。
</dd>
<dt> Literate Programming </dt><dd>    程序员编写的代码，通常以其他方式执行（例如从命令行或将其引入到交互式会话中），
那么对 <b>Babel</b> 的简单介绍就是将代码放在 <code>Org-mode</code> 文件的代码块中，
然后使用 <b>Babel</b> 的 <code>Literate Programming</code> 支持从 <code>Org-mode</code> 文件中扩展提取源代码。
</dd>
</dl>

<p>
所有这些用例以及 <b>Babel</b> 功能的详尽文档都被涵盖在 <b>Org</b> 手册的<a href="http://orgmode.org/manual/Working-With-Source-Code.html#Working-With-Source-Code" rel="external nofollow noopener noreferrer" target="_blank"> 使用源代码</a>中。
</p>
</div>
</div>

<div id="outline-container-getting-started" class="outline-2">
<h2 id="getting-started"><a id="sec-3" name="sec-3"></a><a id="ID-ea65f564-0fc1-45ec-9f01-91125d57560a" name="ID-ea65f564-0fc1-45ec-9f01-91125d57560a"></a><span class="section-number-2">3</span> 初始配置</h2>
<div class="outline-text-2" id="text-getting-started">
<blockquote>
<p>
If you have a working Emacs installation, then getting started with
Babel is a simple process.
</p>

<ol class="org-ol">
<li>If you are running Emacs24 a current version of Org-mode with
Babel is already available by default.  Otherwise, it is strongly
recommended that you update to the latest version of Org-mode by
<a href="http://orgmode.org/worg/org-faq.html#keeping-current-with-Org-mode-development" rel="external nofollow noopener noreferrer" target="_blank">keeping current with Org-mode development</a>.  As of Org-mode 7.0,
Babel is included as part of Org-mode.
</li>

<li>Optionally activate the subset of languages that you will want
to execute with Babel.  See Configure active languages
instructions.  Emacs Lisp is activated by default so this step
can be skipped for now and all <code>emacs-lisp</code> examples will still
work as expected.
</li>

<li>If you have made any changes don&rsquo;t forget to evaluate your
modified .emacs.
</li>
</ol>
</blockquote>
</div>
</div>

<div id="outline-container-source-code-blocks" class="outline-2">
<h2 id="source-code-blocks"><a id="sec-4" name="sec-4"></a><a id="ID-93f23ca9-fef1-4ebe-ae1f-3d68fddd9ea6" name="ID-93f23ca9-fef1-4ebe-ae1f-3d68fddd9ea6"></a><span class="section-number-2">4</span> 代码块</h2>
<div class="outline-text-2" id="text-source-code-blocks">
</div>
<div id="outline-container-source-code-blocks-org" class="outline-3">
<h3 id="source-code-blocks-org"><a id="sec-4-1" name="sec-4-1"></a><a id="ID-63128e9d-e315-491b-b4eb-cd15aec54a69" name="ID-63128e9d-e315-491b-b4eb-cd15aec54a69"></a><span class="section-number-3">4.1</span> 代码块在 <code>Org-mode</code> 中</h3>
<div class="outline-text-3" id="text-source-code-blocks-org">
<p>
<b>Babel</b> 是关于 <code>Org-mode</code> 中代码块的。 如果还不熟悉 <code>Org-mode</code> 中的代码块的概念，请在继续之前查看 <a href="http://orgmode.org/manual/Literal-examples.html" rel="external nofollow noopener noreferrer" target="_blank">Org-mode手册的相关章节</a>。
</p>

<p>
受到支持语言的代码块可以出现在 <code>Org-mode</code> 文件的任意位置。
代码块可以直接在 <code>Org-mode</code> 文件中编辑，但通过 <code>C-c '= 调用的函数 =org-edit-src-code</code> 编辑代码往往更容易。
将代码块放全新的缓冲区中，同时激活相应语言的模式,语言的编辑特性你全都可用，真是爽。
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+begin_src language org-switches&#10;,body&#10;#+end_src</span><br></pre></td></tr></table></figure>
</div>

<p>
<code>ruby</code> 代码的代码块如下所示:
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+begin_src ruby&#10;,require &#39;date&#39;&#10;,&#34;This file was last evaluated on #{Date.today}&#34;&#10;#+end_src</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-source-code-blocks-babel" class="outline-3">
<h3 id="source-code-blocks-babel"><a id="sec-4-2" name="sec-4-2"></a><a id="ID-780f1b68-48ce-4786-88b9-10b1a1b10234" name="ID-780f1b68-48ce-4786-88b9-10b1a1b10234"></a><span class="section-number-3">4.2</span> 代码块在 <code>Babel</code> 中</h3>
<div class="outline-text-3" id="text-source-code-blocks-babel">
<p>
<b>Babel</b> 向代码块添加了一些新的元素。 基本结构变成了:
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+begin_src language  org-switches header-arguments&#10;,body&#10;#+end_src</span><br></pre></td></tr></table></figure>
</div>

<dl class="org-dl">
<dt> language </dt><dd>代码块中代码的语言标示。 有效值必须是 <code>org-babel-interpreters</code> 的成员。
</dd>
<dt> header-arguments </dt><dd><code>header-arguments</code> 控制源代码块的执行和输出的许多方面。
</dd>
</dl>
<p>
请参阅<a href="http://orgmode.org/manual/Header-arguments.html#Header-arguments" rel="external nofollow noopener noreferrer" target="_blank">Header Arguments</a>部分，以查看可用的 <code>header-arguments=</code> 。
</p>
<dl class="org-dl">
<dt> body </dt><dd>等待被执行的源代码。 一个重要的键绑定 <code>C-c '= , 调用 =org-edit-src-code</code> ，打开一个包含适合于该语言 <code>major mode</code> 的编辑缓冲区。
</dd>
</dl>
<p>
然后你就可以像往常在emacs编辑代码那样来编辑你的代码块。
</p>
</div>
</div>
</div>

<div id="outline-container-source-code-execution" class="outline-2">
<h2 id="source-code-execution"><a id="sec-5" name="sec-5"></a><a id="ID-633c29ed-bc53-4bf2-8c22-fca5847eddf0" name="ID-633c29ed-bc53-4bf2-8c22-fca5847eddf0"></a><span class="section-number-2">5</span> 源代码执行</h2>
<div class="outline-text-2" id="text-source-code-execution">
<p>
<b>Babel</b> 通过将代码传递给解释器来执行解释语言（如shell，python，R等）的代码块。 在执行结果上可以做进一步的操作，如果你想的话。
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><a id="ID-cbc64bd5-950a-4d6d-a659-8acedede1e8d" name="ID-cbc64bd5-950a-4d6d-a659-8acedede1e8d"></a><span class="section-number-3">5.1</span> 示例</h3>
<div class="outline-text-3" id="text-5-1">
<p>
以下是三种不同语言的代码块，其后是其输出。
如果正在Emacs中查看本文档的 <code>Org-mode</code> 版本，则把光标放置在块的任何位置，然后按 <code>C-c C-c</code> 执行代码<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>（并随意更改它）。
</p>
</div>
<div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1"><a id="ID-9ff0080c-2a4e-42de-bb80-f0ff0df537f3" name="ID-9ff0080c-2a4e-42de-bb80-f0ff0df537f3"></a><span class="section-number-4">5.1.1</span> Ruby</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
在 <code>Org-mode</code> 的文件中:
</p>
<pre class="example">
#+begin_src ruby
require 'date'
"This file was last evaluated on #{Date.today}"
#+end_src
</pre>

<p>
HTML 导出的代码:
</p>
<div class="org-src-container">

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">'date'</span></span><br><span class="line"><span class="string">"This file was last evaluated on <span class="subst">#{<span class="constant">Date</span>.today}</span>"</span></span><br></pre></td></tr></table></figure>
</div>

<p>
HTML 导出的执行结果:
</p>
<pre class="example">
This file was last evaluated on 2017-04-05
</pre>
</div>
</div>

<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2"><a id="ID-342ff42e-dab6-4ecf-a0d1-fc0b922b5329" name="ID-342ff42e-dab6-4ecf-a0d1-fc0b922b5329"></a><span class="section-number-4">5.1.2</span> Shell</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
在 <code>Org-mode</code> 的文件中:
</p>
<pre class="example">
#+begin_src sh
  echo "This file takes up `du -h babel-intro.org |sed 's/\([0-9k]*\)[ ]*babel-intro.org/\1/'`"
#+end_src
</pre>

<p>
HTML 导出的代码:
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"This file takes up `du -h babel-intro.org |sed 's/\([0-9k]*\)[ ]*babel-intro.org/\1/'`"</span></span><br></pre></td></tr></table></figure>
</div>

<p>
HTML 导出的执行结构:
</p>
<pre class="example">
This file takes up 36K
</pre>
</div>
</div>

<div id="outline-container-sec-5-1-3" class="outline-4">
<h4 id="sec-5-1-3"><a id="ID-57448a04-6850-40ac-a1ca-1f7dedcd5942" name="ID-57448a04-6850-40ac-a1ca-1f7dedcd5942"></a><span class="section-number-4">5.1.3</span> <a href="http://www.r-project.org/" rel="external nofollow noopener noreferrer" target="_blank">R</a></h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
当前这个文件中最常用的词是？
在 <code>Org-mode</code> 文件中:
</p>
<pre class="example">
#+begin_src R :colnames yes
  words &lt;- tolower(scan("babel-intro.org", what="", na.strings=c("|",":")))
  t(sort(table(words[nchar(words) &gt; 3]), decreasing=TRUE)[1:10])
#+end_src
</pre>

<p>
HTML 导出的代码:
</p>
<div class="org-src-container">

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">words &lt;- tolower(scan(<span class="string">"babel-intro.org"</span>, what=<span class="string">""</span>, na.strings=c(<span class="string">"|"</span>,<span class="string">":"</span>)))</span><br><span class="line">t(sort(table(words[nchar(words) &gt; <span class="number">3</span>]), decreasing=<span class="literal">TRUE</span>)[<span class="number">1</span>:<span class="number">10</span>])</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-4" class="outline-4">
<h4 id="sec-5-1-4"><a id="ID-d3053d37-0c93-41ab-946f-56c3407e1193" name="ID-d3053d37-0c93-41ab-946f-56c3407e1193"></a><span class="section-number-4">5.1.4</span> <a href="http://ditaa.sourceforge.net/" rel="external nofollow noopener noreferrer" target="_blank">ditaa</a></h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
在 <code>Org-mode</code> 文件中:
</p>
<pre class="example">
#+begin_src ditaa :file blue.png :cmdline -r
+---------+
| cBLU    |
|         |
|    +----+
|    |cPNK|
|    |    |
+----+----+
#+end_src
</pre>

<p>
HTML导出的代码:
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">+---------+&#10;| cBLU    |&#10;|         |&#10;|    +----+&#10;|    |cPNK|&#10;|    |    |&#10;+----+----+</span><br></pre></td></tr></table></figure>
</div>

<p>
HTML导出的结果图:
</p>

<div class="figure">
<p><img src="http://orgmode.org/worg/images/babel/blue.png" alt="blue.png">
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-5" class="outline-4">
<h4 id="sec-5-1-5"><a id="ID-141de388-4141-4e02-ac15-9268a0480ca5" name="ID-141de388-4141-4e02-ac15-9268a0480ca5"></a><span class="section-number-4">5.1.5</span> js</h4>
<div class="outline-text-4" id="text-5-1-5">
<div class="org-src-container">

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hello, world'</span>);</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-results" class="outline-3">
<h3 id="results"><a id="sec-5-2" name="sec-5-2"></a><a id="ID-c0705d07-4dd6-418b-bd6b-4aa9dd920a1e" name="ID-c0705d07-4dd6-418b-bd6b-4aa9dd920a1e"></a><span class="section-number-3">5.2</span> 捕获代码执行结果</h3>
<div class="outline-text-3" id="text-results">
<p>
<b>Babel</b> 提供了两种根本不同的模式来捕获代码执行的结果： <i>functional mode</i> 和 <i>scripting mode</i> 。 模式的选择可以通过配置 <code>:results</code> 头参数来指定。
</p>
</div>
<div id="outline-container-results-value" class="outline-4">
<h4 id="results-value"><a id="sec-5-2-1" name="sec-5-2-1"></a><a id="ID-f5a3fb97-8add-4f5a-b5ed-c60507bf4b49" name="ID-f5a3fb97-8add-4f5a-b5ed-c60507bf4b49"></a><span class="section-number-4">5.2.1</span> <code>:results value</code> (functional mode)</h4>
<div class="outline-text-4" id="text-results-value">
<p>
代码执行的结果是代码块中最后一个语句的值。
在 <i>functional mode</i> 下，代码块是具有返回值的函数。 一个代码块的返回值可以用作另一代码块的输入，即使是不同语言的输入。
这样的话，Babel成为一种<a href="http://orgmode.org/worg/org-contrib/babel/intro.html#meta-programming-language" rel="external nofollow noopener noreferrer" target="_blank">元编程语言</a>。 如果块返回表格数据（某种类型的向量，数组或表），那么将可以作为 <code>Org-mode</code> 的表格保存在缓冲区中。
<i>functional mode</i> 是默认设置。
</p>

<p>
作为示例，观察以下python代码块及其输出。
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(<span class="string">"Hello, today's date is %s"</span> % time.ctime())</span><br><span class="line">print(<span class="string">"Two plus two is"</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span> + <span class="number">2</span></span><br></pre></td></tr></table></figure>
</div>

<p>
请注意，在 <i>functional mode</i> 下，输出只由最后一个语句返回，没有其他情况。
</p>
</div>
</div>

<div id="outline-container-results-output" class="outline-4">
<h4 id="results-output"><a id="sec-5-2-2" name="sec-5-2-2"></a><a id="ID-c9b10b0a-2b42-41ab-a84d-4c6aeaba0047" name="ID-c9b10b0a-2b42-41ab-a84d-4c6aeaba0047"></a><span class="section-number-4">5.2.2</span> <code>:results output</code> (scripting mode)</h4>
<div class="outline-text-4" id="text-results-output">
<p>
在 <i>scripting mode</i> 中，Babel捕获代码块的文本输出并将其放置在 <code>Org-mode</code> 的缓冲区中。
它被称为 <i>scripting mode</i> ，因为代码块包含一系列命令，并返回每个命令的输出。
与功能模式不同，代码块本身除了其包含的命令的输出之外没有返回值。<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup>
</p>

<p>
观察以下使用 <i>scripting mode</i> 执行代码块的结果。
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(<span class="string">"Hello, today's date is %s"</span> % time.ctime())</span><br><span class="line">print(<span class="string">'Two plus two is'</span>)</span><br><span class="line"><span class="number">2</span> + <span class="number">2</span></span><br></pre></td></tr></table></figure>
</div>

<p>
在这里， <i>scripting mode</i> 返回了python写到 <code>stdout</code> 的文本。
因为代码块不包含最后一个语句 <code>(2 + 2)</code> 的 <code>print()</code> 语句，所以结果中不会出现4。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><a id="ID-245a812f-594f-4e6e-b795-92824297b5e3" name="ID-245a812f-594f-4e6e-b795-92824297b5e3"></a><span class="section-number-3">5.3</span> 基于会话的代码块</h3>
<div class="outline-text-3" id="text-5-3">
<p>
对于某些语言，例如Python，R，ruby和shell，可以在Emacs中运行一个不完备的交互式会话进程。
这意味着创建了一个不同源代码块之间共享数据对象的持久化环境。
<b>Babel</b> 支持使用 <code>:session</code> 头参数来 指定代码块运行于特定会话中。
如果头参数被赋予一个值，那么该参数将被用作会话的名称。
因此，可以并发的在不同的会话中运行同一语言的不同代码块。
</p>

<p>
基于特定会话的代码块对于原型设计和调试特别有用。 函数 <code>org-babel-pop-to-session</code> 可用于切换会话缓冲区。
</p>

<p>
一旦代码块编辑完成，通常最好在会话之外执行它，因为这样它执行的环境将是确定的。
</p>

<blockquote>
<p>
With R, the session will be under the control of <a href="http://ess.r-project.org/" rel="external nofollow noopener noreferrer" target="_blank">Emacs Speaks Statistics</a> as usual,
and the full power of ESS is thus still available,
both in the R session, and when switching to the R code edit buffer with <code>​C-c '​</code>.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-arguments-to-source-code-blocks" class="outline-3">
<h3 id="arguments-to-source-code-blocks"><a id="sec-5-4" name="sec-5-4"></a><a id="ID-1a103aeb-0eea-4e60-b882-346604ff4537" name="ID-1a103aeb-0eea-4e60-b882-346604ff4537"></a><span class="section-number-3">5.4</span> 代码块的入参</h3>
<div class="outline-text-3" id="text-arguments-to-source-code-blocks">
<p>
<b>Babel</b> 支持代码块的参数化，即可以将参数传递给代码块，从而使它们函数化。
<i>functional mode</i> 和 <i>scripting mode</i> 都支持入参。
</p>
</div>

<div id="outline-container-using-a-code-block-as-a-function" class="outline-4">
<h4 id="using-a-code-block-as-a-function"><a id="sec-5-4-1" name="sec-5-4-1"></a><a id="ID-479c571b-254e-403e-963e-a8185ce792d2" name="ID-479c571b-254e-403e-963e-a8185ce792d2"></a><span class="section-number-4">5.4.1</span> 代码块作为函数的简单示例</h4>
<div class="outline-text-4" id="text-using-a-code-block-as-a-function">
<p>
首先我们来看一个非常简单的例子。 以下源代码块使用Python定义了一个函数，求入参的平方。
</p>

<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> x*x</span><br></pre></td></tr></table></figure>
</div>

<p>
在 Org-mode 文件中, 函数定义如下:
</p>
<pre class="example">
#+name: square
#+header: :var x=0
#+begin_src python
return x*x
#+end_src
</pre>


<p>
调用函数如下:
</p>
<pre class="example">
#+call: square(x=6,y=8)
</pre>

<p>
(<i>对于</i> <code>call</code> <i>语法细节请参阅</i> <a href="http://orgmode.org/worg/org-contrib/babel/intro.html#library-of-babel" rel="external nofollow noopener noreferrer" target="_blank">Library of Babel</a>)
</p>

<pre class="example">
nil
</pre>

<pre class="example">
36
</pre>
</div>
</div>

<div id="outline-container-sec-5-4-2" class="outline-4">
<h4 id="sec-5-4-2"><a id="ID-192b07cb-0c73-4af0-a476-b40e86b822da" name="ID-192b07cb-0c73-4af0-a476-b40e86b822da"></a><span class="section-number-4">5.4.2</span> <code>Org-mode</code> 表格作为入参的更复杂的示例</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
在本例中，使用Emacs Lisp定义的一个名为 <code>fibonacci-seq</code> 的函数。
函数 <code>fibonacci-seq</code> 计算斐波纳契序列。 该函数只需要一个参数，在当前情况下参数即为 <code>Org-mode</code> 表格的引用。
</p>

<p>
下面即为传递给 <code>fibonacci-seq</code> 的 <code>Org-mode</code> 表格:
</p>
<table id="fibonacci-inputs" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">

<col class="right">
</colgroup>
<tbody>
<tr>
<td class="right">1</td>
<td class="right">2</td>
<td class="right">3</td>
<td class="right">4</td>
<td class="right">5</td>
<td class="right">6</td>
<td class="right">7</td>
<td class="right">8</td>
<td class="right">9</td>
<td class="right">10</td>
</tr>

<tr>
<td class="right">2</td>
<td class="right">4</td>
<td class="right">6</td>
<td class="right">8</td>
<td class="right">10</td>
<td class="right">12</td>
<td class="right">14</td>
<td class="right">16</td>
<td class="right">18</td>
<td class="right">20</td>
</tr>
</tbody>
</table>

<p>
表格在 <code>Org-mode</code> 的缓冲区中如下所示：
</p>
<pre class="example">
#+tblname: fibonacci-inputs
| 1 | 2 | 3 | 4 |  5 |  6 |  7 |  8 |  9 | 10 |
| 2 | 4 | 6 | 8 | 10 | 12 | 14 | 16 | 18 | 20 |
</pre>

<p>
Emacs Lisp的源代码:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">defun</span> fibonacci <span class="list">(<span class="keyword">n</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">if</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">=</span> n <span class="number">0</span>)</span> <span class="list">(<span class="keyword">=</span> n <span class="number">1</span>)</span>)</span></span><br><span class="line">    n</span><br><span class="line">  <span class="list">(<span class="keyword">+</span> <span class="list">(<span class="keyword">fibonacci</span> <span class="list">(<span class="keyword">-</span> n <span class="number">1</span>)</span>)</span> <span class="list">(<span class="keyword">fibonacci</span> <span class="list">(<span class="keyword">-</span> n <span class="number">2</span>)</span>)</span>)</span>)</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">mapcar</span> <span class="list">(<span class="keyword">lambda</span> <span class="list">(<span class="keyword">row</span>)</span></span><br><span class="line">	<span class="list">(<span class="keyword">mapcar</span> <span class="quoted">#'fibonacci</span> row)</span>)</span> fib-inputs)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
在 <code>Org-mode</code> 中函数如下所示:
</p>
<pre class="example">
#+name: fibonacci-seq
#+begin_src emacs-lisp :var fib-inputs=fibonacci-inputs
  (defun fibonacci (n)
    (if (or (= n 0) (= n 1))
        n
      (+ (fibonacci (- n 1)) (fibonacci (- n 2)))))

  (mapcar (lambda (row)
            (mapcar #'fibonacci row)) fib-inputs)
#+end_src
</pre>

<p>
<code>fibonacci-seq</code> 的返回值，也是一个表格:
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><a id="ID-45f36f3c-0268-45ee-96cd-ea23cf4482d3" name="ID-45f36f3c-0268-45ee-96cd-ea23cf4482d3"></a><span class="section-number-3">5.5</span> 内联(In-line)的代码块</h3>
<div class="outline-text-3" id="text-5-5">
<p>
可使用以下语法内联(In-line)的执行代码：
</p>

<pre class="example">
Without header args: src_lang{code} or with header args: src_lang[args]{code},
for example src_python[:session]{10*x}, where x is a variable existing in the
python session.
</pre>

<p>
代码如下:
</p>
<pre class="example">
src_python{return "Hello World!"}
</pre>

<p>
执行结果： 
</p>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><a id="ID-f4809ee0-f691-4c33-853f-423fcd7c2571" name="ID-f4809ee0-f691-4c33-853f-423fcd7c2571"></a><span class="section-number-3">5.6</span> 代码块扩展</h3>
<div class="outline-text-3" id="text-5-6">
<p>
<b>Babel</b> 在执行之前“扩展”代码块，即，执行代码包括把引用的数据(或代码)填充到代码块内容里。
可以预览展开的内容，还可以在 <i>tangling</i> 期间展开代码。 扩展时，头参数和变量需要一并考虑进去。
</p>

<dl class="org-dl">
<dt> preview </dt><dd><code>C-c M-b p</code> (<code>C-c C-v v</code>) 关联到 <code>org-babel-expand-src-block</code> 函数。它可用于在代码块中预览扩展的内容, 对调试很有用。
</dd>

<dt> tangling </dt><dd>扩展的的代码块可以被 <i>tangled</i> 。 <i>tangling</i> 可能包括的变量值
<ul class="org-ul">
<li>其他代码的执行结果，
</li>
<li>存储在标题属性中变量，或者
</li>
<li>表格。
</li>
</ul>
</dd>
</dl>

<p>
<i>tangling</i> 扩展代码块的一个可能用途是用于emacs初始化。
用户名和密码等值可以存储在标题属性或表格中。
可以使用 <code>:no-expand</code> 头参数来阻止 <i>tangling</i> 期间代码块的扩展。
</p>

<p>
下面是代码块及其生成的扩展的示例。
</p>

<p>
数据被存储在表格中:
</p>
<table id="user-data" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">
</colgroup>
<tbody>
<tr>
<td class="left">username</td>
<td class="left">john-doe</td>
</tr>

<tr>
<td class="left">password</td>
<td class="left">abc123</td>
</tr>
</tbody>
</table>

<p>
引用数据表格的代码块:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> my-special-username <span class="list">(<span class="keyword">first</span> <span class="list">(<span class="keyword">first</span> data)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> my-special-password <span class="list">(<span class="keyword">first</span> <span class="list">(<span class="keyword">second</span> data)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
在代码块内部， <code>C-c M-b p</code> (<code>C-c C-v v</code>)扩展内容如下：
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">let</span> <span class="list">(<span class="list">(<span class="keyword">data</span> <span class="quoted">(<span class="keyword">quote</span> ((<span class="string">"john-doe"</span>) (<span class="string">"abc123"</span>)))</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> my-special-username <span class="list">(<span class="keyword">first</span> <span class="list">(<span class="keyword">first</span> data)</span>)</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> my-special-password <span class="list">(<span class="keyword">first</span> <span class="list">(<span class="keyword">second</span> data)</span>)</span>)</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-meta-programming-language" class="outline-3">
<h3 id="meta-programming-language"><a id="sec-5-7" name="sec-5-7"></a><a id="ID-db8adedd-db40-448a-ad61-700dc7fb7cff" name="ID-db8adedd-db40-448a-ad61-700dc7fb7cff"></a><span class="section-number-3">5.7</span> <code>Org-mode</code> 的元编程语言</h3>
<div class="outline-text-3" id="text-meta-programming-language">
<p>
因为用一种语言编写的函数的返回值可以被传递给另一种语言编写的函数，
或者传递到本身就可程序化的 <code>Org-mode</code> 的表格中， 所以可将 <b>Babel</b> 用作元功能编程语言。
<b>Bable</b> 可使许多语言一起工作, 混合使用各语言，每种语言可用于最合适的任务。
</p>

<p>
例如，在shell中进行一些系统诊断，并用R图形化诊断结果.
</p>

<ol class="org-ol">
<li>使用shell代码创建一个代码块，列出program目录中的目录以及它们的大小。Babel自动将输出转换为 <code>Org-mode</code> 表格。
<pre class="example">
#+name: directories
#+begin_src sh :results replace
  cd ~/program/ &amp;&amp; du -sc * | grep -v total
#+end_src
</pre>

<p>
代码如下：
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/program/ &amp;&amp; du -sc * | grep -v total</span><br></pre></td></tr></table></figure>
</div>

<p>
结果如下：
</p>
<pre class="example">
#+RESULTS: directories
|   2392 | github      |
|  90728 | org         |
|  15820 | program     |
| 190488 | program.tgz |
</pre>
</li>

<li>一行R语言编写的函数将 <code>Org-mode</code> 表中的数据绘制为饼形图。 <del>请注意，当前代码块如何使用前一代码块的 <code>srcname</code> 来获取的数据</del> 。

<p>
在 <code>Org-mode</code> 文件中:
</p>
<pre class="example">
#+name: directory-pie-chart(dirs = directories)
#+begin_src R :session R-pie-example :file ../images/babel/dirs.png :var dirs=directories() :results graphics
  pie(dirs[,1], labels = dirs[,2])
#+end_src
</pre>
<blockquote>
<p>
注： <code>:results graphics</code> 请参阅 <a href="http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-R.html#orgheadline7" rel="external nofollow noopener noreferrer" target="_blank">Org Mode Features for R Source Code Blocks</a>
</p>
</blockquote>

<p>
HTML 导出的代码:
</p>
<div class="org-src-container">

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">pie(dirs[,<span class="number">1</span>],labels=dirs[,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
</div>


<div class="figure">
<p><img src="https://raw.githubusercontent.com/brantou/hexo-blog/master/source/images/babel/dirs.png" alt="dirs.png">
</p>
</div>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-spreadsheet" class="outline-2">
<h2 id="spreadsheet"><a id="sec-6" name="sec-6"></a><a id="ID-85379805-cddb-42bb-8bbf-21af4574b4b7" name="ID-85379805-cddb-42bb-8bbf-21af4574b4b7"></a><span class="section-number-2">6</span> 在Org表格中使用代码块</h2>
<div class="outline-text-2" id="text-spreadsheet">
<p>
除了可将表格中的数据作为参数传递给代码块和结果存储为表格外， <b>Babel</b> 还有第三种方式使用 <code>Org-mode</code> 表格。
<code>Org-mode</code> <a href="http://orgmode.org/manual/The-spreadsheet.html#The-spreadsheet" rel="external nofollow noopener noreferrer" target="_blank">现有电子表格</a> 功能允许使用 <code>＃+TBLFM</code> 从指定单元格值自动计算出其他单元格值。
通过以上方式，表可使用<a href="http://orgmode.org/manual/Formula-syntax-for-Calc.html#Formula-syntax-for-Calc" rel="external nofollow noopener noreferrer" target="_blank">calc </a>和<a href="http://orgmode.org/manual/Formula-syntax-for-Lisp.html#Formula-syntax-for-Lisp" rel="external nofollow noopener noreferrer" target="_blank"> emacs lisp</a>来执行计算任务。
</p>

<p>
<b>Babel</b> 有效扩展了 <code>＃+TBLFM</code> 行使用代码块（以任何语言）进行必要计算的能力。
</p>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><a id="ID-b2baa172-d9a5-4d81-a694-c4d92b67b0e6" name="ID-b2baa172-d9a5-4d81-a694-c4d92b67b0e6"></a><span class="section-number-3">6.1</span> 示例</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-sec-6-1-1" class="outline-4">
<h4 id="sec-6-1-1"><a id="ID-f37815fc-fabe-4906-a3d5-7cd6b812cb81" name="ID-f37815fc-fabe-4906-a3d5-7cd6b812cb81"></a><span class="section-number-4">6.1.1</span> 示例 1: 使用R生成数据概要</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
将使用几个数字的平均值来填充 <code>Org-mode</code> 表中的一个单元格，来做简单示例。
首先，要生成数据, 以下代码块生成0和1之间的五个随机数来填充了 <code>Org-mode</code> 表。
</p>

<p>
在 <code>Org-mode</code> 文件中,如下所示:
</p>
<pre class="example">
#+name: tbl-example-data
#+begin_src R
runif(n=5, min=0, max=1)
#+end_src
</pre>

<p>
HTML 导出的代码如下:
</p>
<div class="org-src-container">

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">runif(n=<span class="number">5</span>, min=<span class="number">0</span>, max=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
</div>

<p>
紧接着定义一个代码块计算来表列的平均值。
</p>

<p>
在 <code>Org-mode</code> 文件中,如下所示:
</p>
<pre class="example">
#+name: R-mean
#+begin_src R :var x=""
colMeans(x)
#+end_src
</pre>

<p>
HTML 导出的代码如下:
</p>
<div class="org-src-container">

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">colMeans(x)</span><br></pre></td></tr></table></figure>
</div>

<p>
最后，创建使用R代码的表。 通过使用 <code>org-sbe</code> （&lsquo;source block evaluate&rsquo;）宏来完成的代码块的调用。
</p>

<p>
在 <code>Org-mode</code> 文件中，表格调用代码块如下所示:
</p>
<pre class="example">
#+tblname: summaries
|              mean |
|-------------------|
| 0.779619386699051 |
#+TBLFM: @2$1='(org-sbe "R-mean" (x "tbl-example-data()"))
</pre>

<p>
HTML export of code:
</p>
<table id="summaries" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="right">mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">0.58</td>
</tr>
</tbody>
</table>

<p>
重新计算表格公式，请在表格中使用 <code>C-u C-c C-c</code> 。 每次重新计算表格公式时，代码块都会再次计算，因此计算的平均值会发生变化。
</p>
</div>
</div>

<div id="outline-container-sec-6-1-2" class="outline-4">
<h4 id="sec-6-1-2"><a id="ID-e779ec57-c1f6-44dd-9a77-45497d7fa1ac" name="ID-e779ec57-c1f6-44dd-9a77-45497d7fa1ac"></a><span class="section-number-4">6.1.2</span> 示例 2: Babel 的测试套件</h4>
<div class="outline-text-4" id="text-6-1-2">
<blockquote>
<p>
While developing Babel, we used a suite of tests implemented as a large Org-mode table.
</p>
</blockquote>
<p>
在开发 <b>Babel</b> 时，开发者曾使用了一个居大的 <code>Org-mode</code> 表作为测试套件。
要运行测试套件，我们只需使用 <code>C-u C-c C-c</code> 对表进行计算：运行所有测试，将结果与期望进行比较，并使用结果和通过/失败的状态信息来更新表。
</p>

<p>
测试套件的简单版本如下.
</p>

<p>
在 <code>Org-mode</code> 文件中，如下所示:
</p>
<pre class="example">
#+TBLNAME: org-babel-tests
| functionality    | block        | arg |    expected |     results | pass |
|------------------+--------------+-----+-------------+-------------+------|
| basic evaluation |              |     |             |             | pass |
|------------------+--------------+-----+-------------+-------------+------|
| emacs lisp       | basic-elisp  |   2 |           4 |           4 | pass |
| shell            | basic-shell  |     |           6 |           6 | pass |
| ruby             | basic-ruby   |     |   org-babel |   org-babel | pass |
| python           | basic-python |     | hello world | hello world | pass |
| R                | basic-R      |     |          13 |          13 | pass |
#+TBLFM: $5='(if (= (length $3) 1) (org-sbe $2 (n $3)) (org-sbe $2)) :: $6='(if (string= $4 $5) "pass" (format "expected %S but was %S" $4 $5))
</pre>

<p>
HTML 导出的代码:
</p>
<table id="org-babel-tests" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="left">

<col class="right">

<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">functionality</th>
<th scope="col" class="left">block</th>
<th scope="col" class="right">arg</th>
<th scope="col" class="left">expected</th>
<th scope="col" class="left">results</th>
<th scope="col" class="left">pass</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">basic evaluation</td>
<td class="left">&#xa0;</td>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">pass</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left">emacs lisp</td>
<td class="left">basic-elisp</td>
<td class="right">2</td>
<td class="left">4</td>
<td class="left">4</td>
<td class="left">pass</td>
</tr>

<tr>
<td class="left">shell</td>
<td class="left">basic-shell</td>
<td class="right">&#xa0;</td>
<td class="left">6</td>
<td class="left">6</td>
<td class="left">pass</td>
</tr>

<tr>
<td class="left">ruby</td>
<td class="left">basic-ruby</td>
<td class="right">&#xa0;</td>
<td class="left">org-babel</td>
<td class="left">org-babel</td>
<td class="left">pass</td>
</tr>

<tr>
<td class="left">python</td>
<td class="left">basic-python</td>
<td class="right">&#xa0;</td>
<td class="left">hello world</td>
<td class="left">hello world</td>
<td class="left">pass</td>
</tr>

<tr>
<td class="left">R</td>
<td class="left">basic-R</td>
<td class="right">&#xa0;</td>
<td class="left">13</td>
<td class="left">13</td>
<td class="left">pass</td>
</tr>
</tbody>
</table>
</div>

<ol class="org-ol"><li><a id="sec-6-1-2-1" name="sec-6-1-2-1"></a><a id="ID-81e29d42-18c7-4545-b057-b77d97d2dc83" name="ID-81e29d42-18c7-4545-b057-b77d97d2dc83"></a>用于测试的代码块<br><div class="outline-text-5" id="text-6-1-2-1">
<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: basic-elisp
#+begin_src emacs-lisp :var n=0
(* 2 n)
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">*</span> <span class="number">2</span> n)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: basic-shell
#+begin_src sh :results silent
expr 1 + 5
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">expr <span class="number">1</span> + <span class="number">5</span></span><br></pre></td></tr></table></figure>
</div>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: date-simple
#+begin_src sh :results silent
date
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">date</span><br></pre></td></tr></table></figure>
</div>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: basic-ruby
#+begin_src ruby :results silent
"org-babel"
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="string">"org-babel"</span></span><br></pre></td></tr></table></figure>
</div>

<p>
<code>Org-mode</code> 文件中，如下所示：
</p>
<pre class="example">
#+name: basic-python
#+begin_src python :results silent
"hello world"
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure>
</div>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: basic-R
#+begin_src R :results silent
b &lt;- 9
b + 4
#+end_src
</pre>

<p>
HTML 导出代码，如下所示：:
</p>
<div class="org-src-container">

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b &lt;- <span class="number">9</span></span><br><span class="line">b + <span class="number">4</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</li></ol>
</div>
</div>
</div>

<div id="outline-container-library-of-babel" class="outline-2">
<h2 id="library-of-babel"><a id="sec-7" name="sec-7"></a><a id="ID-1d60ae3e-72db-4ac5-a7e1-4a001d0fd930" name="ID-1d60ae3e-72db-4ac5-a7e1-4a001d0fd930"></a><span class="section-number-2">7</span> Babel库文件</h2>
<div class="outline-text-2" id="text-library-of-babel">
<p>
(可参阅 <a href="http://orgmode.org/manual/Library-of-Babel.html#Library-of-Babel" rel="external nofollow noopener noreferrer" target="_blank">Org manual:Library-of-Babel</a>)
</p>

<p>
正如上面的 <a href="#using-a-code-block-as-a-function">square</a> 示例中看到的，一旦代码块被定义，可使用 <code>lob</code> 符号反复调用:
</p>

<pre class="example">
#+lob: square(x=6)
</pre>

<p>
但是，若是需要为每个 <code>Org-mode</code> 缓冲区提供的通用,可重用的代码块呢？
</p>

<p>
除了当前的缓冲区外， <b>Babel</b> 还会搜索 *Babel*库文件中预先定义的代码块。
这是一个用户可扩展的现成的代码块集合，用于处理常见任务。
对于 <b>Bable</b> 库（尚未完成！）的一个可能的用途就是是使用R，gnuplot，asymptote等语言为 <code>Org-mode</code> 表中保存的数据提供绘图功能。
如果你定义的某些代码块 对其他 <code>Org-mode</code> 用户也非常有用，可考虑将其添加到 <b>Babel</b> 库中;
类似的，可以随时求助，*Babel* 可引用外部代码来解决问题 &#x2013; 其他Babel用户也有机会提供一些有用的代码。
</p>

<p>
Babel预先填充(即把库中的代码块加载到缓冲区中)位于<a href="http://orgmode.org/worg/org-contrib/babel/library-of-babel.html" rel="external nofollow noopener noreferrer" target="_blank"> Babel库文件</a> 中的代码块 - <a href="http://orgmode.org/w/org-mode.git/blob/HEAD:/doc/library-of-babel.org" rel="external nofollow noopener noreferrer" target="_blank">library-of-babel.org</a> 上的原始文件。
可使用 <code>org-babel-lob-ingest</code> （绑定到 <code>C-c C-v i</code> ）从任何 <code>Org-mode</code> 文件中向库添加代码块。
</p>

<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">org-babel-lob-ingest</span> <span class="string">"path/to/file.org"</span>)</span></span><br></pre></td></tr></table></figure>
</div>

<p>
注： 可以将表值或源代码块的输出传递给 <b>Babel</b> 库函数。 还可以在代码块的参数中引用 <b>Babel</b> 函数库函数。
</p>
</div>
</div>

<div id="outline-container-literate-programming" class="outline-2">
<h2 id="literate-programming"><a id="sec-8" name="sec-8"></a><a id="ID-c327d292-1a89-4e27-9e42-81b63059e2bb" name="ID-c327d292-1a89-4e27-9e42-81b63059e2bb"></a><span class="section-number-2">8</span> 文学化编程</h2>
<div class="outline-text-2" id="text-literate-programming">
<blockquote>
<p>
Let us change our traditional attitude to the construction of
programs: Instead of imagining that our main task is to instruct a
<i>computer</i> what to do, let us concentrate rather on explaining to
<i>human beings</i> what we want a computer to do.
</p>

<p>
让我们改改传统上构建程序的态度：不要认为程序的主要任务是指导计算机怎么做，相反，程序要致力于向人们解释，它想让计算机做什么。<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup>
</p>

<p>
The practitioner of literate programming can be regarded as an
essayist, whose main concern is with exposition and excellence of
style. Such an author, with thesaurus in hand, chooses the names of
variables carefully and explains what each variable means. He or she
strives for a program that is comprehensible because its concepts have
been introduced in an order that is best for human understanding,
using a mixture of formal and informal methods that reinforce each
other.
</p>

<p>
文学编程人士可被视为作家，他们首要考虑的任务是如何清楚地阐述、如何形成优秀的风格。
这样的作者胸有成竹，会仔细地挑选变量名，并给予解释。为力求程序之可读，
他/她使用形式和非形式互补的混合手法，将各种概念按照人们能理解的方式顺序编排下来。<sup><a id="fnr.3.100" name="fnr.3.100" class="footref" href="#fn.3">3</a></sup>
&#x2013; Donald Knuth
</p>
</blockquote>

<p>
Babel支持 <a href="https://zh.wikipedia.org/wiki/%E6%96%87%E5%AD%A6%E7%BC%96%E7%A8%8B" rel="external nofollow noopener noreferrer" target="_blank">文学编程</a> （LP），允许编程行为发生在 <code>Org-mode</code> 文档中。
然后可将 <code>Org-mode</code> 文件导出（用LP语言编写）到HTML或LaTeX等更可视化的文本格式中以供人类查阅和使用，
并且可以将嵌入的源代码（ <b>tangle</b> in LP speak）转换成源代码文件以供计算机执行。
</p>

<p>
为了支持这些操作， <b>Babel</b> 依赖于 <code>Org-mode</code> 的 <a href="http://orgmode.org/manual/Exporting.html#Exporting" rel="external nofollow noopener noreferrer" target="_blank">文档的导出功能</a> 来编排文档，
依赖于使用 <a href="http://www.cs.tufts.edu/~nr/noweb/" rel="external nofollow noopener noreferrer" target="_blank">Noweb reference syntax</a> <b>tangling</b> 代码文件的 <code>org-babel-tangle</code> （ <code>C-c C-v t</code> ）  函数。
</p>

<p>
以下示例演示了在 <b>Babel</b> 中 <b>tangling</b> 的过程。
</p>
</div>

<div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><a id="ID-9e3da4eb-99b2-46f7-b47a-903fbb40b47a" name="ID-9e3da4eb-99b2-46f7-b47a-903fbb40b47a"></a><span class="section-number-3">8.1</span> <i>tangling</i> 的示例</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-literate-programming-example" class="outline-4">
<h4 id="literate-programming-example"><a id="sec-8-1-1" name="sec-8-1-1"></a><a id="ID-b2c57a71-abe0-402e-a475-3999f8d0f04e" name="ID-b2c57a71-abe0-402e-a475-3999f8d0f04e"></a><span class="section-number-4">8.1.1</span> 简单文学编程示例 (Noweb syntax)</h4>
<div class="outline-text-4" id="text-literate-programming-example">
<blockquote>
<p>
Tangling functionality is controlled by the <code>tangle</code> family of tangle
header arguments.  These arguments can be used to turn tangling on or
off (the default), either for the code block or the Org-mode heading level.
</p>
</blockquote>

<p>
以下代码块演示如何使用 <code>org-babel-tangle</code> （ <code>C-c C-v t</code> ） 把分散的代码块 <i>tangle</i> 为单个源代码文件。
</p>

<p>
以下两个代码块没有 <code>tangle</code> 头参数，因此不会创建源代码文件。 它们通过第三个代码块被包含在源代码文件中，该代码块具有 <code>tangle</code> 头参数。
</p>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: hello-world-prefix
#+begin_src sh :exports none
  echo "/-----------------------------------------------------------\\"
#+end_src
</pre>

<p>
<code>Org-mode</code> 文件中，如下所示：
</p>
<pre class="example">
#+name: hello-world-postfix
#+begin_src sh :exports none
  echo "\-----------------------------------------------------------/"
#+end_src
</pre>

<p>
第三个代码块具有 <code>tangle</code> 头参数，指出将被写入的源代码的文件的名称。
它还包含了前面两个代码块的Noweb样式引用。 这些引用将在 <i>tangling</i> 期间扩展，以使它们包含在输出文件中。
</p>

<p>
<code>Org-mode</code> 文件中，如下所示：:
</p>
<pre class="example">
#+name: hello-world
#+begin_src sh :tangle hello.sh :exports none :noweb yes
  &lt;&lt;hello-world-prefix&gt;&gt;
  echo "|                       hello world                         |"
  &lt;&lt;hello-world-postfix&gt;&gt;
#+end_src
</pre>

<p>
调用函数 <code>org-babel-tangle</code> （ <code>C-c C-v t</code> ）将shell源码写到 <code>hello.sh</code> 文件中：
</p>

<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/usr/bin/env sh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/-----------------------------------------------------------\\"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"|                       hello world                         |"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\-----------------------------------------------------------/"</span></span><br></pre></td></tr></table></figure>
</div>

<p>
此外，可以使用以下语法来插入代码块执行的结果，在下面情况下是名为 <code>example-block</code> 的代码块的执行结果。
</p>

<p>
#&lt;&lt; example-block() &gt;&gt;
</p>

<p>
任何可选参数都可以传递给 <code>example-block()</code> ，方法是将参数放入括号内，并遵循调用代码块函数定义的约定（参见 <a href="http://orgmode.org/worg/org-contrib/babel/intro.html#library-of-babel" rel="external nofollow noopener noreferrer" target="_blank">babel库</a>）。 如下:
</p>

<p>
#&lt;&lt; example-block(a=9) &gt;&gt;
</p>

<p>
参数 “a” 的值设置为等于 “9”。 请注意，这些参数不在当前源代码块中执行，而是按字面顺序传递给 <code>example-block()</code> 。
</p>
</div>
</div>

<div id="outline-container-emacs-initialization" class="outline-4">
<h4 id="emacs-initialization"><a id="sec-8-1-2" name="sec-8-1-2"></a><a id="ID-d338dd50-4694-45d7-a74d-09355b195235" name="ID-d338dd50-4694-45d7-a74d-09355b195235"></a><span class="section-number-4">8.1.2</span> 用Bable初始化Emacs</h4>
<div class="outline-text-4" id="text-emacs-initialization">


<div class="figure">
<p><img src="http://orgmode.org/worg/images/babel/dot-emacs.png" alt="dot-emacs.png">
</p>
</div>

<p>
<b>Babel</b>  对于将Emacs初始化信息嵌入 <code>Org-mode</code> 文件中有特别的支持。
<code>org-babel-load-file</code> 函数可用于加载嵌入在 <code>Org-mode</code> 文件中的Emacs Lisp代码块，方法与加载常规Emacs Lisp文件（如.emacs）相同。
</p>

<p>
这就允许利用Org-mode的功能特性，例如折叠，标签，笔记，HTML导出等，来组织和维护Emacs初始化配置。
</p>

<p>
要想了解这一点，可以参考简单的<a href="#literate-emacs-init">优雅的Emacs初始化</a>示例，或者查看 <a href="http://github.com/eschulte/emacs-starter-kit/tree/master" rel="external nofollow noopener noreferrer" target="_blank">Org-babel-emacs-starter-kit </a>中提供的 <i>Phil Hagelberg</i> 的优秀 <a href="http://github.com/technomancy/emacs-starter-kit/tree/master" rel="external nofollow noopener noreferrer" target="_blank">emacs-starter-kit</a> 的 <i>Babel Literate Programming</i> 版本。
To try this out, either see the simple Literate Emacs Initialization
example, or check out the Babel Literate Programming version of
Phil Hagelberg&rsquo;s excellent emacs-starter-kit available at
Org-babel-emacs-starter-kit.
</p>
</div>

<ol class="org-ol"><li><a id="literate-emacs-init" name="literate-emacs-init"></a><a id="sec-8-1-2-1" name="sec-8-1-2-1"></a><a id="ID-d757b79f-8afa-4a19-a6bc-5267fa6f886c" name="ID-d757b79f-8afa-4a19-a6bc-5267fa6f886c"></a>优雅的Emacs初始化<br><div class="outline-text-5" id="text-literate-emacs-init">
<p>
请按照以下5个步骤进行操作：
</p>
<ol class="org-ol">
<li>在主目录的内创建一个名为 <code>.emacs.d</code> 的目录;
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir ~/.emacs.d</span><br></pre></td></tr></table></figure>
</div>
</li>
<li><i>checkout</i> 最新版本的 <code>Org-mode</code> 到这个新目录的src子目录中;
of this new directory;
<div class="org-src-container">

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.emacs.d</span><br><span class="line">mkdir src</span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">git <span class="built_in">clone</span> git://orgmode.org/org-mode.git</span><br></pre></td></tr></table></figure>
</div>
</li>
<li>将以下代码块放入Emacs初始化目录（ <code>~/.emacs.d</code> ）下名为 <code>init.el</code> 的文件中。
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;;; init.el --- Where all the magic begins</span></span><br><span class="line"><span class="comment">;;</span></span><br><span class="line"><span class="comment">;; This file loads Org-mode and then loads the rest of our Emacs initialization from Emacs lisp</span></span><br><span class="line"><span class="comment">;; embedded in literate Org-mode files.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; Load up Org Mode and (now included) Org Babel for elisp embedded in Org Mode files</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> dotfiles-dir <span class="list">(<span class="keyword">file-name-directory</span> <span class="list">(<span class="keyword">or</span> <span class="list">(<span class="keyword">buffer-file-name</span>)</span> load-file-name)</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">let*</span> <span class="list">(<span class="list">(<span class="keyword">org-dir</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">		 <span class="string">"lisp"</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">			 <span class="string">"org"</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">				<span class="string">"src"</span> dotfiles-dir)</span>)</span>)</span>)</span></span><br><span class="line">       <span class="list">(<span class="keyword">org-contrib-dir</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">			 <span class="string">"lisp"</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">				 <span class="string">"contrib"</span> <span class="list">(<span class="keyword">expand-file-name</span></span><br><span class="line">					    <span class="string">".."</span> org-dir)</span>)</span>)</span>)</span></span><br><span class="line">       <span class="list">(<span class="keyword">load-path</span> <span class="list">(<span class="keyword">append</span> <span class="list">(<span class="keyword">list</span> org-dir org-contrib-dir)</span></span><br><span class="line">			  <span class="list">(<span class="keyword">or</span> load-path <span class="literal">nil</span>)</span>)</span>)</span>)</span></span><br><span class="line">  <span class="comment">;; load up Org-mode and Org-babel</span></span><br><span class="line">  <span class="list">(<span class="keyword">require</span> <span class="quoted">'org-install</span>)</span></span><br><span class="line">  <span class="list">(<span class="keyword">require</span> <span class="quoted">'ob-tangle</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;; load up all literate org-mode files in this directory</span></span><br><span class="line"><span class="list">(<span class="keyword">mapc</span> <span class="quoted">#'org-babel-load-file</span> <span class="list">(<span class="keyword">directory-files</span> dotfiles-dir <span class="literal">t</span> <span class="string">"\\.org$"</span>)</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;;; init.el ends here</span></span><br></pre></td></tr></table></figure>
</div>
</li>
<li>在Emacs Lisp代码块中实现所有Emacs定制，嵌入在该目录中的 <code>Org-mode</code> 文件中; 和
</li>
<li>重启Emacs读取自定义配置。
</li>
</ol>
</div>
</li></ol>
</div>
</div>
</div>

<div id="outline-container-reproducable-research" class="outline-2">
<h2 id="reproducable-research"><a id="sec-9" name="sec-9"></a><a id="ID-0b64ef01-c4c4-405d-8ed3-23dc6384d825" name="ID-0b64ef01-c4c4-405d-8ed3-23dc6384d825"></a><span class="section-number-2">9</span> 可重复性研究</h2>
<div class="outline-text-2" id="text-reproducable-research">
<blockquote>
<p>
An article about computational science in a scientific publication is
not the scholarship itself, it is merely advertising of the
scholarship. The actual scholarship is the complete software
development environment and the complete set of instructions which
generated the figures.
</p>

<p>
&#x2013; D. Donoho
</p>
</blockquote>

<p>
<a href="http://reproducibleresearch.net/" rel="external nofollow noopener noreferrer" target="_blank">可重复性研究</a> （RR）是与科研出版物一起分发的所有数据，软件源代码和重现出版物中讨论的结果所需的工具的方法。
因此，RR包不仅描述了研究及其结果，而且成为可以复制和扩展研究的完整实验室。
</p>

<p>
<code>Org-mode</code> 已经很好的支持<a href="http://orgmode.org/manual/Exporting.html#Exporting" rel="external nofollow noopener noreferrer" target="_blank">导出到HTML和LaTeX</a>。
<b>Babel</b> 通过激活嵌入在 <code>Org-mode</code> 文档中的数据和代码块，使组织模式成为RR的工具; 整个文档变得可执行。
这使得鼓励读者重新创建结果并实验自己的思路来分发科研成果成为可能。
</p>

<p>
<a href="http://en.wikipedia.org/wiki/Sweave" rel="external nofollow noopener noreferrer" target="_blank">Sweave</a> 是目前比较知名的RR工具，它提供了将R代码嵌入到LaTeX文档中的机制。
Sweave是一个成熟而且非常有用的工具，但我们认为 <b>Babel</b> 有几个优点:
</p>
<ul class="org-ul">
<li>支持多种语言
</li>
<li>导出过程灵活强大，除了LaTeX之外，还包括HTML作为目标格式; 和
</li>
<li>文档可利用 <code>Org-mode</code>  强大的功能特性，支持项目规划和任务管理等。
</li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
Calling <code>C-c C-o</code> on a code block will open the block&rsquo;s results in a separate buffer.
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
This mode will be familiar to Sweave users.
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
摘自<a href="http://www.cnblogs.com/ajian005/archive/2012/10/25/2753910.html" rel="external nofollow noopener noreferrer" target="_blank">文艺编程 Literate Programming （原文中英文对照）</a>, 个人更喜欢文学编程。
literate-devOps
</p></div>


</div>
</div>
Last Updated 2017-10-31 Tue 21:54.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/21/leetcode/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/21/leetcode/" itemprop="url">Leetcode编程练习</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-21T00:00:00+08:00">
                2017-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/技术积累/" itemprop="url" rel="index">
                    <span itemprop="name">技术积累</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/21/leetcode/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/21/leetcode/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
<i>LeetCode</i> 编程训练的积累，目前在努力做题中，日后整理！
</p>
<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-9b1b242f-d391-4e42-97cd-37c186533dbf" name="ID-9b1b242f-d391-4e42-97cd-37c186533dbf"></a><span class="section-number-2">1</span> maxCount</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxCount(m <span class="typename">int</span>, n <span class="typename">int</span>, ops [][]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  M := <span class="built_in">make</span>([]([]<span class="typename">int</span>), <span class="number">0</span>,m)</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i+=<span class="number">1</span> {</span><br><span class="line">    r := <span class="built_in">make</span>([]<span class="typename">int</span>,n)</span><br><span class="line">    M = <span class="built_in">append</span>(M, r)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">var</span> max <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> max_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> ops {</span><br><span class="line">    a, b := ops[index][<span class="number">0</span>],ops[index][<span class="number">1</span>]</span><br><span class="line">    fmt.Println(a,b)</span><br><span class="line">    rs := M[<span class="number">0</span>:a]</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> rs {</span><br><span class="line">      ris := rs[index]</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> ris {</span><br><span class="line">	ri := ris[index]</span><br><span class="line">	<span class="keyword">if</span> index == b {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	ri +=<span class="number">1</span></span><br><span class="line">	ris[index]=ri</span><br><span class="line">	<span class="keyword">if</span> ri &gt; max {</span><br><span class="line">	  max = ri</span><br><span class="line">	  max_count = <span class="number">0</span></span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> ri == max {</span><br><span class="line">	  max_count +=<span class="number">1</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      rs[index] = ris</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> max_count</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> maxCount(m <span class="typename">int</span>, n <span class="typename">int</span>, ops [][]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  m_r, m_c := m, n</span><br><span class="line">  <span class="keyword">for</span> _, op := <span class="keyword">range</span> ops {</span><br><span class="line">    op_r := op[<span class="number">0</span>]</span><br><span class="line">    op_c := op[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> op_r &lt; m_r {</span><br><span class="line">      m_r = op_r</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> op_c &lt; m_c {</span><br><span class="line">      m_c = op_c</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> m_r * m_c</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">    fmt.Println(maxCount(<span class="number">3</span>,<span class="number">3</span>, [][]<span class="typename">int</span>{[]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">2</span>},[]<span class="typename">int</span>{<span class="number">3</span>,<span class="number">3</span>}}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="ID-b3c790ed-cabd-4916-93b0-bb67e7559852" name="ID-b3c790ed-cabd-4916-93b0-bb67e7559852"></a><span class="section-number-2">2</span> lengthOfLongestSubstring</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> lengthOfLongestSubstring(s <span class="typename">string</span>) <span class="typename">int</span> {</span><br><span class="line">  byte_arr := []<span class="typename">byte</span>(s)</span><br><span class="line">  max_sub_arr := <span class="built_in">make</span>([]<span class="typename">byte</span>, <span class="number">0</span>)</span><br><span class="line">  byte_sub_arr := <span class="built_in">make</span>([]<span class="typename">byte</span>, <span class="number">0</span>)</span><br><span class="line">  byte_m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">byte</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">var</span> start_index <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, byte_i := <span class="keyword">range</span> byte_arr {</span><br><span class="line">    <span class="keyword">if</span> ori_index, ok := byte_m[byte_i]; !ok {</span><br><span class="line">      byte_m[byte_i] = index</span><br><span class="line">      byte_sub_arr = <span class="built_in">append</span>(byte_sub_arr, byte_i)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">len</span>(max_sub_arr) &lt; <span class="built_in">len</span>(byte_sub_arr) {</span><br><span class="line">	max_sub_arr = byte_sub_arr</span><br><span class="line">      }</span><br><span class="line">      byte_sub_arr = byte_arr[ori_index+<span class="number">1</span> : index+<span class="number">1</span>]</span><br><span class="line">      <span class="keyword">for</span> ; start_index &lt;= ori_index; start_index += <span class="number">1</span> {</span><br><span class="line">	<span class="built_in">delete</span>(byte_m, byte_arr[start_index])</span><br><span class="line">      }</span><br><span class="line">      byte_m[byte_i] = index</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(max_sub_arr) &lt; <span class="built_in">len</span>(byte_sub_arr) {</span><br><span class="line">    max_sub_arr = byte_sub_arr</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">len</span>(max_sub_arr)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(lengthOfLongestSubstring(<span class="string">"abcabcbb"</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="ID-e9a9a0bd-79f4-49e2-8fdf-3e4051bd304e" name="ID-e9a9a0bd-79f4-49e2-8fdf-3e4051bd304e"></a><span class="section-number-2">3</span> findMedianSortedArrays</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findMedianSortedArrays(nums1 []<span class="typename">int</span>, nums2 []<span class="typename">int</span>) <span class="typename">float64</span> {</span><br><span class="line">  total := <span class="built_in">len</span>(nums1) + <span class="built_in">len</span>(nums2)</span><br><span class="line">  <span class="keyword">if</span> total%<span class="number">2</span> &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> findKth(nums1, nums2, total/<span class="number">2</span>+<span class="number">1</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> (findKth(nums1, nums2, total/<span class="number">2</span>) + findKth(nums1, nums2, total/<span class="number">2</span>+<span class="number">1</span>)) / <span class="typename">float64</span>(<span class="number">2</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> findKth(a []<span class="typename">int</span>, b []<span class="typename">int</span>, k <span class="typename">int</span> ) <span class="typename">float64</span> {</span><br><span class="line">  m, n := <span class="built_in">len</span>(a), <span class="built_in">len</span>(b)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//always assume that m is equal or smaller than n</span></span><br><span class="line">  <span class="keyword">if</span> m &gt; n {</span><br><span class="line">    <span class="keyword">return</span> findKth(b, a, k)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> m == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="typename">float64</span>(b[k-<span class="number">1</span>])</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> k == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="typename">float64</span>(min(a[<span class="number">0</span>], b[<span class="number">0</span>]))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">//divide k into two parts</span></span><br><span class="line">  pa := min(k/<span class="number">2</span>, m)</span><br><span class="line">  pb := k - pa</span><br><span class="line">  <span class="keyword">if</span> a[pa-<span class="number">1</span>] &lt; b[pb-<span class="number">1</span>] {</span><br><span class="line">    <span class="keyword">return</span> findKth(a[pa:], b, k-pa)</span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> a[pa-<span class="number">1</span>] &gt; b[pb-<span class="number">1</span>] {</span><br><span class="line">    <span class="keyword">return</span> findKth(a, b[pb:], k-pb)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="typename">float64</span>(a[pa-<span class="number">1</span>])</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(findMedianSortedArrays([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">3</span>}, []<span class="typename">int</span>{<span class="number">2</span>}))</span><br><span class="line">  fmt.Println(findMedianSortedArrays([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>}, []<span class="typename">int</span>{<span class="number">3</span>, <span class="number">4</span>}))</span><br><span class="line">  fmt.Println(findMedianSortedArrays([]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>}, []<span class="typename">int</span>{<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>}))</span><br><span class="line">  fmt.Println(findMedianSortedArrays([]<span class="typename">int</span>{<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>}, []<span class="typename">int</span>{<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">9</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="ID-fd1eab89-a9ba-4ec4-b025-2d621ed67a95" name="ID-fd1eab89-a9ba-4ec4-b025-2d621ed67a95"></a><span class="section-number-2">4</span> findMin</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findMin(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">2</span> {</span><br><span class="line">    <span class="keyword">return</span> min(nums[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  max_min_num := nums[<span class="number">0</span>]</span><br><span class="line">  mid_num := nums[size/<span class="number">2</span>]</span><br><span class="line">  <span class="keyword">if</span> mid_num &gt; max_min_num {</span><br><span class="line">    <span class="keyword">return</span> findMin(nums[size/<span class="number">2</span>+<span class="number">1</span>:])</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">if</span> nums[size/<span class="number">2</span>-<span class="number">1</span>] &gt; nums[size/<span class="number">2</span>] {</span><br><span class="line">      <span class="keyword">return</span> nums[size/<span class="number">2</span>]</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> findMin(nums[:size/<span class="number">2</span>])</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span>{</span><br><span class="line">  <span class="keyword">if</span> a &gt; b{</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ID-a5b26f2a-0380-4fa6-b520-5798c7965ad9" name="ID-a5b26f2a-0380-4fa6-b520-5798c7965ad9"></a><span class="section-number-2">5</span> findDiagonalOrder</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> findDiagonalOrder(matrix [][]<span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  rst_arr := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(martix) &lt; <span class="number">1</span> || <span class="built_in">len</span>(matrix[<span class="number">0</span>]) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> rst_arr</span><br><span class="line">  }</span><br><span class="line">  r_n := <span class="built_in">len</span>(matrix)</span><br><span class="line">  c_n := <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">  max_n := max(r_n, c_n)</span><br><span class="line">  order := <span class="string">"asc"</span> <span class="comment">// desc</span></span><br><span class="line">  <span class="keyword">var</span> r_index, c_index <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> r_index == r_n-<span class="number">1</span> &amp;&amp; c_index == c_n-<span class="number">1</span> {</span><br><span class="line">      rst_arr = <span class="built_in">append</span>(rst_arr, matrix[r_index][c_index])</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> order {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"asc"</span>:</span><br><span class="line">      order = <span class="string">"desc"</span></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	rst_arr = <span class="built_in">append</span>(rst_arr, matrix[r_index][c_index])</span><br><span class="line">	<span class="keyword">if</span> c_index == c_n-<span class="number">1</span> || r_index == <span class="number">0</span> {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	c_index += <span class="number">1</span></span><br><span class="line">	r_index -= <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> r_index == <span class="number">0</span> {</span><br><span class="line">	<span class="keyword">if</span> c_index == c_n-<span class="number">1</span> {</span><br><span class="line">	  r_index += <span class="number">1</span></span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  c_index += <span class="number">1</span></span><br><span class="line">	}</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> c_index == c_n-<span class="number">1</span> {</span><br><span class="line">	r_index += <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"desc"</span>:</span><br><span class="line">      order = <span class="string">"asc"</span></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	rst_arr = <span class="built_in">append</span>(rst_arr, matrix[r_index][c_index])</span><br><span class="line">	<span class="keyword">if</span> c_index == <span class="number">0</span> || r_index == r_n-<span class="number">1</span> {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">	c_index -= <span class="number">1</span></span><br><span class="line">	r_index += <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> c_index == <span class="number">0</span> {</span><br><span class="line">	<span class="keyword">if</span> r_index == r_n-<span class="number">1</span> {</span><br><span class="line">	  c_index += <span class="number">1</span></span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  r_index += <span class="number">1</span></span><br><span class="line">	}</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> r_index == r_n-<span class="number">1</span> {</span><br><span class="line">	c_index += <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> rst_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="ID-73922e93-05b4-4f85-84ee-46dd3aa53c32" name="ID-73922e93-05b4-4f85-84ee-46dd3aa53c32"></a><span class="section-number-2">6</span> thirdMax</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> parent(i <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">return</span> i / <span class="number">2</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> left(i <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>*i + <span class="number">1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> right(i <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * (i + <span class="number">1</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> min_heapify(A []<span class="typename">int</span>, i <span class="typename">int</span>) {</span><br><span class="line">  l := left(i)</span><br><span class="line">  r := right(i)</span><br><span class="line">  <span class="keyword">var</span> least <span class="typename">int</span></span><br><span class="line">  <span class="keyword">if</span> l &lt; <span class="built_in">len</span>(A) &amp;&amp; A[l] &lt; A[i] {</span><br><span class="line">    least = l</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    least = i</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> r &lt; <span class="built_in">len</span>(A) &amp;&amp; A[r] &lt; A[least] {</span><br><span class="line">    least = r</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> least != i {</span><br><span class="line">    A[i], A[least] = A[least], A[i]</span><br><span class="line">    min_heapify(A, least)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> thirdMax(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> size <span class="typename">int</span> = <span class="number">3</span></span><br><span class="line">  min_heap := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  heap_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">bool</span>)</span><br><span class="line">  <span class="keyword">var</span> index <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> !heap_M[nums[index]] {</span><br><span class="line">      heap_M[nums[index]] = <span class="constant">true</span></span><br><span class="line">      min_heap = <span class="built_in">append</span>(min_heap, nums[index])</span><br><span class="line">    }</span><br><span class="line">    index += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(min_heap) == size {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> index == <span class="built_in">len</span>(nums) {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(min_heap) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">    min_heapify(min_heap, i)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> index == <span class="built_in">len</span>(nums) {</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(min_heap) == size {</span><br><span class="line">      <span class="keyword">return</span> min_heap[<span class="number">0</span>]</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">var</span> max <span class="typename">int</span></span><br><span class="line">      <span class="keyword">for</span> _, num := <span class="keyword">range</span> min_heap {</span><br><span class="line">	<span class="keyword">if</span> num &gt; max {</span><br><span class="line">	  max = num</span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> max</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := index; i &lt; <span class="built_in">len</span>(nums); i += <span class="number">1</span> {</span><br><span class="line">    num := nums[i]</span><br><span class="line">    <span class="keyword">if</span> num &gt; min_heap[<span class="number">0</span>] &amp;&amp; !heap_M[num] {</span><br><span class="line">      <span class="built_in">delete</span>(heap_M, min_heap[<span class="number">0</span>])</span><br><span class="line">      heap_M[num] = <span class="constant">true</span></span><br><span class="line">      min_heap[<span class="number">0</span>] = num</span><br><span class="line">      min_heapify(min_heap, <span class="number">0</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> min_heap[<span class="number">0</span>]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(thirdMax([]<span class="typename">int</span>{<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>}))</span><br><span class="line">  fmt.Println(thirdMax([]<span class="typename">int</span>{<span class="number">1</span>, <span class="number">2</span>}))</span><br><span class="line">  fmt.Println(thirdMax([]<span class="typename">int</span>{<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>}))</span><br><span class="line">  fmt.Println(thirdMax([]<span class="typename">int</span>{<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">0</span>}))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><a id="ID-ccffae10-c143-45a3-978d-93250f1561f5" name="ID-ccffae10-c143-45a3-978d-93250f1561f5"></a><span class="section-number-2">7</span> combinationSum</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><a id="ID-ee8098fb-3479-4f62-bae8-4bbde43a8c5f" name="ID-ee8098fb-3479-4f62-bae8-4bbde43a8c5f"></a><span class="section-number-3">7.1</span> combinationSum</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PreCombin <span class="keyword">struct</span> {</span><br><span class="line">  Sum <span class="typename">int</span></span><br><span class="line">  Arr []<span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> IsEqualCombin(lc, rc *PreCombin) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> lc.Sum != rc.Sum {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(lc.Arr) != <span class="built_in">len</span>(rc.Arr) {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(lc.Arr); i += <span class="number">1</span> {</span><br><span class="line">    l_num := lc.Arr[i]</span><br><span class="line">    r_num := rc.Arr[i]</span><br><span class="line">    <span class="keyword">if</span> l_num != r_num {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortInsert(nums []<span class="typename">int</span>, num <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{num}</span><br><span class="line">  }</span><br><span class="line">  new_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums)+<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">copy</span>(new_nums, nums)</span><br><span class="line">  new_nums[<span class="built_in">len</span>(nums)] = num</span><br><span class="line"></span><br><span class="line">  num_index := <span class="built_in">len</span>(new_nums) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(new_nums) - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> new_nums[i] &lt;= new_nums[num_index] {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    new_nums[i], new_nums[num_index] = new_nums[num_index], new_nums[i]</span><br><span class="line">    num_index = i</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> new_nums</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> combinationSum(candidates []<span class="typename">int</span>, target <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  combin_arr := <span class="built_in">make</span>([]([]<span class="typename">int</span>), <span class="number">0</span>)</span><br><span class="line">  pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> candidates {</span><br><span class="line">    num := candidates[index]</span><br><span class="line">    <span class="keyword">if</span> num &gt; target {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sub_pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">      pre_combin := pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	  _pre_combin := &amp;PreCombin{</span><br><span class="line">	    Sum: pre_combin.Sum + num,</span><br><span class="line">	    Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	  }</span><br><span class="line">	  sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">	  pre_combin = _pre_combin</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_combin := &amp;PreCombin{</span><br><span class="line">      Sum: num,</span><br><span class="line">      Arr: []<span class="typename">int</span>{num},</span><br><span class="line">    }</span><br><span class="line">    sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, pre_combin)</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	_pre_combin := &amp;PreCombin{</span><br><span class="line">	  Sum: pre_combin.Sum + num,</span><br><span class="line">	  Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	}</span><br><span class="line">	sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">	pre_combin = _pre_combin</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_pre_combin_arr {</span><br><span class="line">      sub_pre_combin := sub_pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">var</span> hasEqual <span class="typename">bool</span></span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">	pre_combin := pre_combin_arr[index]</span><br><span class="line">	<span class="keyword">if</span> IsEqualCombin(sub_pre_combin, pre_combin) {</span><br><span class="line">	  hasEqual = <span class="constant">true</span></span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> !hasEqual {</span><br><span class="line">	pre_combin_arr = <span class="built_in">append</span>(pre_combin_arr, sub_pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">    pre_combin := pre_combin_arr[index]</span><br><span class="line">    <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">      combin_arr = <span class="built_in">append</span>(combin_arr, pre_combin.Arr)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combin_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combinationSum([]<span class="typename">int</span>{<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>}, <span class="number">7</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><a id="ID-68a29d63-8ec4-4317-b132-f18daf0f4df9" name="ID-68a29d63-8ec4-4317-b132-f18daf0f4df9"></a><span class="section-number-3">7.2</span> combinationSum2</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PreCombin <span class="keyword">struct</span> {</span><br><span class="line">  Sum <span class="typename">int</span></span><br><span class="line">  Arr []<span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> IsEqualCombin(lc, rc *PreCombin) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> lc.Sum != rc.Sum {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(lc.Arr) != <span class="built_in">len</span>(rc.Arr) {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(lc.Arr); i += <span class="number">1</span> {</span><br><span class="line">    l_num := lc.Arr[i]</span><br><span class="line">    r_num := rc.Arr[i]</span><br><span class="line">    <span class="keyword">if</span> l_num != r_num {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortInsert(nums []<span class="typename">int</span>, num <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{num}</span><br><span class="line">  }</span><br><span class="line">  new_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums)+<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">copy</span>(new_nums, nums)</span><br><span class="line">  new_nums[<span class="built_in">len</span>(nums)] = num</span><br><span class="line"></span><br><span class="line">  num_index := <span class="built_in">len</span>(new_nums) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(new_nums) - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> new_nums[i] &lt;= new_nums[num_index] {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    new_nums[i], new_nums[num_index] = new_nums[num_index], new_nums[i]</span><br><span class="line">    num_index = i</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> new_nums</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> combinationSum2(candidates []<span class="typename">int</span>, target <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  combin_arr := <span class="built_in">make</span>([]([]<span class="typename">int</span>), <span class="number">0</span>)</span><br><span class="line">  pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> candidates {</span><br><span class="line">    num := candidates[index]</span><br><span class="line">    <span class="keyword">if</span> num &gt; target {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sub_pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">      pre_combin := pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	_pre_combin := &amp;PreCombin{</span><br><span class="line">	  Sum: pre_combin.Sum + num,</span><br><span class="line">	  Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	}</span><br><span class="line">	sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_combin := &amp;PreCombin{</span><br><span class="line">      Sum: num,</span><br><span class="line">      Arr: []<span class="typename">int</span>{num},</span><br><span class="line">    }</span><br><span class="line">    sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, pre_combin)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_pre_combin_arr {</span><br><span class="line">      sub_pre_combin := sub_pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">var</span> hasEqual <span class="typename">bool</span></span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">	pre_combin := pre_combin_arr[index]</span><br><span class="line">	<span class="keyword">if</span> IsEqualCombin(sub_pre_combin, pre_combin) {</span><br><span class="line">	  hasEqual = <span class="constant">true</span></span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> !hasEqual {</span><br><span class="line">	pre_combin_arr = <span class="built_in">append</span>(pre_combin_arr, sub_pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">    pre_combin := pre_combin_arr[index]</span><br><span class="line">    <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">      combin_arr = <span class="built_in">append</span>(combin_arr, pre_combin.Arr)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combin_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combinationSum2([]<span class="typename">int</span>{<span class="number">10</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>}, <span class="number">8</span>))</span><br><span class="line">  fmt.Println(combinationSum2([]<span class="typename">int</span>{<span class="number">4</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>}, <span class="number">6</span>))</span><br><span class="line">  fmt.Println(combinationSum2([]<span class="typename">int</span>{<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">1</span>}, <span class="number">8</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><a id="ID-32c7b111-4957-46ee-8004-4744610e9b7b" name="ID-32c7b111-4957-46ee-8004-4744610e9b7b"></a><span class="section-number-3">7.3</span> combinationSum3</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PreCombin <span class="keyword">struct</span> {</span><br><span class="line">  Sum <span class="typename">int</span></span><br><span class="line">  Arr []<span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> IsEqualCombin(lc, rc *PreCombin) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> lc.Sum != rc.Sum {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(lc.Arr) != <span class="built_in">len</span>(rc.Arr) {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(lc.Arr); i += <span class="number">1</span> {</span><br><span class="line">    l_num := lc.Arr[i]</span><br><span class="line">    r_num := rc.Arr[i]</span><br><span class="line">    <span class="keyword">if</span> l_num != r_num {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortInsert(nums []<span class="typename">int</span>, num <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{num}</span><br><span class="line">  }</span><br><span class="line">  new_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums)+<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">copy</span>(new_nums, nums)</span><br><span class="line">  new_nums[<span class="built_in">len</span>(nums)] = num</span><br><span class="line"></span><br><span class="line">  num_index := <span class="built_in">len</span>(new_nums) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(new_nums) - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> new_nums[i] &lt;= new_nums[num_index] {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    new_nums[i], new_nums[num_index] = new_nums[num_index], new_nums[i]</span><br><span class="line">    num_index = i</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> new_nums</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> combinationSum3(k <span class="typename">int</span>, n <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  candidates := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="number">9</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> candidates {</span><br><span class="line">    candidates[index] = index + <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  target := n</span><br><span class="line"></span><br><span class="line">  combin_arr := <span class="built_in">make</span>([]([]<span class="typename">int</span>), <span class="number">0</span>)</span><br><span class="line">  pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> candidates {</span><br><span class="line">    num := candidates[index]</span><br><span class="line">    <span class="keyword">if</span> num &gt; target {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sub_pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">      pre_combin := pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	_pre_combin := &amp;PreCombin{</span><br><span class="line">	  Sum: pre_combin.Sum + num,</span><br><span class="line">	  Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	}</span><br><span class="line">	sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_combin := &amp;PreCombin{</span><br><span class="line">      Sum: num,</span><br><span class="line">      Arr: []<span class="typename">int</span>{num},</span><br><span class="line">    }</span><br><span class="line">    sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, pre_combin)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_pre_combin_arr {</span><br><span class="line">      sub_pre_combin := sub_pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">var</span> hasEqual <span class="typename">bool</span></span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">	pre_combin := pre_combin_arr[index]</span><br><span class="line">	<span class="keyword">if</span> IsEqualCombin(sub_pre_combin, pre_combin) {</span><br><span class="line">	  hasEqual = <span class="constant">true</span></span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> !hasEqual {</span><br><span class="line">	pre_combin_arr = <span class="built_in">append</span>(pre_combin_arr, sub_pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">    pre_combin := pre_combin_arr[index]</span><br><span class="line">    <span class="keyword">if</span> pre_combin.Sum == target &amp;&amp; <span class="built_in">len</span>(pre_combin.Arr) == k {</span><br><span class="line">      combin_arr = <span class="built_in">append</span>(combin_arr, pre_combin.Arr)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combin_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combinationSum3(<span class="number">3</span>, <span class="number">7</span>))</span><br><span class="line">  fmt.Println(combinationSum3(<span class="number">3</span>, <span class="number">9</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><a id="ID-508c0650-b862-443c-8133-a208106f80b1" name="ID-508c0650-b862-443c-8133-a208106f80b1"></a><span class="section-number-3">7.4</span> combinationSum4</h3>
<div class="outline-text-3" id="text-7-4">
</div>
<div id="outline-container-sec-7-4-1" class="outline-4">
<h4 id="sec-7-4-1"><a id="ID-31ada6cc-1e8b-42bd-8bac-3010f78b96fc" name="ID-31ada6cc-1e8b-42bd-8bac-3010f78b96fc"></a><span class="section-number-4">7.4.1</span> V1</h4>
<div class="outline-text-4" id="text-7-4-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> PreCombin <span class="keyword">struct</span> {</span><br><span class="line">  Sum <span class="typename">int</span></span><br><span class="line">  Arr []<span class="typename">int</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> IsEqualCombin(lc, rc *PreCombin) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> lc.Sum != rc.Sum {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(lc.Arr) != <span class="built_in">len</span>(rc.Arr) {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(lc.Arr); i += <span class="number">1</span> {</span><br><span class="line">    l_num := lc.Arr[i]</span><br><span class="line">    r_num := rc.Arr[i]</span><br><span class="line">    <span class="keyword">if</span> l_num != r_num {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sortInsert(nums []<span class="typename">int</span>, num <span class="typename">int</span>) []<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="typename">int</span>{num}</span><br><span class="line">  }</span><br><span class="line">  new_nums := <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(nums)+<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">copy</span>(new_nums, nums)</span><br><span class="line">  new_nums[<span class="built_in">len</span>(nums)] = num</span><br><span class="line"></span><br><span class="line">  num_index := <span class="built_in">len</span>(new_nums) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="built_in">len</span>(new_nums) - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> new_nums[i] &lt;= new_nums[num_index] {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">    new_nums[i], new_nums[num_index] = new_nums[num_index], new_nums[i]</span><br><span class="line">    num_index = i</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> new_nums</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> permut_num(nums []<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  size := <span class="built_in">len</span>(nums)</span><br><span class="line">  num_M := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>)</span><br><span class="line">  <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">    num_M[num] += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(num_M) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> max_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> max_count_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> num, count := <span class="keyword">range</span> num_M {</span><br><span class="line">    <span class="keyword">if</span> count &gt; max_count {</span><br><span class="line">      max_count = count</span><br><span class="line">      max_count_num = num</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">delete</span>(num_M, max_count_num)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> factor <span class="typename">int</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := size; i &gt; max_count; i -= <span class="number">1</span> {</span><br><span class="line">    factor *= i</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> un_factor <span class="typename">int</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> _, count := <span class="keyword">range</span> num_M {</span><br><span class="line">    <span class="keyword">for</span> i := count; i &gt; <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">      un_factor *= i</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> factor / un_factor</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> combinationSum4(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> nums {</span><br><span class="line">    num := nums[index]</span><br><span class="line">    <span class="keyword">if</span> num &gt; target {</span><br><span class="line">      <span class="keyword">continue</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sub_pre_combin_arr := <span class="built_in">make</span>([]*PreCombin, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">      pre_combin := pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> {</span><br><span class="line">	<span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	  _pre_combin := &amp;PreCombin{</span><br><span class="line">	    Sum: pre_combin.Sum + num,</span><br><span class="line">	    Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	  }</span><br><span class="line">	  sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">	  pre_combin = _pre_combin</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pre_combin := &amp;PreCombin{</span><br><span class="line">      Sum: num,</span><br><span class="line">      Arr: []<span class="typename">int</span>{num},</span><br><span class="line">    }</span><br><span class="line">    sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, pre_combin)</span><br><span class="line">    <span class="keyword">for</span> {</span><br><span class="line">      <span class="keyword">if</span> pre_combin.Sum+num &lt;= target {</span><br><span class="line">	_pre_combin := &amp;PreCombin{</span><br><span class="line">	  Sum: pre_combin.Sum + num,</span><br><span class="line">	  Arr: sortInsert(pre_combin.Arr, num),</span><br><span class="line">	}</span><br><span class="line">	sub_pre_combin_arr = <span class="built_in">append</span>(sub_pre_combin_arr, _pre_combin)</span><br><span class="line">	pre_combin = _pre_combin</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_pre_combin_arr {</span><br><span class="line">      sub_pre_combin := sub_pre_combin_arr[index]</span><br><span class="line">      <span class="keyword">var</span> hasEqual <span class="typename">bool</span></span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">	pre_combin := pre_combin_arr[index]</span><br><span class="line">	<span class="keyword">if</span> IsEqualCombin(sub_pre_combin, pre_combin) {</span><br><span class="line">	  hasEqual = <span class="constant">true</span></span><br><span class="line">	  <span class="keyword">break</span></span><br><span class="line">	}</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> !hasEqual {</span><br><span class="line">	pre_combin_arr = <span class="built_in">append</span>(pre_combin_arr, sub_pre_combin)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> permuts <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> pre_combin_arr {</span><br><span class="line">    pre_combin := pre_combin_arr[index]</span><br><span class="line">    <span class="keyword">if</span> pre_combin.Sum == target {</span><br><span class="line">      permuts += permut_num(pre_combin.Arr)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> permuts</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-7-4-2" class="outline-4">
<h4 id="sec-7-4-2"><a id="ID-aed8a550-4f8a-4589-844b-650785649b11" name="ID-aed8a550-4f8a-4589-844b-650785649b11"></a><span class="section-number-4">7.4.2</span> V2</h4>
<div class="outline-text-4" id="text-7-4-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> permut_num(num_M <span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(num_M) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sum_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> max_count <span class="typename">int</span></span><br><span class="line">  <span class="keyword">var</span> max_count_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> num, count := <span class="keyword">range</span> num_M {</span><br><span class="line">    sum_count += count</span><br><span class="line">    <span class="keyword">if</span> count &gt; max_count {</span><br><span class="line">      max_count = count</span><br><span class="line">      max_count_num = num</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">delete</span>(num_M, max_count_num)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> factor <span class="typename">int</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := sum_count; i &gt; max_count; i -= <span class="number">1</span> {</span><br><span class="line">    factor *= i</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> un_factor <span class="typename">int</span> = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> _, count := <span class="keyword">range</span> num_M {</span><br><span class="line">    <span class="keyword">for</span> i := count; i &gt; <span class="number">0</span>; i -= <span class="number">1</span> {</span><br><span class="line">      un_factor *= i</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> factor / un_factor</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> combinationSum4(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">var</span> result_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> target%nums[<span class="number">0</span>] == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fir_num := nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">var</span> factor <span class="typename">int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> sub_sum := <span class="number">0</span>; sub_sum &lt;= target; sub_sum += fir_num {</span><br><span class="line">    combin_M_arr := sub_combin(nums[<span class="number">1</span>:], target-fir_num*factor)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(combin_M_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> combin_M_arr {</span><br><span class="line">	combin_M := combin_M_arr[index]</span><br><span class="line">	combin_M[fir_num] = factor</span><br><span class="line">	result_num += permut_num(combin_M)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> fir_num*factor == target {</span><br><span class="line">      result_num += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    factor += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result_num</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sub_combin(nums []<span class="typename">int</span>, target <span class="typename">int</span>) [](<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>) {</span><br><span class="line">  <span class="keyword">if</span> target &lt; <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">return</span> []<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">if</span> target%nums[<span class="number">0</span>] == <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">return</span> []<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>{</span><br><span class="line">	<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>{</span><br><span class="line">	  nums[<span class="number">0</span>]: target / nums[<span class="number">0</span>],</span><br><span class="line">	},</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> []<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>{}</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fir_num := nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">var</span> factor <span class="typename">int</span> = <span class="number">0</span></span><br><span class="line">  combin_M_arr := <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">for</span> sub_sum := <span class="number">0</span>; sub_sum &lt;= target; sub_sum += fir_num {</span><br><span class="line">    sub_combin_M_arr := sub_combin(nums[<span class="number">1</span>:], target-fir_num*factor)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sub_combin_M_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_combin_M_arr {</span><br><span class="line">	combin_M := sub_combin_M_arr[index]</span><br><span class="line">	combin_M[fir_num] = factor</span><br><span class="line">	combin_M_arr = <span class="built_in">append</span>(combin_M_arr, combin_M)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> fir_num*factor == target {</span><br><span class="line">      combin_M := <span class="keyword">map</span>[<span class="typename">int</span>]<span class="typename">int</span>{</span><br><span class="line">	fir_num: factor,</span><br><span class="line">      }</span><br><span class="line">      combin_M_arr = <span class="built_in">append</span>(combin_M_arr, combin_M)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    factor += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combin_M_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>}, <span class="number">4</span>))</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">50</span>}, <span class="number">200</span>))</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">3</span>,<span class="number">33</span>,<span class="number">333</span>}, <span class="number">10000</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-7-4-3" class="outline-4">
<h4 id="sec-7-4-3"><a id="ID-76410893-d941-4d45-b5e2-699f9f7f30ce" name="ID-76410893-d941-4d45-b5e2-699f9f7f30ce"></a><span class="section-number-4">7.4.3</span> V3</h4>
<div class="outline-text-4" id="text-7-4-3">
<p>
动态规划解法
</p>
<blockquote>
<ul class="org-ul">
<li>dp[i] += dp[i-num]
</li>
<li>dp[i+num] += dp[i]
</li>
</ul>
</blockquote>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> combinationSum4(nums []<span class="typename">int</span>, target <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  dp := <span class="built_in">make</span>([]<span class="typename">int</span>, target+<span class="number">1</span>)</span><br><span class="line">  dp[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= target; i += <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">for</span> _, num := <span class="keyword">range</span> nums {</span><br><span class="line">      <span class="keyword">if</span> i &gt;= num {</span><br><span class="line">	dp[i] += dp[i-num]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> dp[target]</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>}, <span class="number">4</span>))</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">1</span>,<span class="number">50</span>}, <span class="number">200</span>))</span><br><span class="line">  fmt.Println(combinationSum4([]<span class="typename">int</span>{<span class="number">3</span>,<span class="number">33</span>,<span class="number">333</span>}, <span class="number">10000</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><a id="ID-cb405d02-85b3-43a1-b038-88b6514d2e4d" name="ID-cb405d02-85b3-43a1-b038-88b6514d2e4d"></a><span class="section-number-2">8</span> combine</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> combine(n <span class="typename">int</span>, k <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">return</span> subCombine(<span class="number">1</span>, n, k)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> subCombine(start, end, k <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> k &lt; <span class="number">1</span> || end-start+<span class="number">1</span> &lt; k {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  combine_arr := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">if</span> k == <span class="number">1</span> {</span><br><span class="line">    <span class="keyword">for</span> i := start; i &lt;= end; i += <span class="number">1</span> {</span><br><span class="line">      combine_arr = <span class="built_in">append</span>(combine_arr, []<span class="typename">int</span>{i})</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i := start; i &lt;= end-(k-<span class="number">1</span>); i += <span class="number">1</span> {</span><br><span class="line">    sub_combine_arr := subCombine(i+<span class="number">1</span>, end, k-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sub_combine_arr) &gt; <span class="number">0</span> {</span><br><span class="line">      <span class="keyword">for</span> index, _ := <span class="keyword">range</span> sub_combine_arr {</span><br><span class="line">	combines := <span class="built_in">append</span>([]<span class="typename">int</span>{i}, sub_combine_arr[index]...)</span><br><span class="line">	combine_arr = <span class="built_in">append</span>(combine_arr, combines)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> combine_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(combine(<span class="number">4</span>,<span class="number">2</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><a id="ID-bd707923-45c0-4a71-bbe5-6984745418a1" name="ID-bd707923-45c0-4a71-bbe5-6984745418a1"></a><span class="section-number-2">9</span> pathSum</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><a id="ID-1e7a0c31-b352-4497-9c4b-852a5c68839d" name="ID-1e7a0c31-b352-4497-9c4b-852a5c68839d"></a><span class="section-number-3">9.1</span> hasPathSum</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> hasPathSum(root *TreeNode, sum <span class="typename">int</span>) <span class="typename">bool</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">if</span> root.Val == sum {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> hasPathSum(root.Left, sum-root.Val) || hasPathSum(root.Right, sum-root.Val)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  lc := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">4</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">11</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">7</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  rc := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">8</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">13</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">4</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">5</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val:   <span class="number">5</span>,</span><br><span class="line">    Left:  lc,</span><br><span class="line">    Right: rc,</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(hasPathSum(root, <span class="number">22</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><a id="ID-e7293432-dffd-4385-88f5-7ea80dc090a5" name="ID-e7293432-dffd-4385-88f5-7ea80dc090a5"></a><span class="section-number-3">9.2</span> pathSum</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> pathSum(root *TreeNode, sum <span class="typename">int</span>) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">if</span> root.Val == sum {</span><br><span class="line">      <span class="keyword">return</span> [][]<span class="typename">int</span>{[]<span class="typename">int</span>{root.Val}}</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> lc_path_arr, rc_path_arr [][]<span class="typename">int</span></span><br><span class="line">  <span class="keyword">if</span> root.Left != <span class="constant">nil</span> {</span><br><span class="line">    lc_path_arr = pathSum(root.Left, sum-root.Val)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Right != <span class="constant">nil</span> {</span><br><span class="line">    rc_path_arr = pathSum(root.Right, sum-root.Val)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  path_arr := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(lc_path_arr) &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lc_path_arr {</span><br><span class="line">      path := lc_path_arr[index]</span><br><span class="line">      path = <span class="built_in">append</span>([]<span class="typename">int</span>{root.Val}, path...)</span><br><span class="line">      path_arr = <span class="built_in">append</span>(path_arr, path)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">len</span>(rc_path_arr) &gt; <span class="number">0</span> {</span><br><span class="line">    <span class="keyword">for</span> index, _ := <span class="keyword">range</span> rc_path_arr {</span><br><span class="line">      path := rc_path_arr[index]</span><br><span class="line">      path = <span class="built_in">append</span>([]<span class="typename">int</span>{root.Val}, path...)</span><br><span class="line">      path_arr = <span class="built_in">append</span>(path_arr, path)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> path_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  lc := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">4</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">11</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">7</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  rc := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">8</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">13</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">4</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">5</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val:   <span class="number">5</span>,</span><br><span class="line">    Left:  lc,</span><br><span class="line">    Right: rc,</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(pathSum(root, <span class="number">22</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><a id="ID-5c24ea93-56b6-4352-8e56-8e8852dbf9ce" name="ID-5c24ea93-56b6-4352-8e56-8e8852dbf9ce"></a><span class="section-number-3">9.3</span> number of path</h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> pathSum(root *TreeNode, sum <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sumUp(root, <span class="number">0</span>, sum) + pathSum(root.Left, sum) + pathSum(root.Right, sum)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sumUp(node *TreeNode, pre, sum <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> node == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> cur <span class="typename">int</span> = pre + node.Val</span><br><span class="line">  <span class="keyword">var</span> res_num <span class="typename">int</span></span><br><span class="line">  <span class="keyword">if</span> cur == sum {</span><br><span class="line">    res_num += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> res_num + sumUp(node.Left, cur, sum) + sumUp(node.Right, cur, sum)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  lc := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">5</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">      Left: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">3</span>,</span><br><span class="line">      },</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: -<span class="number">2</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">      Right: &amp;TreeNode{</span><br><span class="line">	Val: <span class="number">1</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  rc := &amp;TreeNode{</span><br><span class="line">    Val: -<span class="number">3</span>,</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">11</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val:   <span class="number">10</span>,</span><br><span class="line">    Left:  lc,</span><br><span class="line">    Right: rc,</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(pathSum(root, <span class="number">8</span>))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><a id="ID-c79678d7-7b3d-483d-9f76-4c728f429693" name="ID-c79678d7-7b3d-483d-9f76-4c728f429693"></a><span class="section-number-3">9.4</span> min path sum</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> minPathSum(grid [][]<span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  dp := <span class="built_in">make</span>([][]<span class="typename">int</span>, <span class="built_in">len</span>(grid))</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> dp {</span><br><span class="line">    dp[index] = <span class="built_in">make</span>([]<span class="typename">int</span>, <span class="built_in">len</span>(grid[<span class="number">0</span>]))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> r_i, _ := <span class="keyword">range</span> grid {</span><br><span class="line">    <span class="keyword">for</span> c_i, _ := <span class="keyword">range</span> grid[r_i] {</span><br><span class="line">      <span class="keyword">if</span> r_i == <span class="number">0</span> {</span><br><span class="line">	<span class="keyword">if</span> c_i &gt; <span class="number">0</span> {</span><br><span class="line">	  dp[r_i][c_i] = grid[r_i][c_i] + dp[r_i][c_i-<span class="number">1</span>]</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">	  dp[r_i][c_i] = grid[r_i][c_i]</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> c_i == <span class="number">0</span> {</span><br><span class="line">	dp[r_i][<span class="number">0</span>] = grid[r_i][<span class="number">0</span>] + dp[r_i-<span class="number">1</span>][<span class="number">0</span>]</span><br><span class="line">	<span class="keyword">continue</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      dp[r_i][c_i] = grid[r_i][c_i] + min(dp[r_i-<span class="number">1</span>][c_i], dp[r_i][c_i-<span class="number">1</span>])</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> dp[<span class="built_in">len</span>(dp)-<span class="number">1</span>][<span class="built_in">len</span>(dp[<span class="number">0</span>])-<span class="number">1</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> min(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &gt; b {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  fmt.Println(minPathSum([][]<span class="typename">int</span>{</span><br><span class="line">    []<span class="typename">int</span>{<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>},</span><br><span class="line">    []<span class="typename">int</span>{<span class="number">1</span>, <span class="number">5</span>, <span class="number">1</span>},</span><br><span class="line">    []<span class="typename">int</span>{<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>},</span><br><span class="line">  }))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><a id="ID-7cca56da-3dab-4258-864c-78990e2840ea" name="ID-7cca56da-3dab-4258-864c-78990e2840ea"></a><span class="section-number-3">9.5</span> binary-tree maximum path sum</h3>
<div class="outline-text-3" id="text-9-5">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> BpNode <span class="keyword">struct</span> {</span><br><span class="line">  MaxSum_c <span class="typename">int</span></span><br><span class="line">  MaxSum_b <span class="typename">int</span></span><br><span class="line">  Val      <span class="typename">int</span></span><br><span class="line">  Left     *BpNode</span><br><span class="line">  Right    *BpNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> copyTree2Bp(root *TreeNode) *BpNode {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;BpNode{</span><br><span class="line">    Val:   root.Val,</span><br><span class="line">    Left:  copyTree2Bp(root.Left),</span><br><span class="line">    Right: copyTree2Bp(root.Right),</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> max(a, b <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> a &lt; b {</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> bpMaxSum(bpr *BpNode) <span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> bpr == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  max_n := max(bpr.MaxSum_c, bpr.MaxSum_b)</span><br><span class="line">  <span class="keyword">if</span> bpr.Left != <span class="constant">nil</span> {</span><br><span class="line">    max_n = max(max_n, bpMaxSum(bpr.Left))</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> bpr.Right != <span class="constant">nil</span> {</span><br><span class="line">    max_n = max(max_n, bpMaxSum(bpr.Right))</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> max_n</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maxPathSum(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  bpr := copyTree2Bp(root)</span><br><span class="line">  maxPathSumHelper(bpr)</span><br><span class="line">  <span class="keyword">return</span> bpMaxSum(bpr)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> maxPathSumHelper(bpr *BpNode) (</span><br><span class="line">  max_sum_b <span class="typename">int</span>,</span><br><span class="line">) {</span><br><span class="line">  <span class="keyword">if</span> bpr == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lmax_sum_b := maxPathSumHelper(bpr.Left)</span><br><span class="line">  rmax_sum_b := maxPathSumHelper(bpr.Right)</span><br><span class="line"></span><br><span class="line">  bpr.MaxSum_c = bpr.Val + max(<span class="number">0</span>, lmax_sum_b) + max(<span class="number">0</span>, rmax_sum_b)</span><br><span class="line">  bpr.MaxSum_b = bpr.Val + max(<span class="number">0</span>, max(lmax_sum_b, rmax_sum_b))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> bpr.MaxSum_b</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(maxPathSum(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><a id="ID-477baf81-ee8a-4cc8-a58f-afefb4aa693c" name="ID-477baf81-ee8a-4cc8-a58f-afefb4aa693c"></a><span class="section-number-3">9.6</span> sum root to leaf numbers</h3>
<div class="outline-text-3" id="text-9-6">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TreeNode <span class="keyword">struct</span> {</span><br><span class="line">  Val   <span class="typename">int</span></span><br><span class="line">  Left  *TreeNode</span><br><span class="line">  Right *TreeNode</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> sumNumbers(root *TreeNode) <span class="typename">int</span> {</span><br><span class="line">  path_arr := collectPath(root)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sum <span class="typename">int</span></span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> path_arr {</span><br><span class="line">    path := path_arr[index]</span><br><span class="line">    <span class="keyword">var</span> sub_sum <span class="typename">int</span></span><br><span class="line">    <span class="keyword">for</span> _, num := <span class="keyword">range</span> path {</span><br><span class="line">      sub_sum = num + sub_sum*<span class="number">10</span></span><br><span class="line">    }</span><br><span class="line">    sum += sub_sum</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> collectPath(root *TreeNode) [][]<span class="typename">int</span> {</span><br><span class="line">  <span class="keyword">if</span> root == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{}</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> root.Left == <span class="constant">nil</span> &amp;&amp; root.Right == <span class="constant">nil</span> {</span><br><span class="line">    <span class="keyword">return</span> [][]<span class="typename">int</span>{</span><br><span class="line">      []<span class="typename">int</span>{root.Val},</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  lpath_arr := collectPath(root.Left)</span><br><span class="line">  rpath_arr := collectPath(root.Right)</span><br><span class="line">  lpath_arr = <span class="built_in">append</span>(lpath_arr, rpath_arr...)</span><br><span class="line">  <span class="keyword">for</span> index, _ := <span class="keyword">range</span> lpath_arr {</span><br><span class="line">    path := lpath_arr[index]</span><br><span class="line">    path = <span class="built_in">append</span>([]<span class="typename">int</span>{root.Val}, path...)</span><br><span class="line">    lpath_arr[index] = path</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> lpath_arr</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  root := &amp;TreeNode{</span><br><span class="line">    Val: <span class="number">1</span>,</span><br><span class="line">    Left: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">2</span>,</span><br><span class="line">    },</span><br><span class="line">    Right: &amp;TreeNode{</span><br><span class="line">      Val: <span class="number">3</span>,</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  fmt.Println(sumNumbers(root))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><a id="ID-1c457aea-d9d4-435f-a22c-f237315ffed7" name="ID-1c457aea-d9d4-435f-a22c-f237315ffed7"></a><span class="section-number-2">10</span> poor pigs</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> poorPigs(buckets <span class="typename">int</span>, minutesToDie <span class="typename">int</span>, minutesToTest <span class="typename">int</span>) <span class="typename">int</span> {</span><br><span class="line">  time := minutesToTest/minutesToDie + <span class="number">1</span></span><br><span class="line">  res := <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    <span class="keyword">if</span> <span class="typename">int</span>(math.Pow(<span class="typename">float64</span>(time), <span class="typename">float64</span>(res))) &lt; buckets {</span><br><span class="line">      res = res + <span class="number">1</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

Last Updated 2018-04-25 Wed 22:16.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/21/go-logrus/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/21/go-logrus/" itemprop="url">Go的日志库logrus试用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-21T00:00:00+08:00">
                2017-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/21/go-logrus/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/21/go-logrus/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="ID-9c33a24e-99e1-4882-a837-1efea5ca6544" name="ID-9c33a24e-99e1-4882-a837-1efea5ca6544"></a><span class="section-number-2">1</span> 示例</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"os"</span></span><br><span class="line"></span><br><span class="line">  log <span class="string">"github.com/sirupsen/logrus"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> init() {</span><br><span class="line">  <span class="comment">// Log as JSON instead of the default ASCII formatter.</span></span><br><span class="line">  log.SetFormatter(&amp;log.JSONFormatter{})</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Output to stdout instead of the default stderr</span></span><br><span class="line">  <span class="comment">// Can be any io.Writer, see below for File example</span></span><br><span class="line">  log.SetOutput(os.Stdout)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Only log the warning severity or above.</span></span><br><span class="line">  log.SetLevel(log.WarnLevel)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() {</span><br><span class="line">  log.WithFields(log.Fields{</span><br><span class="line">    <span class="string">"animal"</span>: <span class="string">"walrus"</span>,</span><br><span class="line">    <span class="string">"size"</span>:   <span class="number">10</span>,</span><br><span class="line">  }).Info(<span class="string">"A group of walrus emerges from the ocean"</span>)</span><br><span class="line"></span><br><span class="line">  log.WithFields(log.Fields{</span><br><span class="line">    <span class="string">"omg"</span>:    <span class="constant">true</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="number">122</span>,</span><br><span class="line">  }).Warn(<span class="string">"The group's number increased tremendously!"</span>)</span><br><span class="line"></span><br><span class="line">  log.WithFields(log.Fields{</span><br><span class="line">    <span class="string">"omg"</span>:    <span class="constant">true</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="number">100</span>,</span><br><span class="line">  }).Fatal(<span class="string">"The ice breaks!"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// A common pattern is to re-use fields between logging statements by re-using</span></span><br><span class="line">  <span class="comment">// the logrus.Entry returned from WithFields()</span></span><br><span class="line">  contextLogger := log.WithFields(log.Fields{</span><br><span class="line">    <span class="string">"common"</span>: <span class="string">"this is a common field"</span>,</span><br><span class="line">    <span class="string">"other"</span>:  <span class="string">"I also should be logged always"</span>,</span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  contextLogger.Info(<span class="string">"I'll be logged with common and other field"</span>)</span><br><span class="line">  contextLogger.Info(<span class="string">"Me too"</span>)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

Last Updated 2017-06-19 Mon 23:25.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/21/just-try/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/21/just-try/" itemprop="url">Org-mode手册</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-21T00:00:00+08:00">
                2017-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/21/just-try/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/21/just-try/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<p>
org-mode我用了两年，却未曾深入。
最近两周静下心来，仔仔细细的钻研了一番，深深被这厮震撼到了，作为文档编辑工作，在我的认知范围里，无出其右。
归纳整理于此，以作留存，馈与日后。
</p>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 文档结构</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 标题</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Org 是在大纲模式之上实现的。
大纲模式可以让我们用层次结构来组织文档，这（至少对我来说）是笔记和想法的最好实现方式。
这种结构可以折叠（隐藏）文档的一部分而只显示文档的大概结构或者只显示我们正在处理的部分。
Org 大大简化了大纲模式的使用，它把大纲模式的整个显示/隐藏功能整合到了一个命令中：org-cycle，这个命令绑定到了TAB键上。
</p>

<p>
标题定义了大纲树的结构,以处于一行左边缘的一个或多个星号开头,如下:
</p>
<pre class="example">
* Top level headline
** Second level
*** 3rd level
     some text
** 3rd level
     more text
, Another top level headline
</pre>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> 视图命令</h4>
<div class="outline-text-4" id="text-1-1-1">
<table id="table:visibility-cycling" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 1:</span> 视图命令</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>TAB</code></td>
<td class="left">子树循环,在下列状态之间转换当前子树: _,-&gt;folded-&gt;children-&gt;subtree&#x2013;._</td>
<td class="left"><code>org-cycle</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>S-TAB</code></td>
<td class="left">全局循环, 在下列状态之间转换当前的整个buffer： _,-&gt;overview-&gt;contents-&gt;show all&#x2013;._</td>
<td class="left"><code>org-global-cycle</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-r</code></td>
<td class="left">显示当前位置的上下文，展示当前条目，紧跟的标题和标题的层次结构。 适用于通过稀疏树命令或议程命令展露出来的位置附近工作。</td>
<td class="left"><code>org-reveal</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-k</code></td>
<td class="left">展开子树的所有标题，CONTENT视图只有一个子树。</td>
<td class="left"><code>outline-show-branches</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>TAB</code></td>
<td class="left">展开子树的所有直接子节点。</td>
<td class="left"><code>outline-show-children</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>b</code></td>
<td class="left">在间接缓冲区中显示当前子树</td>
<td class="left"><code>org-tree-to-indirect-buffer</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>v</code></td>
<td class="left">将区域中的可见文字复制到 <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Kill-Ring.html" rel="external nofollow noopener noreferrer" target="_blank">kill ring</a>.</td>
<td class="left"><code>org-copy-visible</code></td>
</tr>
</tbody>
</table>
<p>
org-mode默认的视图模式是'OVERVIEW',即概览模式，只有顶层的标题可见。
你可以通过配置变量 <code>org-startup-folded</code> 来改变视图模式，如下:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-startup-folded <span class="quoted">'content</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-catch-invisible-edits <span class="literal">nil</span>)</span> <span class="comment">;; prevent editing an invisible part of the bu↵er</span></span><br></pre></td></tr></table></figure>
</div>

<p>
当然你也可以为每个文件指定视图模式，只要在文件buffer中任意位置包含以下语句（推荐配置在文件头）：
</p>
<pre class="example">
#+STARTUP: overview
#+STARTUP: content
#+STARTUP: showall
#+STARTUP: showeverything
</pre>

<p>
更进一步,任何条目都包含 <code>VISIBILITY</code> 属性，此属性定义了条目的视图模式，覆盖一般性设置。可接受的值为： <b>folded</b> <b>children</b> <b>content</b> <b>all</b>, 示例如下
</p>
<pre class="example">
#+STARTUP: overview
* A
:PROPERTIES:
:VISIBILITY: all
:END:
</pre>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> 跳转命令</h4>
<div class="outline-text-4" id="text-1-1-2">
<table id="table:headline-motion" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 2:</span> 标题跳转命令</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-n</code></td>
<td class="left">跳转到下一个标题</td>
<td class="left"><code>org-next-visible-heading</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-p</code></td>
<td class="left">跳转到上一个标题</td>
<td class="left"><code>org-previous-visible-heading</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-f</code></td>
<td class="left">跳转到下一个同级标题</td>
<td class="left"><code>org-forward-same-level</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-b</code></td>
<td class="left">跳转到上一个同级标题</td>
<td class="left"><code>org-backward-same-level</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-u</code></td>
<td class="left">跳回更高一级的标题</td>
<td class="left"><code>outline-up-heading</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-j</code></td>
<td class="left">跳转到别处，不改变当前的视图模式，创建一个临时buffer来展示当前文档</td>
<td class="left"><code>org-goto</code></td>
</tr>
</tbody>
</table>


<p>
在 <code>C-c C-j</code> 触发的临时buffer中，可用的命令如下：
</p>
<pre class="example">
TAB      Cycle visibility.
down/up  Next/previous visible headline.
RET      Select this location.
/        Do a Sparse-tree search
</pre>
<p>
若是关闭了 <code>org-goto-auto-isearch</code> ，以下命令可用：
</p>
<pre class="example">
n/p      Next/previous visible headline.
f/b      Next/previous headline same level.
u        One level up.
0-9      数字参数
q        退出
</pre>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> 编辑命令</h4>
<div class="outline-text-4" id="text-1-1-3">
<table id="table:structure-editing" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 3:</span> 编辑命令</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>M-RET</code></td>
<td class="left">插入一个同级标题在当前位置(行首，把当前行转成标题；行中，截断余下文本，在下一行生成标题)</td>
<td class="left"><code>org-insert-heading</code></td>
</tr>

<tr>
<td class="left"><code>M-S-RET</code></td>
<td class="left">在M-RET的基础上，添加了 <code>TODO</code> 标示</td>
<td class="left"><code>org-insert-todo-heading</code></td>
</tr>

<tr>
<td class="left"><code>C-RET</code></td>
<td class="left">在当前子树的结束位置插入同级标题</td>
<td class="left"><code>org-insert-heading-respect-content</code></td>
</tr>

<tr>
<td class="left"><code>C-S-RET</code></td>
<td class="left">在C<sub>RET的基础上，添加了</sub> <code>TODO</code> 标示</td>
<td class="left">org-insert-todo-heading-respect-content</td>
</tr>

<tr>
<td class="left"><code>TAB</code></td>
<td class="left">用于还未输入文本信息的标题，第一个TAB变为之前标题的子标题，第二个TAB变为父标题,第三个TAB恢复原有等级 (,-&gt;children-&gt;parent-&gt;initial))</td>
<td class="left"><code>org-cycle</code></td>
</tr>

<tr>
<td class="left"><code>M-left</code></td>
<td class="left">当前标题提升一个等级</td>
<td class="left"><code>org-do-promote</code></td>
</tr>

<tr>
<td class="left"><code>M-right</code></td>
<td class="left">当前标题降低一个等级</td>
<td class="left"><code>org-do-demote</code></td>
</tr>

<tr>
<td class="left"><code>M-S-left</code></td>
<td class="left">当前整个子树提升一个等级</td>
<td class="left"><code>org-promote-subtree</code></td>
</tr>

<tr>
<td class="left"><code>M-S-right</code></td>
<td class="left">当前整个子树降低一个等级</td>
<td class="left"><code>org-demote-subtree</code></td>
</tr>

<tr>
<td class="left"><code>M-up</code></td>
<td class="left">当前整个子树和前面同级子树交换位置</td>
<td class="left"><code>org-move-subtree-up</code></td>
</tr>

<tr>
<td class="left"><code>M-down</code></td>
<td class="left">当前整个子树和后面同级子树交换位置</td>
<td class="left"><code>org-move-subtree-down</code></td>
</tr>

<tr>
<td class="left"><code>M-h</code></td>
<td class="left">Mark the element at point.</td>
<td class="left"><code>org-mark-element</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>@</code></td>
<td class="left">Mark the subtree at point. 目前看起来是可视化选中当前子树</td>
<td class="left"><code>org-mark-subtree</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>C-w</code></td>
<td class="left">剪切子树到 <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Kill-Ring.html" rel="external nofollow noopener noreferrer" target="_blank">kill ring</a></td>
<td class="left"><code>org-cut-subtree</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>M-w</code></td>
<td class="left">拷贝子树到 <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Kill-Ring.html" rel="external nofollow noopener noreferrer" target="_blank">kill ring</a></td>
<td class="left"><code>org-copy-subtree</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>C-y</code></td>
<td class="left">从  <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Kill-Ring.html" rel="external nofollow noopener noreferrer" target="_blank">kill ring</a> 中粘贴子树</td>
<td class="left"><code>org-paste-subtree</code></td>
</tr>

<tr>
<td class="left"><code>C-y</code></td>
<td class="left">Depending on the options org-yank-adjusted-subtrees and org-yank- folded-subtrees, Org’s internal yank command will paste subtrees folded and in a clever way, using the same command as C-c C-x C-y.</td>
<td class="left"><code>org-yank</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>c</code></td>
<td class="left">Clone a subtree by making a number of sibling copies of it. You will be prompted for the number of copies to make, and you can also specify if any timestamps in the entry should be shifted.</td>
<td class="left"><code>org-clone-subtree-with-time-shift</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-w</code></td>
<td class="left">将条目或区域 <i>refile</i> 到不同的位置。</td>
<td class="left"><code>org-refile</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>^</code></td>
<td class="left">排序相同级别的条目。</td>
<td class="left"><code>org-sort</code></td>
</tr>

<tr>
<td class="left"><code>C-x</code> <code>n</code> <code>s</code></td>
<td class="left">将缓冲区缩小到当前子树。</td>
<td class="left"><code>org-narrow-to-subtree</code></td>
</tr>

<tr>
<td class="left"><code>C-x</code> <code>n</code> <code>b</code></td>
<td class="left">将缓冲区缩小到当前 <b>block</b> 。</td>
<td class="left"><code>org-narrow-to-block</code></td>
</tr>

<tr>
<td class="left"><code>C-x</code> <code>n</code> <code>w</code></td>
<td class="left">加宽缓冲区以消除变窄。</td>
<td class="left"><code>widen</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>*</code></td>
<td class="left">使正常的文本行变为标题,重复操作可恢复成原样</td>
<td class="left"><code>org-toggle-heading</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> 稀疏树</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
一个很重要的特性就是org有能力为被选中的信息构造出稀疏树，使得被选中信息突出显示，无关信息折叠显示。实践才是检测真理的唯一标准，试一试就知道具体是怎样优化你的工作了。
</p>

<table id="table:sparse-trees" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 4:</span> 稀疏树</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>/</code></td>
<td class="left">本命令会触发sparse-tress命令界面，提示输入字符，来选择创建稀疏树的命令</td>
<td class="left"><code>org-sparse-tree</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>/</code> <code>r</code></td>
<td class="left">创建出和正则表达式匹配的稀疏树;标题匹配，标题可见; body匹配, 标题和body都可见；所以匹配高亮，当当前buffer通过编辑命令发送改变时，高亮消失，当然你可以通过 <code>C-c C-c</code> 主动取消高亮。</td>
<td class="left"><code>org-occur</code></td>
</tr>

<tr>
<td class="left"><code>M-g</code> <code>n</code></td>
<td class="left">跳转到下一个匹配</td>
<td class="left"><code>next-error</code></td>
</tr>

<tr>
<td class="left"><code>M-g</code> <code>p</code></td>
<td class="left">跳转到上一个匹配</td>
<td class="left"><code>previous-error</code></td>
</tr>
</tbody>
</table>

<p>
很有可能需要频繁创建特定搜索条件的稀疏树，可通过 <code>org-agenda-custom-commands</code> 来定义快速访问的快捷键（这个命令可用在<a href="http://orgmode.org/manual/Agenda-dispatcher.html" rel="external nofollow noopener noreferrer" target="_blank">agenda dispatcher</a>中）。
如下：
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;; the key C-c a f as a shortcut for creating a sparse tree matching the string ‘FIXME’.</span></span><br><span class="line"><span class="list">(<span class="keyword">setq</span> org-agenda-custom-commands <span class="quoted">'((<span class="string">"f"</span> occur-tree <span class="string">"FIXME"</span>))</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<blockquote>
<p>
The other sparse tree commands select headings based on <b>TODO</b> keywords, tags, or properties and will be discussed later in this manual.
To print a sparse tree, you can use the Emacs command <code>ps-print-buffer-with-faces</code> which does not print invisible parts of the document.
Or you can use <code>C-c</code> <code>C-e</code> <code>C-v</code> to export only the visible part of the document and print the resulting file.
</p>
</blockquote>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 列表</h3>
<div class="outline-text-3" id="text-1-2">
<blockquote>
<p>
Within an entry of the outline tree, hand-formatted lists can provide additional structure.
They also provide a way to create lists of checkboxes.
Org supports editing such lists, and every exporter can parse and format them.
</p>
</blockquote>
<p>
在大纲树的组织结构中，自定义格式的列表可以提供更多的组织结构。使我们得到一个复先框列表。 <code>Org</code> 可以处理这种列表，同时各个 <code>exporter</code> 可以解析和格式化。
<b>Org</b> 可识别 <i>ordered</i> 列表, <i>unordered</i> 列表, 和 <i>description</i> 列表。
</p>
<ul class="org-ul">
<li><i>Unordered</i> 的列表项以 <b>‘-’</b>, <b>‘+’</b> 或 <b>‘*’</b> 开始。
</li>
<li><i>Ordered</i> 的列表项以数字加在 <b>‘.’</b> 或 <b>‘)’</b> 开始。格式如下：‘1.’ 或 ‘1)’。 可自定义起始值，在文本开始出插入[@20]，代表以20开始。
</li>
<li><i>Description</i> 列表项其实就是 <i>unordered</i> 列表项, 只在文本中间插入了分隔符 <b>‘::’</b> 。
</li>
</ul>

<p>
同一个列表中项首行必须缩进一致。特别是 <i>ordered</i> 列表到了 <b>‘10.’</b> ，两位数字必须和其他数字左对齐。
若是下一行的缩进小于等于当前列表的缩进，则当前项终结。当所有项都终结，或者后面隔了两个空行时，列表终结。示例如下：
</p>
<pre class="example">
** Lord of the Rings
   My favorite scenes are (in this order)
   1. The attack of the Rohirrim
   2. Eowyn's fight with the witch king
       + this was already my favorite scene in the book
       + I really like Miranda Otto.
   Important actors in this film are:
   - Elijah Wood :: He plays Frodo
   - Sean Austin :: He plays Sam, Frodo's friend.
</pre>
<blockquote>
<p>
Org supports these lists by tuning filling and wrapping commands to deal with them correctly, and by exporting them properly.
Since indentation is what governs the structure of these lists,
many structural constructs like <code>#+BEGIN_...</code> blocks can be indented to signal that they belong to a particular item.
</p>

<p>
If you find that using a different bullet for a sub-list (than that used for the current list-level) improves readability,
customize the variable <code>org-list-demote-modify-bullet</code>.
To get a greater difference of indentation between items and their sub-items, <code>customize org-list-indent-offset</code>.
</p>

<p>
The following commands act on items when the cursor is in the first line of an item (the line with the bullet or number).
Some of them imply the application of automatic rules to keep list structure intact.
If some of these actions get in your way, configure <code>org-list-automatic-rules</code> to disable them individually.
</p>
</blockquote>
<p>
当光标位于一项的首行时（带有项标志符的行），下面命令将作用于该项：
</p>
<table id="table:plain-list" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 5:</span> 稀疏树</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>TAB</code></td>
<td class="left">列表项像标题一样的被折叠，展开</td>
<td class="left"><code>org-cycle</code></td>
</tr>

<tr>
<td class="left"><code>TAB</code></td>
<td class="left">用于还未输入文本信息的子项，第一个TAB变为子项，第二个TAB变为父项,第三个TAB恢复原有等级 (,-&gt;children-&gt;parent-&gt;initial))</td>
<td class="left"><code>org-cycle</code></td>
</tr>

<tr>
<td class="left"><code>M-RET</code></td>
<td class="left">插入一个同级项(行首，把当前行转成列表项；行中，截断余下文本，在下一行生成列表项)</td>
<td class="left"><code>org-insert-heading</code></td>
</tr>

<tr>
<td class="left"><code>M-S-RET</code></td>
<td class="left">插入一个带 <code>checkbox</code> 的同级项(行为类似于M-RET)</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>S-up/S-down</code></td>
<td class="left">跳转到当前列表的上一项或者下一项</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>M-up/M-down</code></td>
<td class="left">和上一项或者下一项交换位置（同级之间)</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>M-left/M-right</code></td>
<td class="left">提升或者降低一项的等级,子项不变</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>M-S-left/M-S-right</code></td>
<td class="left">提升或者降低一项的等级,子项同等变化</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-c</code></td>
<td class="left">当前项有 <code>checkbox</code> , 触发状态转换</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>-</code></td>
<td class="left">循环改变将当前列表的项标志符</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>*</code></td>
<td class="left">使列表项变为标题 (在当前位置生成子标题).</td>
<td class="left"><code>org-toggle-heading</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-*</code></td>
<td class="left">使整个列表变成当前标题的子树 <code>checkboxes</code> 将变为 <code>TODO</code> 当未 <i>unchecked</i> 时</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>S-left/right</code></td>
<td class="left">循环改变将当前列表的项标志符</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>^</code></td>
<td class="left">Sort the plain list</td>
<td class="left"><code>org-sort</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Drawers</h3>
<div class="outline-text-3" id="text-1-3">
<blockquote>
<p>
Sometimes you want to keep information associated with an entry, but you normally don’t want to see it.
For this, Org mode has drawers. They can contain anything but a headline and another drawer.
</p>

<p>
You can interactively insert drawers at point by calling <code>org-insert-drawer</code>, which is bound to <code>C-c</code> <code>C-x</code> <code>d</code>.
With an active region, this command will put the region inside the drawer.
With a prefix argument, this command calls <code>org-insert-property-drawer</code> and add a property drawer right below the current headline.
Completion over drawer keywords is also possible using <code>M-TAB</code>.
</p>

<p>
Visibility cycling on the headline will hide and show the entry, but keep the drawer collapsed to a single line.
In order to look inside the drawer, you need to move the cursor to the drawer line and press <code>TAB</code> there.
Org mode uses the <b>PROPERTIES</b> drawer for storing properties , and you can also arrange for state change notes and clock times to be stored in a drawer <b>LOGBOOK</b>.
If you want to store a quick note in the <b>LOGBOOK</b> drawer, in a similar way to state changes, use <code>C-c</code> <code>C-z</code> Add a time-stamped note to the <b>LOGBOOK</b> drawer.
</p>

<p>
You can select the name of the drawers which should be exported with <code>org-export-with-drawers</code>.
In that case, drawer contents will appear in export output.
<b>Property</b> drawers are not affected by this variable: configure <code>org-export-with-properties</code> instead.
</p>
</blockquote>
<p>
<i>Drawers</i> 如下所示：
</p>
<pre class="example">
** This is a headline
   Still outside the drawer
   :DRAWERNAME:
   This is inside the drawer.
   :END:
   After the drawer.
</pre>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 块</h3>
<div class="outline-text-3" id="text-1-4">
<blockquote>
<p>
Org mode uses begin&#x2026;end blocks for various purposes from including source code examples to capturing time logging information.
These blocks can be folded and unfolded by pressing <code>TAB</code> in the begin line.
You can also get all blocks folded at startup by configuring the option <code>org-hide-block-startup</code> or on a per-file basis by using
</p>
<pre class="example">
#+STARTUP: hideblocks
#+STARTUP: nohideblocks
</pre>
</blockquote>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 脚注</h3>
<div class="outline-text-3" id="text-1-5">
<blockquote>
<p>
A footnote is started by a footnote marker in square brackets in column 0, no indentation allowed.
It ends at the next footnote definition, headline, or after two consecutive empty lines.
The footnote reference is simply the marker in square brackets, inside text. Markers always start with fn:.
For example:
</p>
<pre class="example">
The Org homepage[fn:1] now looks a lot better than it used to.
...
[fn:1] The link is: http://orgmode.org
</pre>

<p>
Org mode extends the number-based syntax to named footnotes and optional inline definition. Here are the valid references:
</p>
<dl class="org-dl">
<dt> <code>[fn:name]</code> </dt><dd>A named footnote reference, where name is a unique label word, or, for simplicity of automatic creation, a number.
</dd>
<dt> <code>[fn::This is the inline definition of this footnote]</code> </dt><dd>A LATEX-like anonymous footnote where the definition is given directly at the reference point.
</dd>
<dt> <code>[fn:name:a definition]</code> </dt><dd>An inline definition of a footnote, which also specifies a name for the note.
Since Org allows multiple references to the same note, you can then use \[fn:name\] to create additional references.
</dd>
</dl>

<p>
Footnote labels can be created automatically, or you can create names yourself.
This is handled by the variable <code>org-footnote-auto-label</code> and its corresponding <b>#+STARTUP</b> keywords.
See the docstring of that variable for details.
</p>
</blockquote>
<p>
示例如下：
The Org homepage<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> now looks a lot better than it used to.
</p>

<table id="table:footnote-command" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">
<caption class="t-above"><span class="table-number">Table 6:</span> 脚注命令列表</caption>

<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>f</code></td>
<td class="left">当光标处于引用处时，跳转到它的定义；当光标处理定义处时，跳转到第一个引用处。其他情况下，新建一个脚注。当有前缀参数时，会提供一个菜单供选择操作，其中包括重新给脚注编号。</td>
<td class="left"><code>org-footnote-action</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-c</code></td>
<td class="left">当光标处于引用处时，跳转到它的定义；当光标处理定义处时，跳转到第一个引用处。当有前缀参数时，行为和 <code>C-c C-x f</code> 一样,提供同样操作菜单。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-o</code></td>
<td class="left">脚注标签也是指向相应定义/引用的链接，您可以使用常用(链接)命令来跟踪这些链接。</td>
<td class="left"><code>org-open-at-point</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> ='=</td>
<td class="left">在独立的窗口中，编辑引用关联的脚注定义。窗口可通过 <code>C-c</code> ='= 关闭</td>
<td class="left"><code>org-edit-special</code></td>
</tr>
</tbody>
</table>

<p>
当 <code>C-c C-x f</code> 命令加上附加前缀参数时(<code>C-u C-c C-x f</code>) ,一个操作菜单被提供：
</p>
<pre class="example">
s    Sort the footnote definitions by reference sequence.  During editing,
     Org makes no effort to sort footnote definitions into a particular
     sequence.  If you want them sorted, use this command, which will
     also move entries according to org-footnote-section.  Automatic
     sorting after each insertion/deletion can be configured using the
     option org-footnote-auto-adjust.
r    Renumber the simple fn:N footnotes.  Automatic renumbering
     after each insertion/deletion can be configured using the option
     org-footnote-auto-adjust.
S    Short for first r, then s action.
n    Normalize the footnotes by collecting all definitions (including
     inline definitions) into a special section, and then numbering them
     in sequence.  The references will then also be numbers.
d    Delete the footnote at point, and all definitions of and references
     to it.
</pre>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> The Orgstruct minor mode</h3>
<div class="outline-text-3" id="text-1-6">
<blockquote>
<p>
If you like the intuitive way the Org mode structure editing and list formatting works,
you might want to use these commands in other modes like Text mode or Mail mode as well.
The minor mode orgstruct-mode makes this possible. Toggle the mode with <code>M-x</code> <code>orgstruct-mode</code> <code>RET</code>,
or turn it on by default, for example in Message mode, with one of:
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'message-mode-hook</span> <span class="quoted">'turn-on-orgstruct</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'message-mode-hook</span> <span class="quoted">'turn-on-orgstruct++</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</blockquote>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Org 的语法</h3>
<div class="outline-text-3" id="text-1-7">
<blockquote>
<p>
A reference document providing a formal description of Org’s syntax is available as <a href="http://orgmode.org/worg/dev/org-syntax.html" rel="external nofollow noopener noreferrer" target="_blank">a draft on Worg</a>, written and maintained by Nicolas Goaziou.
It defines Org’s core internal concepts such as headlines, sections, affiliated keywords, (greater) elements and objects.
Each part of an Org file falls into one of the categories above.
</p>

<p>
To explore the abstract structure of an Org buffer, run this in a buffer:
</p>
<pre class="example">
M-: (org-element-parse-buffer) RET
</pre>
<p>
It will output a list containing the bu↵er’s content represented as an abstract structure.
The export engine relies on the information stored in this list.
Most interactive commands (e.g., for structure editing) also rely on the syntactic meaning of the surrounding context.
</p>

<p>
You can check syntax in your documents using org-lint command.
</p>
</blockquote>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 表格</h2>
<div class="outline-text-2" id="text-2">
<p>
<b>Org</b> 提供了一个快速直观的表编辑器。 使用 <b>Emacs</b> 内嵌的 <i>calc</i> 的包可支持类似于制表软件的操作。
</p>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 内置表编辑器</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<b>Org</b> 能够很容易地格式化 <b>ASCII</b> 文本表格。 任何把'|'作为首个非空白字符的行都被视为表的一部分。 '|'也是列分隔符。 表如下所示：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="left">

<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">名字</th>
<th scope="col" class="right">手机号</th>
<th scope="col" class="right">年龄</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">brantou</td>
<td class="right">170xxxxxxxx</td>
<td class="right">18</td>
</tr>
</tbody>
</table>

<p>
在表格内键入 <code>TAB</code> , <code>RET</code> 或 <code>C-c</code> <code>C-c</code> 时，表格都会自动重新对齐。
<code>TAB</code> 也可以移动到下一个表格区域（ <code>RET</code> 进入下一行），并在表的末尾或水平线之前创建新的表行。
表的缩进由第一行设置。 以"|-"开头的任何行都被视为水平分隔符行，并在下一个重新对齐时展开。所以，要创建上面的表，你只需要键入
</p>
<pre class="example">
| 名字 | 手机号 | 年龄 |
|-
</pre>
<p>
然后按 <code>TAB</code> 扩展表格。 更快的是键入 <b>|名称|手机号|年龄</b> 后, 再键入 <code>C-c</code> <code>RET</code> 。
</p>

<p>
在表格区域中输入文本时，Org以特殊方式处理DEL，Backspace和所有字符键，以便插入和删除避免移动其他字段。
此外，当使用TAB，S-TAB或RET将光标移动到新的表格区域后会自动填充空格。
如果这种行为对您太不可预测，请配置选项 <code>org-enable-table-editor</code> 和 <code>org-table-auto-blank-field</code> 。
</p>
</div>

<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> 创建和转换</h4>
<div class="outline-text-4" id="text-2-1-1">
<pre class="example">
=C-c= =|=                 ~org-table-create-or-convert-from-region~
</pre>
<p>
将活动区域转换为表。 如果每行包含至少一个TAB字符，则认为 <b>TAB</b> 是分隔符。 如果每一行都包含逗号，则逗号作为分隔（CSV）。 如果不是，则将行以空格为分隔符。
您可以使用前缀参数强制指定分隔符： <code>C-u</code> 强制CSV， <code>C-u</code> <code>C-u</code> 强制TAB， <code>C-u</code> <code>C-u</code> <code>C=u</code> 将提示正则表达式匹配分隔符，数值参数N表示至少N个连续空格，或者 一个TAB将是分隔符。
如果没有活动区域，此命令将创建一个空的组织表。
</p>
</div>
</div>

<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2"><span class="section-number-4">2.1.2</span> 调整和区域移动</h4>
<div class="outline-text-4" id="text-2-1-2">
<table id="table:-realigning_motion" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-c</code></td>
<td class="left">重新对齐表格，不移动到其他字段。</td>
<td class="left"><code>org-table-align</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>SPC</code></td>
<td class="left">使用空格填充当前区域</td>
<td class="left"><code>org-table-blank-field</code></td>
</tr>

<tr>
<td class="left"><code>&lt;TAB&gt;</code></td>
<td class="left">重新对齐表格，移动到下一区域。 如有必要，创建一个新行。</td>
<td class="left"><code>org-table-next-field</code></td>
</tr>

<tr>
<td class="left"><code>S-TAB</code></td>
<td class="left">重新对齐，移动到上一区域。</td>
<td class="left"><code>org-table-previous-field</code></td>
</tr>

<tr>
<td class="left"><code>RET</code></td>
<td class="left">重新对齐表格并向下移动到下一行。 如有必要，创建一个新行。</td>
<td class="left"><code>org-table-next-row</code></td>
</tr>

<tr>
<td class="left"><code>M-a</code></td>
<td class="left">移动到当前表区域的开头，或移动到上一个区域。</td>
<td class="left"><code>org-table-beginning-of-field</code></td>
</tr>

<tr>
<td class="left"><code>M-e</code></td>
<td class="left">移动到当前表区域的结尾，或移动到上一个区域。</td>
<td class="left"><code>org-table-end-of-field</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3"><span class="section-number-4">2.1.3</span> 列和行编辑</h4>
<div class="outline-text-4" id="text-2-1-3">
<table id="table:-column_row_editing" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>M-left</code> \ <code>M-right</code></td>
<td class="left">向左/向右移动当前列</td>
<td class="left"><code>org-table-move-column-left\right</code></td>
</tr>

<tr>
<td class="left"><code>M-S-left</code></td>
<td class="left">删除当前列</td>
<td class="left"><code>org-table-delete-column</code></td>
</tr>

<tr>
<td class="left"><code>M-S-right</code></td>
<td class="left">在光标位置的左侧插入一个新列</td>
<td class="left"><code>org-table-insert-column</code></td>
</tr>

<tr>
<td class="left"><code>M-up</code> \ <code>M-down</code></td>
<td class="left">向上/向下移动当前行</td>
<td class="left"><code>org-table-move-row-up\down</code></td>
</tr>

<tr>
<td class="left"><code>M-S-up</code></td>
<td class="left">删除当前行或水平分隔线</td>
<td class="left"><code>org-table-kill-row</code></td>
</tr>

<tr>
<td class="left"><code>M-S-down</code></td>
<td class="left">在当前行上方插入新行。 使用前缀参数，该行在当前行下创建</td>
<td class="left"><code>org-table-insert-row</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>-</code></td>
<td class="left">在当前行下插入水平线。 使用前缀参数，在当前行之上创建</td>
<td class="left"><code>org-table-insert-hline</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>RET</code></td>
<td class="left">在当前行下插入水平线，将光标移动到该线下面的行</td>
<td class="left"><code>org-table-hline-and-move</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>^</code></td>
<td class="left">对区域中的表行进行排序</td>
<td class="left"><code>org-table-sort-lines</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-1-4" class="outline-4">
<h4 id="sec-2-1-4"><span class="section-number-4">2.1.4</span> 区域</h4>
<div class="outline-text-4" id="text-2-1-4">
<table id="table:-table_region" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>M-w</code></td>
<td class="left">将矩形区域从表复制到特殊剪贴板。 点和标记确定矩形的边缘字段。 如果没有活动区域，只复制当前字段。 该过程忽略水平分隔线。</td>
<td class="left"><code>org-table-copy-region</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>C-w</code></td>
<td class="left">将矩形区域从表格复制到特殊剪贴板，并将矩形中的所有字段都留空。 所以这是“剪切”操作。</td>
<td class="left"><code>org-table-cut-region</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>C-x</code> <code>C-y</code></td>
<td class="left">将矩形区域粘贴到表中。 左上角在当前字段中结束。 所有涉及的字段将被覆盖。 如果矩形不适合当前表格，则根据需要放大表格。 该过程忽略水平分隔线。</td>
<td class="left"><code>org-table-paste-rectangle</code></td>
</tr>

<tr>
<td class="left"><code>M-RET</code></td>
<td class="left">在光标位置分割当前字段，并将其余部分移动到下面的行。 如果存在活动区域，并且点和标记都在同一列中，则列中的文本将包装为给定行数的最小宽度。 数字前缀参数可用于更改所需行的数量。 如果没有区域，但您指定了前缀参数，则将当前字段设置为空，并将内容追加到上面的字段。</td>
<td class="left"><code>org-table-wrap-region</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-1-5" class="outline-4">
<h4 id="sec-2-1-5"><span class="section-number-4">2.1.5</span> 计算</h4>
<div class="outline-text-4" id="text-2-1-5">
<table id="table:-table_region" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>+</code></td>
<td class="left">将当前列中的数字或由活动区域定义的矩形中的数字相加。 结果显示在echo区域中，可以用C-y插入。</td>
<td class="left"><code>org-table-sum</code></td>
</tr>

<tr>
<td class="left"><code>S-RET</code></td>
<td class="left">当前字段为空时，从上面的第一个非空区域复制。 当不为空时，将当前区域复制到下一行，并将光标与其一起移动。</td>
<td class="left"><code>org-table-copy-down</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-1-6" class="outline-4">
<h4 id="sec-2-1-6"><span class="section-number-4">2.1.6</span> 杂项</h4>
<div class="outline-text-4" id="text-2-1-6">
<table id="table:-table_region" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c</code> <code>`</code></td>
<td class="left">在单独的窗口中编辑当前区域。 这对于不完全可见的区域很有用。当使用C-u前缀调用时，仅仅使整个字段可见，以便可以在当前位置编辑 。 当使用两个C-u前缀调用时，使编辑器窗口跟随光标在表移动，并始终显示光标所在区域。 当光标离开表时，或者当您用C-u C-u C-c`重复此命令时，跟随模式将自动退出。</td>
<td class="left"><code>org-table-edit-field</code></td>
</tr>

<tr>
<td class="left"><code>M-x</code> <code>org-table-import</code> <code>RET</code></td>
<td class="left">将文件作为表导入。 表格应该是TAB或空格分隔。</td>
<td class="left"><code>org-table-import</code></td>
</tr>

<tr>
<td class="left"><code>C-c</code> <code>\vert</code></td>
<td class="left">也可以通过将表格文本粘贴到 <b>Org</b> buffer，使用 <code>C-x</code> <code>C-x</code> 选择粘贴的文本，然后使用C-c &vert; 命令（请参阅上面的创建和转换）。</td>
<td class="left"><code>org-table-create-or-convert-from-region</code></td>
</tr>

<tr>
<td class="left"><code>M-x</code> <code>org-table-export</code> <code>RET</code></td>
<td class="left">导出表，默认情况下作为 <b>TAB</b> 分隔的文件。 用于与例如电子表格或数据库程序进行数据交换。 用于导出文件的格式可以在选项 <code>org-table-export-default-format</code> 中配置。 您还可以使用属性 <b>TABLE<sub>EXPORT</sub><sub>FILE</sub></b> 和 <b>TABLE<sub>EXPORT</sub>_ FORMAT</b> 来指定子树中的表导出的文件名和格式。 Org支持导出表格的相当一般格式。</td>
<td class="left"><code>org-table-export</code></td>
</tr>
</tbody>
</table>

<p>
你可能因为‘|’开始的行，妨碍到你，而不喜欢自动表编辑器，你可以用下面的语句来关闭
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-enable-table-editor <span class="literal">nil</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<p>
然后唯一的表命令 <code>C-c</code> <code>C-c</code> 仍然工作, 做一个手动重新对齐。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 列宽和对齐</h3>
<div class="outline-text-3" id="text-2-2">
<p>
列的宽度由表编辑器自动确定。 并且还可以从列中包含的数据类型（数字或者非数字）自动确定列的对齐方式。
有时一个区域或几个区域需要包含很多文本信息，会导致信息展示和编辑的诸多不便。 或者你想设定固定宽度的几列，而不管内容如何。
要设置列的宽度，列中任何位置的一个字段可能只包含字符串“N”，其中“N”是指定列的宽度（以字符为单位）的整数。 接下来重新对齐，然后将此列的宽度设置为此值。
</p>

<div class="export">
<p>
&lt;img src="/images/table-column-width.jpg" /&gt;
</p>

</div>

<p>
设定固定宽度后，长文本将会裁剪展示，多余部分用字符串 <b>=&gt;</b> 来替代展示。
要查看全文，请将鼠标悬停在该字段上&#x2014;工具提示窗口(tool-tip window)将显示完整的内容。
要编辑这样一个区域，可使用 <code>C-c</code> <code>`</code> 。 这将打开一个的新窗口。 编辑后用 <code>C-c</code> <code>C-c</code> 来提交编辑内容，并关闭窗口。
</p>

<p>
当浏览包含有固定宽度表的文件时，必需的隐藏内容尚未发生，需要对齐表来隐藏内容，来变美观。
可设置 <code>org-startup-align-all-tables</code> 是浏览时对文件中的所有表进行重新调整，但这样会减慢文件打开的速度。
也可以在每个文件中设置此选项:
</p>
<pre class="example">
#+STARTUP: noalign
#+STARTUP: align
</pre>

<p>
如果不喜欢默认自动对齐的方式，您可以使用 <b>&lt;r&gt;</b> ，*&lt;c&gt;* 或者 <b>&lt;l&gt;</b> 来自定义对齐方式。 还可以将对齐和固定宽度组合使用，如下所示： <i>&lt;r10&gt;</i> 。
在导出文档时，将自动删除仅包含这些格式化信息的行。
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 列组</h3>
<div class="outline-text-3" id="text-2-3">
<p>
当Org导出表时，默认情况下不会有垂直线，因为在视觉上一般来说更令人满意。
然而，偶尔，垂直线对于将表结构化成一组列可能是有用的，就像水平线可以对于一组行所做的那样。
为了指定列组，您可以使用第一个字段仅包含"/"的特殊行。 其他字段可以包含'&lt;'表示此列应该启动一个组，'&gt;'表示组的结束，或'&lt;&gt;'（'&lt;'和'&gt;'之间没有空格） 当前列自己一组。
导出后，列组之间的边界将用垂直线标记。 示例如下：
</p>

<div class="export">
<p>
&lt;img src="/images/table-column-groups.jpg" /&gt;
</p>

</div>

<p>
效果如下（好像没有效果）：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="right">
</colgroup>

<colgroup>
<col class="right">

<col class="right">

<col class="right">
</colgroup>

<colgroup>
<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="right">N</th>
<th scope="col" class="right">N<sup>2</sup></th>
<th scope="col" class="right">N<sup>3</sup></th>
<th scope="col" class="right">N<sup>4</sup></th>
<th scope="col" class="right"><code>sqrt(n)</code></th>
<th scope="col" class="right"><code>sqrt[4](N)</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">2</td>
<td class="right">4</td>
<td class="right">8</td>
<td class="right">16</td>
<td class="right">1.4142136</td>
<td class="right">1.1892071</td>
</tr>

<tr>
<td class="right">3</td>
<td class="right">9</td>
<td class="right">27</td>
<td class="right">81</td>
<td class="right">1.7320508</td>
<td class="right">1.3160740</td>
</tr>
</tbody>
</table>

<p>
只插入列组启动器也是足够的：
</p>

<div class="export">
<p>
&lt;img src="/images/table-column-group-start.jpg" /&gt;
</p>

</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col class="right">
</colgroup>

<colgroup>
<col class="right">

<col class="right">

<col class="right">
</colgroup>

<colgroup>
<col class="right">

<col class="right">
</colgroup>
<thead>
<tr>
<th scope="col" class="right">N</th>
<th scope="col" class="right">N<sup>2</sup></th>
<th scope="col" class="right">N<sup>3</sup></th>
<th scope="col" class="right">N<sup>4</sup></th>
<th scope="col" class="right"><code>sqrt(n)</code></th>
<th scope="col" class="right"><code>sqrt[4](N)</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">2</td>
<td class="right">4</td>
<td class="right">8</td>
<td class="right">16</td>
<td class="right">1.4142136</td>
<td class="right">1.1892071</td>
</tr>

<tr>
<td class="right">3</td>
<td class="right">9</td>
<td class="right">27</td>
<td class="right">81</td>
<td class="right">1.7320508</td>
<td class="right">1.3160740</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> The Orgtbl minor mode</h3>
<div class="outline-text-3" id="text-2-4">
<blockquote>
<p>
If you like the intuitive way the Org table editor works, you might also want to use it in other modes like Text mode or Mail mode.
The minor mode Orgtbl mode makes this possible.
You can always toggle the mode with M-x orgtbl-mode RET.
To turn it on by default, for example in Message mode, use
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-hook</span> <span class="quoted">'message-mode-hook</span> <span class="quoted">'turn-on-orgtbl</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<p>
Furthermore, with some special setup, it is possible to maintain tables in arbitrary syntax with Orgtbl mode.
For example, it is possible to construct LATEX tables with the underlying ease and power of Orgtbl mode,
including spreadsheet capabilities.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 电子表格</h3>
<div class="outline-text-3" id="text-2-5">
<p>
请参阅如下内容：
</p>
<ul class="org-ul">
<li><a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.html" rel="external nofollow noopener noreferrer" target="_blank">Org as a spreadsheet system: a short introduction</a>
</li>
<li><a href="http://orgmode.org/worg/org-tutorials/org-spreadsheet-lisp-formulas.html" rel="external nofollow noopener noreferrer" target="_blank">Org as a spreadsheet system: using Emacs lisp as formulas</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Org-Plot</h3>
<div class="outline-text-3" id="text-2-6">
<p>
请参阅如下内容：
</p>
<ul class="org-ul">
<li><a href="http://orgmode.org/worg/org-tutorials/org-plot.html" rel="external nofollow noopener noreferrer" target="_blank">Plotting tables in Org-Mode using org-plot</a>
</li>
<li><a href="http://www.gnuplot.info/" rel="external nofollow noopener noreferrer" target="_blank">http://www.gnuplot.info/</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 超链接</h2>
<div class="outline-text-2" id="text-3">
<p>
就如 <i>HTML</i> 一样， <code>Org</code> 提供文件内部链接，到其他文件，Usenet文章，电子邮件等外部链接。
</p>
</div>
<div id="outline-container-link-format" class="outline-3">
<h3 id="link-format"><a id="sec-3-1" name="sec-3-1"></a><span class="section-number-3">3.1</span> 链接格式</h3>
<div class="outline-text-3" id="text-link-format">
<p>
<code>Org</code> 能够识别类似URL链接的文本，并处理成可点击的链接。 通用链接格式如下所示：
</p>
<pre class="example">
[[link][description]]  或者 [[link]]
</pre>
<p>
一旦链接完成，链接样式将发生变化，显示 <i>description</i> 而不是 <code>[[link] [description]]</code> 或 <i>link</i> 而不是 <code>[ [link]]]</code> 。
可以直接编辑链接的可见部分。 请注意，这可以是 <i>link</i> 部分（如果没有 <i>description</i> ）或 <i>description</i> 部分。 要编辑不可见的“链接”部分，只需在链接上键入 <code>C-c C-l</code> 。
在链接的头和尾可删除链接不可见的边际括号，使得链接不完整，内部再次显示为纯文本。 插入缺失的括号将再次隐藏链接内部。
要显示所有链接的内部结构，可用菜单条目 <code>Org-&gt;Hyperlinks-&gt;Literal links</code> 。
</p>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> 内部链接</h3>
<div class="outline-text-3" id="text-3-2">
<p>
如果一个链接不是URL形式的，它被当做当前文件中的内部链接。
最重要的情况是像 <code>[ [＃my-custom-id]]</code> 这样的链接，它将链接到 <b>CUSTOM<sub>ID</sub></b> 属性是 <i>my-custom-id</i> 的条目。 自己要负责确保这些自定义ID在文件中是唯一的。
诸如 <code>[ [MyTarget]]</code> 或 <code>[[MyTarget] [Findmytarget]]</code> 的链接会在当前文件的文本中搜索。
在链接上输入 <code>C-c C-o</code> 或 鼠标点击时，会跳转到链接匹配处。 自定义ID的链接将指向相应的标题。
</p>

<p>
文本链接的首选匹配是 <i>dedicated target</i> ：双角括号中的相同字符串，如 <i>&larr;&larr; My Target&rarr;&rarr;</i> 。
如果没有 <i>dedicated target</i> ，链接将尝试匹配缓冲区内元素的精确名称。
使用 <code>＃+NAME</code> 关键字进行命名，必须将其放在引用的元素之前的行中，如以下示例所示:
</p>
<pre class="example">
#+NAME: My Target
| a  | table      |
|----+------------|
| of | four cells |
</pre>
<p>
如果以上都没有成功，Org将搜索与链接文本完全相同的标题(也会搜索 <code>TODO</code> 关键字和标签)。
</p>

<p>
在导出过程中，内部链接被用于标记对象(并分配一个数字)。 标记的对象将被指向它们的链接引用。 特别地，没有 <i>description</i> 的链接将显示为分配给标记对象的编号。
以下摘录自 <code>Org</code>  缓冲区
</p>
<pre class="example">
- one item
- &lt;&lt;target&gt;&gt; another item
Here we refer to item [[target]].
</pre>
<p>
导出时，最后一句将显示为 <i>Here we refer to item 2</i> 。
</p>

<p>
在非 <code>Org</code> 文件中，搜索将查找链接文本中的单词。 在上面的例子中搜索将是 <i>my Target</i> 。
链接后，将 <i>mark</i> 推到 <code>Org</code> 自己的 <i>mark ring</i> 上。 可使用 <code>C-c ＆</code> 返回到前一个位置。 直接连续使用这个命令多次可以回到前面记录的位置。
</p>
</div>
<div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><span class="section-number-4">3.2.1</span> Radio targets</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
<code>Org</code> 可自动将正常文本中某些目标名称的任何出现转换为链接。 所以没有明确创建一个链接，文本就连接到 <i>Radio targents</i> 的位置。
<i>Radio targets</i> 由三角形括号括起来,
如 &larr;&larr;&larr; My Target&rarr;&rarr;&rarr; 导致正常文本中的每个出现的 <i>my target</i> 被激活为链接。
仅当文件首次加载到Emacs中时，才会自动扫描 <i>Radio targets</i> 。
要在编辑过程中更新 <i>Radio targets</i> 列表，请在光标处于 <i>Radio targets</i> 位置时按 <code>C-c C-c</code> 。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 外部链接</h3>
<div class="outline-text-3" id="text-3-3">
<p>
<code>Org</code> 支持链接到文件，网站，Usenet和电子邮件，BBDB数据库条目和链接到IRC对话及其日志。
外部链接是类似URL的 <i>locators</i> 。 它们以一个简短的识别字符串后面跟一个冒号开始。 冒号后没有空格。
下面列表显示每个链接类型的示例。
</p>
<pre class="example">
http://www.astro.uva.nl/~dominik           on the web
doi:10.1000/182                            DOI for an electronic resource
file:/home/dominik/images/jupiter.jpg      file, absolute path
/home/dominik/images/jupiter.jpg           same as above
file:papers/last.pdf                       file, relative path
./papers/last.pdf                          same as above
file:/myself@some.where:papers/last.pdf    file, path on remote machine
/myself@some.where:papers/last.pdf         same as above
file:sometextfile::NNN                     file, jump to line number
file:projects.org                          another Org file
file:projects.org::some words              text search in Org file
file:projects.org::*task                   heading search in Org file
docview:papers/last.pdf::NNN               open in doc-view mode at page
id:B7423F4D-2E8A-471B-8810-C40F074717E9    Link to heading by ID
news:comp.emacs                            Usenet link
mailto:adent@galaxy.net                    Mail link
mhe:folder                                 MH-E folder link
mhe:folder#id                              MH-E message link
rmail:folder                               RMAIL folder link
rmail:folder#id                            RMAIL message link
gnus:group                                 Gnus group link
gnus:group#id                              Gnus article link
bbdb:R.*Stallman                           BBDB link (with regexp)
irc:/irc.com/#emacs/bob                    IRC link
info:org#External links                    Info node or index link
shell:ls *.org                             A shell command
elisp:org-agenda                           Interactive Elisp command
elisp:(find-file-other-frame "Elisp.org")  Elisp form to evaluate
</pre>

<p>
链接应包含在双括号中，当然可能想要显示的描述性文本而不是URL（参见<a href="#link-format">链接格式</a>），例如：
</p>
<pre class="example">
[[http://www.gnu.org/software/emacs/][GNU Emacs]]
</pre>

<p>
如果描述是文件名或指向图像的URL，则HTML导出将内嵌图像作为可点击按钮。
如果没有任何描述和链接指向图像，该图像将被内联到导出的HTML文件中。
</p>

<p>
<code>Org</code> 能识别出正常文本中的外部链接，并将其作为链接激活。
如果空格必须是链接的一部分（例如在 <code>bbdb:[Richard Stallman]</code> 中），
或者如果需要消除关于链接结尾的歧义，请将其括在方括号中。
</p>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 处理链接</h3>
<div class="outline-text-3" id="text-3-4">
<p>
<code>Org</code> 为了正确的创建链接，插入链接和跟随链接，提供了很多快捷键。
</p>
<table id="table:handing_links" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Description</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c l</code></td>
<td class="left">存储当前位置的链接。 这是一个全局命令，可以在任何缓冲区中使用它来创建链接。 链接将被存储以备将来插入 <code>Org</code> 的缓冲区。 创建什么样的链接取决于当前的缓冲区。</td>
<td class="left"><code>org-store-link</code></td>
</tr>

<tr>
<td class="left"><code>C-c C-l</code></td>
<td class="left">插入链接。 将提示将链接插入缓冲区。 可以键入链接，使用内部链接的文本或上述示例中提到的链接类型前缀之一。 该链接将被插入到缓冲区，以及一个描述性的文本。 如果在调用此命令时选择了某些文本，则所选文本将成为默认描述。</td>
<td class="left"><code>org-insert-link</code></td>
</tr>

<tr>
<td class="left"><code>C-u C-c C-l</code></td>
<td class="left">当使用 <code>C-u</code> 前缀参数调用 <code>C-c C-l</code> 时，将插入文件链接，可以使用文件名来完成文件选择。当前用到是相对路径，若是想要绝对路径可用两个 <code>C-u</code> 前缀。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c C-l</code></td>
<td class="left">当光标在已有链接上时， <code>C-c C-l</code> 允许编辑链接的链接和描述部分。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c C-o</code></td>
<td class="left">打开当前位置的链接。如果要覆盖默认应用程序并使用Emacs访问文件，请使用 <code>C-u</code> 前缀。 如果要避免在Emacs中打开，请使用 <code>C-u C-u</code> 前缀。如果光标位于标题上，但不在链接上，则打开标题中所有链接。</td>
<td class="left"><code>org-open-at-point</code></td>
</tr>

<tr>
<td class="left"><code>RET</code></td>
<td class="left">当 <code>org-return-follow-link</code> 设置时，RET也将跟随当前位置的链接。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c C-x C-v</code></td>
<td class="left">触发图片链接内联显示。当用前缀参数调用时，还会显示具有描述信息的图片链接。 可以通过配置变量 <code>org-startup-with-inline-images</code> 使内联图片在启动时显示。</td>
<td class="left"><code>org-toggle-inline-images</code></td>
</tr>

<tr>
<td class="left"><code>C-c %</code></td>
<td class="left">Push the current position onto the mark ring, to be able to return easily. Commands following an internal link do this automatically.</td>
<td class="left"><code>org-mark-ring-push</code></td>
</tr>

<tr>
<td class="left"><code>C-c &amp;</code></td>
<td class="left">跳回到记录位置。 A position is recorded by the commands following internal links, and by C-c %. Using this command several times in direct succession moves through a ring of previously recorded positions.</td>
<td class="left"><code>org-mark-ring-goto</code></td>
</tr>

<tr>
<td class="left"><code>C-c C-x C-n/p</code></td>
<td class="left">向前/向后移动到缓冲区中的下一个链接。</td>
<td class="left"><code>org-next/previous-link</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> 在Org之外使用链接</h3>
<div class="outline-text-3" id="text-3-5">
<p>
可以插入和跟踪具有Org语法的链接，不仅在组织中，而且可以在任何Emacs缓冲区中。
为此，应该创建两个全局命令，如下：
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="string">"\C-c L"</span> <span class="quoted">'org-insert-link-global</span>)</span></span><br><span class="line"><span class="list">(<span class="keyword">global-set-key</span> <span class="string">"\C-c o"</span> <span class="quoted">'org-open-at-point-global</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> 链接缩写</h3>
<div class="outline-text-3" id="text-3-6">
<p>
长的URL输入起来会很麻烦，同时在文档中类似的链接可能会很频繁的出现。
为此，你可能需要使用链接缩写。 链接缩写看起来如下所示:
</p>
<pre class="example">
[[linkword:tag][description]]
</pre>
<p>
<i>tag</i> 是可选的， <i>linkword</i> 必须是一个单词，以字母开头，后跟字母，数字，' - '和'<sub>'。</sub>
根据将链接缩写词与替换文本相关联的变量 <code>org-link-abbrev-alist</code> 中的信息来解析缩写。 定义如下所示：
</p>
<div class="org-src-container">

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">setq</span> org-link-abbrev-alist</span><br><span class="line">      <span class="quoted">'((<span class="string">"bugzilla"</span>  . <span class="string">"http://10.1.2.9/bugzilla/show_bug.cgi?id="</span>)</span><br><span class="line">	(<span class="string">"url-to-ja"</span> . <span class="string">"http://translate.google.fr/translate?sl=en&amp;tl=ja&amp;u=%h"</span>)</span><br><span class="line">	(<span class="string">"google"</span>    . <span class="string">"http://www.google.com/search?q="</span>)</span><br><span class="line">	(<span class="string">"gmap"</span>      . <span class="string">"http://maps.google.com/maps?q=%s"</span>)</span><br><span class="line">	(<span class="string">"omap"</span>      . <span class="string">"http://nominatim.openstreetmap.org/search?q=%s&amp;polygon=1"</span>)</span><br><span class="line">	(<span class="string">"ads"</span>       . <span class="string">"http://adsabs.harvard.edu/cgi-bin/nph-abs_connect?author=%s&amp;db_key=AST"</span>))</span>)</span></span><br></pre></td></tr></table></figure>
</div>
<p>
如果替换文本包含字符串 <code>％s</code> ，它将被标签所替换。
使用 <code>％h</code> 而不是 <code>％s</code> ,是因为需要对标签进行url编码（参见上面示例，需要对URL参数进行编码）。
使用 <code>％(my-function)</code> 将标签传递给自定义函数 ，并将其替换为生成的字符串。
如果替换文本不包含任何说明符，则只需把标签添加到替换文本后即可创建链接。
</p>

<p>
如果只需要单个Org缓冲区的特殊缩写，可以在文件中定义它们
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+LINK: bugzilla  http://10.1.2.9/bugzilla/show_bug.cgi?id=&#10;#+LINK: google    http://www.google.com/search?q=%s</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> 文件链接的搜索选项</h3>
<div class="outline-text-3" id="text-3-7">
<p>
参见<a href="http://orgmode.org/manual/Search-options.html#Search-options" rel="external nofollow noopener noreferrer" target="_blank">Org-mode手册中相关章节</a>
</p>
</div>
</div>
<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> 自定义搜索</h3>
<div class="outline-text-3" id="text-3-8">
<p>
参见<a href="http://orgmode.org/manual/Custom-searches.html#Custom-searches" rel="external nofollow noopener noreferrer" target="_blank">Org-mode手册中相关章节</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 待办事项</h2>
<div class="outline-text-2" id="text-4">
<p>
<code>Org-mode</code> 不把 <code>TODO</code> 列表作为单独的文档来维护。 相反， <code>TODO</code> 列表是笔记的组成部分，因为它通常产生于记录笔记时！
使用 <code>Org-mode</code> ，只需将树中的任何条目标记为 <code>TODO</code>  就可构造出 <code>TODO</code> 列表。 这种方式，信息不会冗余重复，并且始终显示 <code>TODO</code> 项出现的整个上下文。
当然，这种用于管理 <code>TODO</code> 项的方式会将它们分散在各个笔记文件中。 <code>Org-mode</code> 通过提供一些方法使我们可以把它们看作一个整体来处理。
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 基础的待办事项功能</h3>
<div class="outline-text-3" id="text-4-1">
<p>
以 <code>TODO</code> 关键字开始的任意标题都会变为代办事项，例如：
</p>
<pre class="example">
*** TODO Write letter to Sam Fortune
</pre>
<table id="table:todo-important-cmd" border="2" cellspacing="0" cellpadding="6" rules="all" frame="border">


<colgroup>
<col class="left">

<col class="left">

<col class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Desc</th>
<th scope="col" class="left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>C-c C-t</code></td>
<td class="left">转换当前项的TODO状态 _,-&gt; (unmarked) -&gt; TODO -&gt; DONE &#x2013;._</td>
<td class="left"><code>org-todo</code></td>
</tr>

<tr>
<td class="left"><code>C-u C-c C-t</code></td>
<td class="left">当TODO关键字没有选择时，使用补全选择特定的关键字; 否则强制循环遍历TODO状态，没有提示。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>S-left/right</code></td>
<td class="left">选择之后/之前的TODO状态，像是循环。</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left"><code>C-c / t</code></td>
<td class="left">构造出TODO列的稀疏树;折叠整个缓冲区，但显示所有TODO项（ <code>not-DONE</code> 状态）和其上的标题层次结构。 使用前缀参数（或使用 <code>C-c / T</code> ），搜索特定的TODO。 系统提示输入关键字，还可以输入KWD1 &vert; KWD2 &vert; &#x2026;等关键字，列出与这些关键字中的任何一个匹配的项。 使用数字前缀参数N，在选项 <code>org-todo-keywords</code> 中显示第N个关键字的树。 使用两个前缀参数，找到所有TODO状态，无论是完成还是未完成。</td>
<td class="left"><code>org-show-todo-tree</code></td>
</tr>

<tr>
<td class="left"><code>C-c a t</code></td>
<td class="left">展示全局 <code>TODO</code> 列表;将所有agenda文件中的TODO项（ <code>not-DONE</code> 状态）收集到一个缓冲区中。 新的缓冲区将处于 <code>agenda-mode</code> ，它提供了从新的缓冲区检查和操作TODO项的命令。</td>
<td class="left"><code>org-todo-list</code></td>
</tr>

<tr>
<td class="left"><code>S-M-RET</code></td>
<td class="left">在当前项之后插入新的 <code>TODO</code> 项</td>
<td class="left"><code>org-insert-todo-heading</code></td>
</tr>
</tbody>
</table>
<p>
注： 改变 <code>TODO</code> 状态也可触发标签发生变更。 请参阅 <code>org-todo-state-tags-triggers</code> 文档以了解详细信息, 也可可查看<a href="http://stackoverflow.com/questions/17559662/how-to-automatically-trigger-a-change-in-todo-state-in-emacs-org-mode" rel="external nofollow noopener noreferrer" target="_blank">How to automatically trigger a change in TODO state in Emacs org-mode</a>。
</p>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 待办事项扩展</h3>
<div class="outline-text-3" id="text-4-2">
<p>
默认情况下， 待办事项只能为以下两种状态之一： <code>TODO</code> 和 <code>DONE</code> 。
<code>Org-mode</code> 允许使用 <code>TODO</code> 关键字（存储在 <code>org-todo-keywords</code> ）以更复杂的方式对 <code>TODO</code> 项目进行分类管理。
通过特殊设置， <code>TODO</code> 关键字系统可在不同的文件对不同的工作流程进行定制。
</p>
</div>
<div id="outline-container-sec-4-2-1" class="outline-4">
<h4 id="sec-4-2-1"><span class="section-number-4">4.2.1</span> 工作流状态应用</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
可以使用 <code>TODO</code> 关键字来表示项目进行过程中工作流状态，例如：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-todo-keywords&#10;   &#39;((sequence &#34;TODO&#34; &#34;FEEDBACK&#34; &#34;VERIFY&#34; &#34;|&#34; &#34;DONE&#34; &#34;DELEGATED&#34;)))</span><br></pre></td></tr></table></figure>
</div>
<p>
垂直条将 <code>TODO</code> 关键字（需要处理的状态）从DONE状态分离（无需进一步操作）。
如果不提供垂直条，则最后一个状态用作 <code>DONE</code> 状态。
使用以上设置，命令 <code>C-c C-t</code> 将待办事项从 <code>TODO</code> 循环到 <code>FEEDBACK</code> ，然后到 <code>VERIFY</code> ，最后到 <code>DONE</code> 和 <code>DELEGATED</code> 。
也可以使用数字前缀参数快速选择特定状态。 例如， <code>C-3 C-c C-t</code> 将立即将状态更改为VERIFY。 或者可以使用 <code>S-left/right</code> 向后/向前遍历序列。
</p>
</div>
</div>
<div id="outline-container-sec-4-2-2" class="outline-4">
<h4 id="sec-4-2-2"><span class="section-number-4">4.2.2</span> 类型标示应用</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
第二种可能性是使用TODO关键字来指示待办事项的隶属于不同类型。
例如，可能希望指出项目是 <i>work</i> 或 <i>home</i> 。
或者，当在一个项目中与多个人合作时，可能需要通过使用他们的名字作为 <code>TODO</code> 关键字来将项目任务直接分配给个人。
如下配置：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-todo-keywords &#39;((type &#34;Fred&#34; &#34;Sara&#34; &#34;Lucy&#34; &#34;|&#34; &#34;DONE&#34;)))</span><br></pre></td></tr></table></figure>
</div>
<p>
在这种情况下，不同的关键字不表示序列，而是不同的类型。
所以正常的工作流程是将任务分配给一个人，然后将其标记为DONE。
<code>Org-mode</code> 通过调整命令 <code>C-c C-t</code> 的工作机制来支持这种风格。
当连续使用多次时，它仍将循环遍历所有名称，以便首先为任务选择正确的类型。
但是，当经过一段时间后返回该项目并再次执行 <code>C-c C-t</code> ，它将从任何名称直接切换到 <code>DONE</code> 。
使用前缀参数或完成快速选择一个特定的名称。 还可以使用 <code>C-c / t</code> 的数字前缀来查看稀疏树中特定 <code>TODO</code> 类型的项目。
例如，要查看Lucy所做的一切事情，使用 <code>C-3 C-c / t</code> 。
要将Lucy的所有项目从所有议程文件收集到一个单独的库中，还可以在创建全局TODO列表时使用数字前缀参数： <code>C-3 C-c a t</code> 。
</p>
</div>
</div>
<div id="outline-container-sec-4-2-3" class="outline-4">
<h4 id="sec-4-2-3"><span class="section-number-4">4.2.3</span> 单个文件中多个关键字集合</h4>
<div class="outline-text-4" id="text-4-2-3">
<p>
有时可能需要并行使用不同的TODO关键字集。
例如，可能需要具有基本的 <code>TODO</code> / <code>DONE</code> ，还有一个修复错误的工作流程，以及指示某个项目已被取消的单独状态（因此它不是 <code>DONE</code> ，也不需要执行操作）。
设置如下所示：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-todo-keywords&#10;      &#39;((sequence &#34;TODO&#34; &#34;|&#34; &#34;DONE&#34;)&#10;&#9;(sequence &#34;REPORT&#34; &#34;BUG&#34; &#34;KNOWNCAUSE&#34; &#34;|&#34; &#34;FIXED&#34;)&#10;&#9;(sequence &#34;|&#34; &#34;CANCELED&#34;)))</span><br></pre></td></tr></table></figure>
</div>
<p>
这些关键字应该是不同的，这有助于 <code>Org-mode</code> 跟踪给定条目应该使用哪个子序列。
在这个设置中， <code>C-c C-t</code> 只能在一个子序列中运行，
所以它从 <code>DONE</code> 切换到（无）到 <code>TODO</code> ，
从 <code>FIXED</code> 切换到（无）到 <code>REPORT</code> 。
因此，需要一种机制来正确初始选择序列。
除了显式的键入关键字或使用补全外，还可应用以下命令：
</p>
<dl class="org-dl">
<dt> <code>C-u C-u C-c C-t</code> <code>C-S-right/left</code> </dt><dd></dd>
</dl>
<p>
这些键从一个 <code>TODO</code> 子集跳到下一个。
在上面的例子中， <code>C-u C-u C-c C-t</code> 或 <code>C-S-right</code> 将从 <i>TODO</i> 或 <i>DONE</i> 跳到 <i>REPORT</i> ，
而第二行中的任何一个字都可跳转到 <code>CANCELED</code> 。
</p>
<dl class="org-dl">
<dt> <code>S-right/left</code> </dt><dd></dd>
</dl>
<p>
<code>S-right/left</code> 并从所有集合中遍历所有关键字，例如在上面的例子中，S-right将从DONE切换到REPORT。
</p>
</div>
</div>

<div id="outline-container-sec-4-2-4" class="outline-4">
<h4 id="sec-4-2-4"><span class="section-number-4">4.2.4</span> 快速访问代办状态</h4>
<div class="outline-text-4" id="text-4-2-4">
<p>
如果要快速将条目更改为任意TODO状态，而不是循环遍历状态，则可以设置单个字符来快速访问状态的键。
这是通过在每个关键字后面的括号中添加选择字符来完成的。
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-todo-keywords&#10;     &#39;((sequence &#34;TODO(t)&#34; &#34;|&#34; &#34;DONE(d)&#34;)&#10;       (sequence &#34;REPORT(r)&#34; &#34;BUG(b)&#34; &#34;KNOWNCAUSE(k)&#34; &#34;|&#34; &#34;FIXED(f)&#34;)&#10;       (sequence &#34;|&#34; &#34;CANCELED(c)&#34;)))</span><br></pre></td></tr></table></figure>
</div>
<p>
如果按C-c C-t，后按选择键，则条目将切换到此状态。 SPC可用于从条目中删除任何TODO关键字。
</p>
</div>
</div>
<div id="outline-container-sec-4-2-5" class="outline-4">
<h4 id="sec-4-2-5"><span class="section-number-4">4.2.5</span> 为文件设置独立的关键字集合</h4>
<div class="outline-text-4" id="text-4-2-5">
<p>
在不同文件中使用 <code>TODO</code> 机制的不同方面是非常有用的。
对于文件本地设置，需要在文件中添加专用行，仅为该文件设置关键字和仅对当前文件起效。
例如，要设置上述两个示例之一，需要在文件中包含以下任何一行：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TODO: TODO FEEDBACK VERIFY | DONE CANCELED</span><br></pre></td></tr></table></figure>
</div>
<p>
或者
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TYP_TODO: Fred Sara Lucy Mike | DONE</span><br></pre></td></tr></table></figure>
</div>
<p>
并行使用几组的设置如下：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+TODO: TODO | DONE&#10;#+TODO: REPORT BUG KNOWNCAUSE | FIXED&#10;#+TODO: | CANCELED</span><br></pre></td></tr></table></figure>
</div>
<p>
在更改其中一行后，在行中使用 <code>C-c C-c</code> ，以使变更生效。
</p>
</div>
</div>

<div id="outline-container-sec-4-2-6" class="outline-4">
<h4 id="sec-4-2-6"><span class="section-number-4">4.2.6</span> 代办事项关键字的样式</h4>
<div class="outline-text-4" id="text-4-2-6">
<p>
<code>Org-mode</code> 突出显示具有特殊样式的TODO关键字：关键字的 <code>org-todo</code> 表示某个项目仍然需要执行，对于表示项目完成的关键字 <code>org-done</code> 。
如果使用两种以上的不同状态，可能需要为其中某些状态使用特殊样式。 可使用选项 <code>org-todo-keyword-faces</code> 来完成。
例如：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-todo-keyword-faces&#10;      &#39;((&#34;TODO&#34; . org-warning) (&#34;STARTED&#34; . &#34;yellow&#34;)&#10;&#9;(&#34;CANCELED&#34; . (:foreground &#34;blue&#34; :weight bold))))</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-sec-4-2-7" class="outline-4">
<h4 id="sec-4-2-7"><span class="section-number-4">4.2.7</span> 待办事项的依赖关系</h4>
<div class="outline-text-4" id="text-4-2-7">
<p>
<code>Org</code> 结构（层次结构和列表）可以轻松定义TODO依赖关系。
通常，在将所有子任务标记为 <code>DONE</code> 之前，不应将父 <code>TODO</code> 任务标记为 <code>DONE</code> 。
有时，对于一些（子）任务有一个逻辑顺序，所以在完成上面的所有兄弟任务之前，一个任务不能被执行。
如果设置自定义选项 <code>org-enforce-todo-dependencies</code> ，Org将会阻塞任务从 <code>TODO</code> 更改为 <code>DONE</code> ，而它的子项不是DONE。
此外，如果条目具有 <code>ORDERED</code> 属性，则每个子项将被阻塞，直到所有较早的兄弟节点被标记为 <code>DONE</code> 。
设置 <code>org-enforce-todo-dependencies</code>,如下所示：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq org-enforce-todo-dependencies t)</span><br></pre></td></tr></table></figure>
</div>

<p>
依赖关系示例如下：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">* TODO Blocked until (two) is done&#10;** DONE one&#10;** TODO two&#10;&#10;* Parent&#10;  :PROPERTIES:&#10;  :ORDERED:  t&#10;  :END:&#10;** TODO a&#10;** TODO b, needs to wait for (a)&#10;** TODO c, needs to wait for (a) and (b)</span><br></pre></td></tr></table></figure>
</div>
<p>
可以使用 <code>NOBLOCKING</code> 属性确保从不阻塞输入：
</p>
<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">* This entry is never blocked&#10;  :PROPERTIES:&#10;  :NOBLOCKING: t&#10;  :END:</span><br></pre></td></tr></table></figure>
</div>

<dl class="org-dl">
<dt> <code>C-c C-x o</code> </dt><dd></dd>
</dl>
<p>
切换当前条目的 <code>ORDERED</code> 属性。 <code>ORDERED</code> 属性只适用于当前项，而不是像标签一样可继承。
但是，如果要使用标签跟踪该属性的值，以便更好地查看，请自定义选项 <code>org-track-ordered-property-with-tag</code> 。
</p>
<dl class="org-dl">
<dt> <code>C-u C-u C-u C-c C-t</code> </dt><dd>改变 <code>TODO</code> 状态，规避任何状态阻塞。
</dd>
</dl>


<p>
如果设置选项 <code>org-agenda-dim-blocked-tasks</code> ，则由于这些依赖关系而无法关闭的TODO条目将以渐变字体显示，甚至在议程视图中不可见。
还可以通过查看复选框来阻止 <code>TODO</code> 状态的更改。 如果设置了选项 <code>org-enforce-todo-checkbox-dependencies</code> ，则将禁止具有未选中复选框的条目切换到 <code>DONE</code> 。
如果需要更复杂的依赖关系结构，例如不同树或文件中的条目之间的依赖关系，请查看模块 <i>org-depend.el</i> 。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 进度记录</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> 关闭项目</h4>
</div>
<div id="outline-container-sec-4-3-2" class="outline-4">
<h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span> 追踪TODO状态变化</h4>
</div>
<div id="outline-container-sec-4-3-3" class="outline-4">
<h4 id="sec-4-3-3"><span class="section-number-4">4.3.3</span> 追踪你的习惯</h4>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> 优先级</h3>
</div>
<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> 任务分解</h3>
</div>
<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> 复选框</h3>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 标签</h2>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 属性</h2>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 日期和时间</h2>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 捕获——转发——存档</h2>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 议程视图</h2>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
org-mode 官方链接地址: <a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">http://orgmode.org</a>
</p></div>


</div>
</div>
Last Updated 2017-10-13 Fri 17:33.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/11/org-syntax/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/11/org-syntax/" itemprop="url">Org-mode的语法解读</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-11T00:00:00+08:00">
                2017-03-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/org-mode/" itemprop="url" rel="index">
                    <span itemprop="name">org-mode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/11/org-syntax/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/11/org-syntax/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

<blockquote>
<p>
原文<a href="http://orgmode.org/worg/dev/org-syntax.html" rel="external nofollow noopener noreferrer" target="_blank">Org Syntax (draft)</a><sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>由 <b>Nicolas Goaziou</b> 编辑，维护。本文只做学习之用。
</p>
</blockquote>

<p>
本文档描述和说明被org的解析器和导出器框架使用的语法，当然还有几个对于当前语法的意见和建议。
</p>

<p>
在 <b>Org</b> 语法中核心概念是： 只有 <b>headlines</b>, <b>sections</b>, <b>planning lines</b> 和 <b>property drawers</b> 四种语法结构是上下文无关的<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup><sup>, </sup><sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup>；
其他语法结构只能存在于特定 <i>Environments</i> 之中。
</p>

<p>
<i>Environments</i> 从大到小(作用范围的尺度来做分类标准,从最宽到最窄)，大致可分为三类: "Greater element", "Element" 和 "Object"。
<b>Element</b> 被用到了两个类的命名中，Greater 和 non-Greater, 这代表了什么呢？代表了这两类有共通之处，即它们的上下文都会被清除，重新初始化。
</p>

<p>
<b>Paragraph</b> 是最小的语法单元。 定义 <b>Element</b> 的子语法结构和 <b>Paragraph</b> 同级,即不能包含 <b>Paragraph</b> 或者被包含在 <b>Paragraph</b> 中。
一个 <b>Object</b> 可以作为一部分被一个 <b>Element</b> 所包含。 <b>Greater element</b> 的任意部分都可以是一个 <b>Element</b> 。
</p>

<div class="export">
<p>
&lt;!&#x2013; more &#x2013;&gt;
</p>

</div>

<p>
空行属于在它们之前结束的最大 <b>Element</b> 。例如，在列表中，之间的空行属于它们之前的那一项，但列表末尾的空行属于当前列表 <b>Element</b> 。
</p>

<p>
除非特别说明，大小写默认不敏感。
</p>

<div id="outline-container-Headlines_and_Sections" class="outline-2">
<h2 id="Headlines_and_Sections"><a id="sec-1" name="sec-1"></a><span class="section-number-2">1</span> Headlines and Sections</h2>
<div class="outline-text-2" id="text-Headlines_and_Sections">

<p>
<b>Headline</b> 定义如下:
</p>

<pre class="example">
STARS KEYWORD PRIORITY TITLE TAGS
</pre>

<p>
<b>STARS</b> 是一个从第0列开始的字符串，至少包含一个星号（如果加载了 <code>org-inlinetask</code> 库，则上限为 <code>org-inlinetask-min-level</code> ），并以空格字符结尾。
星号的个数代表标题的等级。它是标题中唯一必须的部分。
</p>

<p>
<b>KEYWORD</b> 是一个TODO关键字，它必须被定义在 <code>org-todo-keywords-1</code> 的列表。 大小写敏感。
</p>

<p>
<b>PRIORITY</b> 是一个优先级标示(priority cookie)。示例: <code>[#A]</code> 。
</p>

<p>
<b>TITLE</b> 可以由换行符以外的任意字符组成。 标题下的内容匹配了搜索条件，代表此标题匹配。
</p>

<p>
<b>TAGS</b> 由 <code>:</code> 分隔的多个单词组成, 单词可由任何字母数字字符， <code>_</code> ， <code>@</code> ， <code>#</code> 或 <code>%</code> 组成。
</p>

<p>
有效标题的示例,如下：
</p>

<pre class="example">
*

** DONE

*** Some e-mail

**** TODO [#A] COMMENT Title :tag:a2%:
</pre>

<p>
若标题中的第一个单词是 <code>org-comment-string</code> ，当前标题将被作为 /"commented"/ 。 大小写敏感。
若标题中的第一个单词是 <code>org-quote-string</code> ，当前标题将被作为 /"quoted"/ 。 大小写敏感。
</p>

<p>
若其标题是 <code>org-footnote-section</code> 将被作为 /"footnote section"/。 大小写敏感。
</p>

<p>
若 <code>org-archive-tag</code> 是它的标签之一，它被作为 /"archived"/ 。 大小写敏感。
</p>

<p>
标题可直接包含一个段落（可选），再跟任意数量的更深级别的标题(递归定义)。 一个段落可直接包含任意 <code>Greater elelment</code> 或 <code>Element</code> 。
只有标题可以包含段落。 文档中的第一个标题之前的文本除外，因为它属于一个段落。
</p>

<p>
作为示例，请考虑以下文档：
</p>

<div class="org-src-container">

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">An introduction.&#10;&#10;* A Headline &#10;&#10;  Some text.&#10;&#10;** Sub-Topic 1&#10;&#10;** Sub-Topic 2&#10;&#10;*** Additional entry &#10;&#10;** QUOTE Another Sub-Topic&#10;&#10;   Some other text.</span><br></pre></td></tr></table></figure>
</div>

<p>
其内部结构可概括为:
</p>

<pre class="example">
(document
 (section)
 (headline
  (section)
  (headline)
  (headline
   (headline))
  (headline
   (quote-section))))
</pre>
</div>
</div>

<div id="outline-container-Affiliated_keywords" class="outline-2">
<h2 id="Affiliated_keywords"><a id="sec-2" name="sec-2"></a><span class="section-number-2">2</span> Affiliated Keywords</h2>
<div class="outline-text-2" id="text-Affiliated_keywords">

<p>
除了<a href="#Inlinetasks">inlinetasks</a>, <a href="#Plain_Lists_and_Items">items</a>, <a href="#Clock-_Diary_Sexp_and_Planning">planning</a>, <a href="#Clock-_Diary_Sexp_and_Planning">clocks</a>, <a href="#Node_Properties">node properties</a> 和 <a href="#Table_Rows">table rows</a> 之外，其他的任意的 <code>Element</code> 类型都可为其指定属性。
</p>

<p>
在选定的 <code>Element</code> 之前添加命名为 <b>Affiliated keywords</b> 的特定关键字,可指定属性的(在 <code>Element</code> 之前插入"affiliated keywords"，不允许两者之前存在空行)。
</p>

<p>
<b>Affiliated keywords</b> 是建立在以下模式之上的： "#+KEY: VALUE", "#+KEY[OPTIONAL]: VALUE" 或者 "#+ATTR_BACKEND: VALUE" 。
</p>

<p>
<b>KEY</b> 可以是 "CAPTION", "HEADER", "NAME", "PLOT" 或 "RESULTS" 中的任意一个.
</p>

<p>
<b>BACKEND</b> 是一个由字母,数字，连字符或下划线组合而成的字符串。
</p>

<p>
<b>OPTIONAL</b> 和 <b>VALUE</b> 可以包含除换行符以外的任意字符。 只有"CAPTION"和"RESULTS"可以有可选值。
</p>

<p>
如果 <b>KEY</b> 为"CAPTION"或"HEADER"，或者其模式为"＃+ATTR_BACKEND：VALUE"，则 <b>Affiliated keywords</b> 可以多次出现。
</p>

<p>
"CAPTION"，"AUTHOR"，"DATE"和"TITLE"可以包含 <code>Object</code> 及其可选值（如果适用）。
</p>
</div>
</div>

<div id="outline-container-Greater_Elements" class="outline-2">
<h2 id="Greater_Elements"><a id="sec-3" name="sec-3"></a><span class="section-number-2">3</span> Greater Elements</h2>
<div class="outline-text-2" id="text-Greater_Elements">

<p>
除非特别说明， <code>Greater elements</code> 可以直接包含任何其他 <code>Element</code> 或 除了下面之外的 <code>Greater element</code> ：
</p>

<ul class="org-ul">
<li>同样类型的 <code>Element</code>
</li>
<li><a href="#Node_Properties">node properties</a>, 只存在于<a href="#Drawers_and_Property_Drawers">property drawers</a> 中,
</li>
<li><a href="#Plain_Lists_and_Items">items</a>, 只存在于<a href="#Plain_Lists_and_Items">plain lists</a> 中。
</li>
</ul>
</div>

<div id="outline-container-Greater_Blocks" class="outline-3">
<h3 id="Greater_Blocks"><a id="sec-3-1" name="sec-3-1"></a><span class="section-number-3">3.1</span> Greater Blocks</h3>
<div class="outline-text-3" id="text-Greater_Blocks">

<p>
<b>Greater blocks</b> 由以下模式组成:
</p>

<pre class="example">
#+BEGIN_NAME PARAMETERS
CONTENTS
#+END_NAME
</pre>

<p>
<b>NAME</b> 可以由任意非空白字符组成。
</p>

<p>
<b>PARAMETERS</b> 可以包含除换行符以外的任意字符，可以省略。
</p>

<p>
如果 <b>NAME</b> 是 <i>CENTER</i> ，表示当前 <b>Greater block</b> 是一个"center block"。 如果是 <i>QUOTE</i> ，表示是一个"quote block"。
</p>

<p>
如果 <b>Block</b> 既不是 <i>center block</i> ， <i>quote block</i> 或  <a href="#Blocks">block element</a>，则是 <i>special block</i> 。
</p>

<p>
<b>CONTENTS</b> 可以包含任何 <code>Element</code> ，除了： <b>Block</b> 自己的结束行 <i>＃+END_NAME</i> 。 此外，以星号开头的行必须用逗号引号。
</p>
</div>
</div>

<div id="outline-container-Drawers_and_Property_Drawers" class="outline-3">
<h3 id="Drawers_and_Property_Drawers"><a id="sec-3-2" name="sec-3-2"></a><span class="section-number-3">3.2</span> Drawers and Property Drawers</h3>
<div class="outline-text-3" id="text-Drawers_and_Property_Drawers">

<p>
<b>Drawer</b> 的模式如下:
</p>

<pre class="example">
:NAME:
CONTENTS
:END:
</pre>

<p>
<b>NAME</b> 可以包含词组字符(word-constituent characters)，连字符和下划线。
</p>

<p>
<b>NAME</b> 必须是"PROPERTIES"或属于 <code>org-drawers</code> 所定义列表。
</p>

<p>
如果 <b>NAME</b> 是 <i>PROPERTIES</i> ，则 <b>Drawer</b> 即为 <i>property drawer</i> 。
</p>

<p>
CONTENTS可以包含任何 <code>Element</code> ，除了 <b>Drawer</b> 。
</p>

<p>
在 <b>Property drawer</b> 中，*CONTENTS* 只能包含节点 <a href="#Node_Properties">node property</a> <code>Element</code> 。其他类型 <b>Drawer</b> ，它可以包含任何 <code>Element</code> ，除了另一个 <b>Drawer</b> 或 <b>Property drawer</b> 。
</p>

<hr>

<blockquote>
<p>
It would be nice if users hadn't to register drawers names before
using them in <code>org-drawers</code> (or through the <code>#+DRAWERS:</code> keyword).
Anything starting with <code>^[ \t]*:\w+:[ \t]$</code> and ending with
<code>^[ \t]*:END:[ \t]$</code> could be considered as a drawer.  &#x2014; ngz
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Dynamic_Blocks" class="outline-3">
<h3 id="Dynamic_Blocks"><a id="sec-3-3" name="sec-3-3"></a><span class="section-number-3">3.3</span> Dynamic Blocks</h3>
<div class="outline-text-3" id="text-Dynamic_Blocks">

<p>
<b>Dynamic blocks</b> 的模式是：
</p>

<pre class="example">
#+BEGIN: NAME PARAMETERS
CONTENTS
#+END:
</pre>

<p>
<b>NAME</b> 不能包含任何空格字符。
</p>

<p>
<b>PARAMETERS</b> 可以包含任何字符，可以省略。
</p>
</div>
</div>

<div id="outline-container-Footnote_Definitions" class="outline-3">
<h3 id="Footnote_Definitions"><a id="sec-3-4" name="sec-3-4"></a><span class="section-number-3">3.4</span> Footnote Definitions</h3>
<div class="outline-text-3" id="text-Footnote_Definitions">

<p>
<b>Footnote definition</b> 的模式是：
</p>

<pre class="example">
[LABEL] CONTENTS
</pre>

<p>
它必须从列0开始。
</p>

<p>
<b>LABEL</b> 是一个数字或遵循 <code>fn:WORD</code> 的模式，其中word可以包含任何字组字符(word-constituent character)，连字符和下划线字符。
</p>

<p>
<b>CONTENTS</b> 可以包含除另一个 <b>Footnote definition</b> 定义之外的任何元素。 它在下一个脚注定义结束，下一个标题，两个连续的空行或缓冲区的结尾。
</p>
</div>
</div>

<div id="outline-container-Inlinetasks" class="outline-3">
<h3 id="Inlinetasks"><a id="sec-3-5" name="sec-3-5"></a><span class="section-number-3">3.5</span> Inlinetasks</h3>
<div class="outline-text-3" id="text-Inlinetasks">

<p>
<b>Inlinetasks</b> 定义为从第0列开始的 <code>org-inlinetask-min-level</code> 个连续星号字符,后跟空格字符。
</p>

<p>
可选地，可以使用由从第0列开始的 <code>org-inlinetask-min-level</code> 个连续星号字符构成的字符串来结束 <b>Inlinetasks</b> ，后面跟着空格和"END"字符串。
</p>

<p>
只有在加载了 <code>org-inlinetask</code> 库之后才能识别 <b>Inlinetasks</b> 。
</p>
</div>
</div>

<div id="outline-container-Plain_Lists_and_Items" class="outline-3">
<h3 id="Plain_Lists_and_Items"><a id="sec-3-6" name="sec-3-6"></a><span class="section-number-3">3.6</span> Plain Lists and Items</h3>
<div class="outline-text-3" id="text-Plain_Lists_and_Items">

<p>
<b>Item</b> 通过从以下模式开始的行来定义：
</p>
<pre class="example">
BULLET COUNTER-SET CHECK-BOX TAG
</pre>
<p>
其中只有BULLET是必须的。
</p>

<p>
<b>BULLET</b> 是星号，连字符，加号(用于 <i>unstored list</i>)或者遵循模式 <i>COUNTER.</i> 或者 <i>COUNTER)</i> (用于 <i>stored list</i>)。 在任何情况下，BULLET后跟空格字符或换行符。
</p>

<p>
<b>COUNTER</b> 可以是数字或单个字母。
</p>

<p>
<b>COUNTER-SET</b> 遵循模式[@COUNTER]。
</p>

<p>
<b>CHECK-BOX</b> 是单个空格字符， <i>X</i> 字符或连字符，括在方括号中。
</p>

<p>
<b>TAG</b> 遵循 "TAG-TEXT ::"模式，其中TAG-TEXT可以包含除换行符以外的任意字符。
</p>

<p>
<b>Item</b> 在下一个 <b>Item</b> 之前结束条件: 小于或等于其起始行缩进的首行，或两个连续的空行。 其他 <code>Greater elements</code> 内的线的缩进不算，内联边界也不计。
</p>

<p>
<b>Plain list</b> 是一组具有相同缩进的连续 <b>Item</b> 。 它只能直接包含 <b>Item</b> 。
</p>

<p>
如果 <b>Plain list</b> 中的第一个 <b>Item</b> 在其 <b>bullet</b> 中有一个 <i>counter</i> ，那么 <b>Plain list</b> 将是一个 <i>ordered plain-list</i> 。
如果它包含一个 <b>tag</b> ，它将是一个 <i>descriptive list</i> 。 否则，它将是一个 <i>unordered list</i> 。 <b>List</b> 类型是互斥的。
</p>

<p>
示例，思考如下的Org文档片段：
</p>

<pre class="example">
1. item 1
2. [X] item 2
   - some tag :: item 2.1
</pre>

<p>
它的内部结构如下所示:
</p>

<pre class="example">
(ordered-plain-list
 (item)
 (item
  (descriptive-plain-list
   (item))))
</pre>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> Property Drawers</h3>
<div class="outline-text-3" id="text-3-7">
<p>
<b>Property Drawer</b> 是一种特殊类型的 <b>Drawer</b> ，包含附加到标题的属性。 它们位于<a href="#Headlines_and_Sections">headline</a> 和其<a href="#Clock-_Diary_Sexp_and_Planning">planning</a>信息之后。
</p>

<pre class="example">
HEADLINE
PROPERTYDRAWER

HEADLINE
PLANNING
PROPERTYDRAWER
</pre>

<p>
<b>PROPERTYDRAWER</b> 遵循下面的模式
</p>

<pre class="example">
:PROPERTIES:
CONTENTS
:END:
</pre>

<p>
其中 <b>CONTENTS</b> 由零个或多个<a href="#Node_Properties">node properties</a>组成。
</p>
</div>
</div>

<div id="outline-container-Tables" class="outline-3">
<h3 id="Tables"><a id="sec-3-8" name="sec-3-8"></a><span class="section-number-3">3.8</span> Tables</h3>
<div class="outline-text-3" id="text-Tables">

<p>
<b>Tables</b> 从以竖线或"+-"字符串开始的行开始，后面跟着加号或减号，假定它们前面没有相同类型的行。 这些线可以缩进。
</p>

<p>
以垂直条开始的表具有 <b>org</b> 类型。 否则它具有 <b>table.el</b> 类型。
</p>

<p>
Org <b>Tables</b> 结束于以竖线开始的行。 Table.el <b>Tables</b> 结束于不以垂直线或加号开始的行。 这样的线可以是锯齿状的。
</p>

<p>
Org <b>Tables</b> 只能包含 <i>table rows</i> 。 table.el <b>Tables</b> 不包含任何内容。
</p>

<p>
一个或多个"＃+TBLFM：FORMULAS"行，其中 <i>FORMULAS</i> 可以包含任何字符，可以在 Org <b>Tables</b> 之后。
</p>
</div>
</div>
</div>

<div id="outline-container-Elements" class="outline-2">
<h2 id="Elements"><a id="sec-4" name="sec-4"></a><span class="section-number-2">4</span> Elements</h2>
<div class="outline-text-2" id="text-Elements">

<p>
<code>Element</code> 不能包含任何其他元素。
</p>

<p>
只有<a href="#Keywords">keywords</a>名称属于 <code>org-element-document-properties</code>, <a href="#Blocks">verse blocks</a> , <a href="#Paragraphs">paragraphs</a> 和 <a href="#Table_Rows">table rows</a> 可以包含 <code>Object</code> 。
</p>
</div>

<div id="outline-container-Babel_Call" class="outline-3">
<h3 id="Babel_Call"><a id="sec-4-1" name="sec-4-1"></a><span class="section-number-3">4.1</span> Babel Call</h3>
<div class="outline-text-3" id="text-Babel_Call">

<p>
<b>Babel calls</b> 的模式如下:
</p>

<pre class="example">
#+CALL: VALUE
</pre>

<p>
<b>VALUE</b> 是可选的。 它可以包含除换行符以外的任意字符。
</p>
</div>
</div>

<div id="outline-container-Blocks" class="outline-3">
<h3 id="Blocks"><a id="sec-4-2" name="sec-4-2"></a><span class="section-number-3">4.2</span> Blocks</h3>
<div class="outline-text-3" id="text-Blocks">

<p>
像 <a href="#Greater_Blocks">Greater blocks</a> 一样， <b>Block</b> 模式如下：
</p>

<pre class="example">
#+BEGIN_NAME DATA
CONTENTS
#+END_NAME
</pre>

<p>
<b>NAME</b> 不能包含任何空格字符。
</p>

<p>
如果 <b>NAME</b> 是 <i>COMMENT</i> ，它将是一个"comment block"。如果它是 <i>EXAMPLE</i> ，它将是一个"example block"。
如果它是 <i>EXPORT</i> ，它将是一个"export block"。如果它是 <i>SRC</i> ，它将是一个"source block"。如果是 <i>VERSE</i> ，它将是一个"verse block"。
</p>

<p>
如果 <b>NAME</b> 是与加载的任何 <i>export back-end</i> 的名称相匹配，则块将是"export block"。
</p>

<p>
<b>DATA</b> 可以包含除换行符以外的任意字符。它可以省略，除非 <b>Block</b> 是"source block"或"export block"。
在后一种情况(export block)下，它应该由一个单词组成。
在前一种情况(source block)下，它必须遵循"LANGUAGE SWITCHES ARGUMENTS"的模式，其中 <b>SWITCHES</b> 和 <b>ARGUMENTS</b> 是可选的。
</p>

<p>
<b>LANGUAGE</b> 不能包含任何空格字符。
</p>

<p>
<b>SWITCHES</b> 由任意数量的"SWITCH"模式组成，由空行分隔。
</p>

<p>
<b>SWITCH</b> 模式是 "-l" FORMAT ""，其中 <i>FORMAT</i> 可以包含除双引号和换行符之外的任意字符, "-S"或"+ S"，其中S表示单个字母。
</p>

<p>
<b>ARGUMENTS</b> 可以包含除换行符以外的任意字符。
</p>

<p>
<b>CONTENTS</b> 可以包含任意字符, 包括换行符。 <b>Verse block</b> 只能包含 Org <b>Block</b> ，不然的话 <b>CONTENTS</b> 将不能被解析。
</p>
</div>
</div>

<div id="outline-container-Clock,_Diary_Sexp_and_Planning" class="outline-3">
<h3 id="Clock,_Diary_Sexp_and_Planning"><a id="sec-4-3" name="sec-4-3"></a><span class="section-number-3">4.3</span> Clock, Diary Sexp and Planning</h3>
<div class="outline-text-3" id="text-Clock,_Diary_Sexp_and_Planning">

<p>
<b>Clock</b> 模式如下:
</p>

<pre class="example">
CLOCK: TIMESTAMP DURATION
</pre>

<p>
<b>TIMESTAMP</b> 和 <b>DURATION</b> 都是可选的。
</p>

<p>
<b>TIMESTAMP</b> 是一个 <a href="#Timestamp">timestamp</a> <code>object</code> 。
</p>

<p>
<b>DURATION</b> 遵循模式如下:
</p>

<pre class="example">
=&gt; HH:MM
</pre>

<p>
HH是一个包含任意位数的数字。 MM是两位数字。
</p>

<p>
<b>Diary sexp</b> 是以第"%%（"从0列起始一行，它可以包含除了换行符之外的任意字符。
</p>

<p>
<b>planning</b> 遵循下面模式的 <code>Element</code> ：
</p>

<pre class="example">
HEADLINE
PLANNING
</pre>

<p>
其中 <b>HEADLINE</b> 是标题 <code>Element</code> ，PLANNING是填充有INFO部分的行，其中每个都遵循以下模式：
</p>

<pre class="example">
KEYWORD: TIMESTAMP
</pre>

<p>
KEYWORD是 <code>org-deadline-string</code> ， <code>org-scheduled-string</code> 和 <code>org-closed-string</code> 中的一个字符串。 TIMESTAMP是一个<a href="#Timestamp">timestamp</a> <code>Object</code> 。
特别要强调的一点，就是在PLANNING和HEADLINE之间不允许有空行。
</p>

<p>
即使 <code>Planning element</code> 可以存在于一个 <code>Section</code> 中的任何地方或者一个 <code>Greater element</code> 中，但是它只影响标题包含的 <code>Section</code> ，前提是它位在该标题之后。
</p>
</div>
</div>

<div id="outline-container-Comments" class="outline-3">
<h3 id="Comments"><a id="sec-4-4" name="sec-4-4"></a><span class="section-number-3">4.4</span> Comments</h3>
<div class="outline-text-3" id="text-Comments">

<blockquote>
<p>
A "comment line" starts with a hash signe and a whitespace
character or an end of line.
</p>

<p>
Comments can contain any number of consecutive comment lines.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Fixed_Width_Areas" class="outline-3">
<h3 id="Fixed_Width_Areas"><a id="sec-4-5" name="sec-4-5"></a><span class="section-number-3">4.5</span> Fixed Width Areas</h3>
<div class="outline-text-3" id="text-Fixed_Width_Areas">

<blockquote>
<p>
A "fixed-width line" start with a colon character and a whitespace or an end of line.
</p>

<p>
Fixed width areas can contain any number of consecutive fixed-width lines.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Horizontal_Rules" class="outline-3">
<h3 id="Horizontal_Rules"><a id="sec-4-6" name="sec-4-6"></a><span class="section-number-3">4.6</span> Horizontal Rules</h3>
<div class="outline-text-3" id="text-Horizontal_Rules">

<blockquote>
<p>
A horizontal rule is a line made of at least 5 consecutive hyphens.
It can be indented.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Keywords" class="outline-3">
<h3 id="Keywords"><a id="sec-4-7" name="sec-4-7"></a><span class="section-number-3">4.7</span> Keywords</h3>
<div class="outline-text-3" id="text-Keywords">

<p>
<b>Keywords</b> 语法如下:
</p>

<pre class="example">
#+KEY: VALUE
</pre>

<p>
<b>KEY</b> 可以包含任何非空字符，但不能等于"CALL"或任何 <a href="#Affiliated_keywords">Affiliated keyword</a> 。
</p>

<p>
<b>VALUE</b> 可以包含除了换行符之外的任何字符。
</p>

<p>
如果 <b>KEY</b> 属于 <code>org-element-document-properties</code> ，则 <b>VALUE</b> 可以包含 <code>Object</code> 。
</p>
</div>
</div>

<div id="outline-container-LaTeX_Environments" class="outline-3">
<h3 id="LaTeX_Environments"><a id="sec-4-8" name="sec-4-8"></a><span class="section-number-3">4.8</span> LaTeX Environments</h3>
<div class="outline-text-3" id="text-LaTeX_Environments">

<p>
<b>LaTeX environment</b> 的模式如下:
</p>

<pre class="example">

\begin{NAME}ARGUMENTS
CONTENTS
\end{NAME}

</pre>

<p>
<b>NAME</b> 由字母数字或星号字符组成。
</p>

<p>
<b>CONTENTS</b> 可以包含除"\ end {NAME}"字符串之外的任何内容。
</p>

<blockquote>
<p>
NAME is constituted of alpha-numeric characters and may end with an
asterisk.
</p>

<p>
ARGUMENTS is is any number (including zero) of ARGUMENT constructs
like <code>[DATA]</code> or  <code>{DATA}</code> .  DATA can contain any character excepted
a new line or the one ending ARGUMENT.
</p>

<p>
CONTENTS can contain anything but the  "\end{NAME}"  string.
</p>
</blockquote>
</div>
</div>
<div id="outline-container-Node_Properties" class="outline-3">
<h3 id="Node_Properties"><a id="sec-4-9" name="sec-4-9"></a><span class="section-number-3">4.9</span> Node Properties</h3>
<div class="outline-text-3" id="text-Node_Properties">

<p>
<b>Node propertie</b> 只能存在于<a href="#Drawers_and_Property_Drawers">property drawers</a>中。 它可以是下面模式的任意一个:
</p>

<pre class="example">
:NAME: VALUE

:NAME+: VALUE

:NAME:

:NAME+:
</pre>

<p>
NAME* 可以包含任何非空字符，但不能以加号结尾。 不能是空字符串。
</p>

<p>
<b>VALUE</b> 可以包含除换行符之外的任何内容。
</p>
</div>
</div>

<div id="outline-container-Paragraphs" class="outline-3">
<h3 id="Paragraphs"><a id="sec-4-10" name="sec-4-10"></a><span class="section-number-3">4.10</span> Paragraphs</h3>
<div class="outline-text-3" id="text-Paragraphs">

<p>
<b>Paragraphs</b> 是默认 <code>Element</code> ，这意味着任何无法识别的上下文(unrecognized context)都是段落。
</p>

<p>
空行和其他 <code>Element</code> 结束 <b>Paragraphs</b> 。
</p>

<p>
<b>Paragraphs</b> 可以包含任意类型的 <code>Object</code> 。
</p>
</div>
</div>

<div id="outline-container-Table_Rows" class="outline-3">
<h3 id="Table_Rows"><a id="sec-4-11" name="sec-4-11"></a><span class="section-number-3">4.11</span> Table Rows</h3>
<div class="outline-text-3" id="text-Table_Rows">

<p>
<b>Table Row</b> 由 <i>vertical bar</i> 和任意数量的<a href="#Table_Cells">table cells</a>组成，或者由连字符后面跟 <i>vertical ba</i> 组成。
</p>

<p>
在第一种情况下， <b>Tables Row</b> 具有 <i>standard</i> 类型。 在第二种情况下，它具有 <i>rule</i> 类型。
</p>

<p>
<b>Tables Row</b> 只能存在于<a href="#Tables">tables</a>中。
</p>

<blockquote>
<p>
A table rows is either constituted of a vertical bar and any number
of <a href="#Table_Cells">table cells</a> or a vertical bar followed by a hyphen.
</p>

<p>
In the first case the table row has the "standard" type.  In the
second case, it has the "rule" type.
</p>

<p>
Table rows can only exist in <a href="#Tables">tables</a>.
</p>
</blockquote>
</div>
</div>
</div>
<div id="outline-container-Objects" class="outline-2">
<h2 id="Objects"><a id="sec-5" name="sec-5"></a><span class="section-number-2">5</span> Objects</h2>
<div class="outline-text-2" id="text-Objects">

<p>
只能在以下位置找到 <code>Object</code>:
</p>

<ul class="org-ul">
<li><code>org-element-parsed-keywords</code> 中定义的  <a href="#Affiliated_keywords">affiliated keywords</a>,
</li>
<li><a href="#Keywords">document properties</a>,
</li>
<li><a href="#Headlines_and_Sections">headline</a> titles,
</li>
<li><a href="#Inlinetasks">inlinetask</a> titles,
</li>
<li><a href="#Plain_Lists_and_Items">item</a> tags,
</li>
<li><a href="#Paragraphs">paragraphs</a>,
</li>
<li><a href="#Table_Cells">table cells</a>,
</li>
<li><a href="#Table_Rows">table rows</a>, 它只能包含 <i>table cell</i> <code>objects</code> ,
</li>
<li><a href="#Blocks">verse blocks</a>.
</li>
</ul>

<p>
大多数 <code>Object</code> 不能包含 <code>Object</code> 。 那些可以包含的会做特别说明的。
</p>
</div>

<div id="outline-container-Entities_and_LaTeX_Fragments" class="outline-3">
<h3 id="Entities_and_LaTeX_Fragments"><a id="sec-5-1" name="sec-5-1"></a><span class="section-number-3">5.1</span> Entities and LaTeX Fragments</h3>
<div class="outline-text-3" id="text-Entities_and_LaTeX_Fragments">

<p>
<b>Entities</b> 遵循的模式如下：
</p>

<pre class="example">
\NAME POST
</pre>

<p>
其中 <b>NAME</b> 和 <code>org-entities</code> 或 <code>org-entities-user</code> 之间具有有效关联。
</p>

<p>
<b>POST</b> 是行尾，"{}""字符串或非字母字符。 它不是由空格符与NAME分隔。
where NAME has a valid association in either <code>org-entities</code> or <code>org-entities-user</code>.
</p>

<p>
<b>LaTeX Fragments</b> 可以遵循多种模式:
</p>

<pre class="example">
\NAME BRACKETS
\(CONTENTS\)
\[CONTENTS\]
$$CONTENTS$$
PRE$CHAR$POST
PRE$BORDER1 BODY BORDER2$POST
</pre>

<p>
<b>NAME</b> 仅包含字母字符，且不能和 <code>org-entities</code> 或  <code>org-entities-user</code> 具有关联。
</p>

<p>
<b>BRACKETS</b> 是可选的，不与 <b>NAME</b> 用空格分隔。 它可以包含任意数量的以下模式：
</p>
<pre class="example">

[CONTENTS1]
{CONTENTS2}

</pre>

<p>
其中CONTENTS1可以包含除"{""}"，"[""]"以及换行符和CONTENTS2之外的任何字符可以包含除"{"，"}"和换行符之外的任何字符。
</p>

<blockquote>
<p>
CONTENTS can contain any character but cannot contain "\)" in the second template or "\]" in the third one.
</p>

<p>
PRE is either the beginning of line or a character different from <code>$</code>.
</p>

<p>
CHAR is a non-whitespace character different from <code>.</code>, ~,~, <code>?</code>, <code>;</code>, ~'~ or a double quote.
</p>

<p>
POST is any of <code>-</code>, <code>.</code>, ~,~, <code>?</code>, <code>;</code>, <code>:</code>, ~'~, a double quote, a whitespace character and the end of line.
</p>

<p>
BORDER1 is a non-whitespace character different from <code>.</code>, <code>;</code>, <code>.</code> and <code>$</code>.
</p>

<p>
BODY can contain any character excepted <code>$</code>, and may not span over more than 3 lines.
</p>

<p>
BORDER2 is any non-whitespace character different from ~,~, <code>.</code> and <code>$</code>.
</p>
</blockquote>

<hr>

<blockquote>
<p>
It would introduce incompatibilities with previous Org versions,
but support for <code>$...$</code> (and for symmetry, <code>$$...$$</code>) constructs
ought to be removed.
</p>

<p>
They are slow to parse, fragile, redundant and imply false
positives.  &#x2014; ngz
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Export_Snippets" class="outline-3">
<h3 id="Export_Snippets"><a id="sec-5-2" name="sec-5-2"></a><span class="section-number-3">5.2</span> Export Snippets</h3>
<div class="outline-text-3" id="text-Export_Snippets">

<p>
<b>Export snippets</b> 模式如下:
</p>

<pre class="example">
@@NAME:VALUE@@
</pre>

<p>
<b>NAME</b> 可以包含任何字母数字字符和连字符。
</p>

<p>
<b>VALUE</b> 可以包含除"@@"字符串之外的任何内容。
</p>
</div>
</div>

<div id="outline-container-Footnote_References" class="outline-3">
<h3 id="Footnote_References"><a id="sec-5-3" name="sec-5-3"></a><span class="section-number-3">5.3</span> Footnote References</h3>
<div class="outline-text-3" id="text-Footnote_References">

<p>
<code>Footnote References</code> 有四种模式:
</p>

<pre class="example">
[MARK]
[fn:LABEL]
[fn:LABEL:DEFINITION]
[fn::DEFINITION]
</pre>

<p>
<b>MARK</b> 是一个数字。
</p>

<p>
<b>LABEL</b> 可以包含任何字组成字符，连字符和下划线。
</p>

<p>
<b>DEFINITION</b> 可以包含任何字符。 开关方括号必须成对出现。 它可以包含任何出现在 <b>Paragraph</b> 中的 <code>Object</code> ，甚至其他 <b>Footnote Reference</b> 。
</p>

<p>
如果引用遵循第三模式，则其被称为 <i>inline footnote</i> ，如果它跟随第四个，即如果省略 <b>LABEL</b> ，它是一个 <i>anonymous footnote</i> 。
</p>
</div>
</div>

<div id="outline-container-Inline_Babel_Calls_and_Source_Blocks" class="outline-3">
<h3 id="Inline_Babel_Calls_and_Source_Blocks"><a id="sec-5-4" name="sec-5-4"></a><span class="section-number-3">5.4</span> Inline Babel Calls and Source Blocks</h3>
<div class="outline-text-3" id="text-Inline_Babel_Calls_and_Source_Blocks">

<p>
<b>Inline Babel call</b> 遵循以下任何模式:
</p>

<pre class="example">
call_NAME(ARGUMENTS)
call_NAME[HEADER](ARGUMENTS)[HEADER]
</pre>

<blockquote>
<p>
NAME can contain any character besides <code>(</code>, <code>)</code> and "\n".
</p>

<p>
HEADER can contain any character besides <code>]</code> and "\n".
</p>

<p>
ARGUMENTS can contain any character besides <code>)</code> and "\n".
</p>
</blockquote>

<p>
<code>Inline source blocks</code> 遵循以下任何模式:
</p>

<pre class="example">

src_LANG{BODY}
src_LANG[OPTIONS]{BODY}

</pre>

<blockquote>
<p>
LANG can contain any non-whitespace character.
</p>

<p>
OPTIONS and BODY can contain any character but "\n".
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Line_Breaks" class="outline-3">
<h3 id="Line_Breaks"><a id="sec-5-5" name="sec-5-5"></a><span class="section-number-3">5.5</span> Line Breaks</h3>
<div class="outline-text-3" id="text-Line_Breaks">

<blockquote>
<p>
A line break consists in "\\SPACE" pattern at the end of an otherwise non-empty line.
</p>

<p>
SPACE can contain any number of tabs and spaces, including 0.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Links" class="outline-3">
<h3 id="Links"><a id="sec-5-6" name="sec-5-6"></a><span class="section-number-3">5.6</span> Links</h3>
<div class="outline-text-3" id="text-Links">

<p>
有4种主要类型的 <b>Link</b>:
</p>

<pre class="example">
PRE1 RADIO POST1          ("radio" link)
&lt;PROTOCOL:PATH&gt;           ("angle" link)
PRE2 PROTOCOL:PATH2 POST2 ("plain" link)
[[PATH3]DESCRIPTION]      ("regular" link)
</pre>

<p>
<b>PRE1</b> 和 <b>POST1</b> （如果存在）是非字母数字字符。
</p>

<p>
<b>RADIO</b> 是被某些<a href="#Targets_and_Radio_Targets">radio target</a> 匹配的字符串。 它可以只包含 <a href="#Entities_and_LaTeX_Fragments">entities</a>, <a href="#Entities_and_LaTeX_Fragments">latex fragments</a>, <a href="#Subscript_and_Superscript">subscript</a> 和 <a href="#Subscript_and_Superscript">superscript</a>。
</p>

<p>
<b>PROTOCOL</b> 属于 <code>org-link-types</code> 中定义的链接协议类型。
</p>

<p>
<b>PATH</b> 可以包含除了 <code>]</code>, <code>&lt;</code>, <code>&gt;</code> 和 <code>\n</code> 以外的任何字符。
</p>

<p>
<b>PRE2</b> 和 <b>POST2</b> ，当它们存在时，是非字构成字符(word constituent characters)。
</p>

<p>
<b>PATH2</b> 可以包含除了 <code>(</code>, <code>)</code>, <code>&lt;</code> 和 <code>&gt;</code> 之外的任何非空字符。 它必须以字组成字符结尾，或任何非空格 非标点符号后面跟着 <code>/</code> 。
</p>

<p>
<b>DESCRIPTION</b> 必须括在方括号中。 它可以包含除了方括号以外的任何字符。
它可以包含除了 <a href="#Footnote_References">footnote reference</a>, <a href="#Targets_and_Radio_Targets">radio target</a> 和 <a href="#Line_Breaks">line break</a>之外的任何可在 <code>paragraph</code> 中找到的 <code>object</code> 。
它不能包含另一个 <b>link</b> ，除非它是 <i>plain</i> 或者 <i>angular</i> <b>link</b> 。
</p>

<p>
<b>DESCRIPTION</b> 是可选的。
</p>

<p>
<b>PATH3</b> 根据以下模式构建:
</p>

<pre class="example">
FILENAME           ("file" type)
PROTOCOL:PATH4     ("PROTOCOL" type)
PROTOCOL://PATH4   ("PROTOCOL" type)
id:ID              ("id" type)
#CUSTOM-ID         ("custom-id" type)
(CODEREF)          ("coderef" type)
FUZZY              ("fuzzy" type)
</pre>

<p>
<b>FILENAME</b> 是一个文件名，绝对路径或相对路径。
</p>

<p>
<b>PATH4</b> 可以包含除方括号外的任何字符。
</p>

<p>
<b>ID</b> 由用连字符分隔的十六进制数字构成。
</p>

<p>
<b>PATH4</b> ，*CUSTOM-ID* ，*CODEREF* 和 <b>FUZZY</b> 可以包含除方括号外的任何字符。
</p>

<hr>

<blockquote>
<p>
I suggest to remove angle links.  If one needs spaces in PATH, she can use standard link syntax instead.
</p>

<p>
I also suggest to remove <code>org-link-types</code> dependency in PROTOCOL and match <code>[a-zA-Z]</code> instead, for portability.  &#x2014; ngz
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Macros" class="outline-3">
<h3 id="Macros"><a id="sec-5-7" name="sec-5-7"></a><span class="section-number-3">5.7</span> Macros</h3>
<div class="outline-text-3" id="text-Macros">

<p>
<b>Macros</b> 遵循如下模式:
</p>

<pre class="example">

{{{NAME(ARGUMENTS)}}}

</pre>

<p>
<b>NAME</b> 必须以字母开头，后面可以跟随任意数量的字母数字字符，连字符和下划线。
</p>

<p>
<b>ARGUMENTS</b> 可以包含除"}}}" 字符串之外的任何内容。 <b>ARGUMENTS</b> 中的值用逗号分隔。 非分隔逗号必须用反斜杠字符转义。
</p>
</div>
</div>

<div id="outline-container-Targets_and_Radio_Targets" class="outline-3">
<h3 id="Targets_and_Radio_Targets"><a id="sec-5-8" name="sec-5-8"></a><span class="section-number-3">5.8</span> Targets and Radio Targets</h3>
<div class="outline-text-3" id="text-Targets_and_Radio_Targets">

<p>
<b>Radio targets</b> 的模式如下:
</p>

<pre class="example">
&lt;&lt;&lt;CONTENTS&gt;&gt;&gt;
</pre>

<p>
<b>CONTENTS</b> 可以是除了 <code>&lt;</code>, <code>&gt;</code> 和 <code>\n</code> 之外的任何字符。 它不能以空格字符开始或结束。 作为 <code>objects</code> 而言，它只可以包含 <a href="#Entities_and_LaTeX_Fragments">entities</a>, <a href="#Entities_and_LaTeX_Fragments">latex fragments</a>, <a href="#Subscript_and_Superscript">subscript</a> 和 <a href="#Subscript_and_Superscript">superscript</a>。
</p>

<p>
<b>Targets</b> 的模式如下:
</p>

<pre class="example">
&lt;&lt;TARGET&gt;&gt;
</pre>

<p>
<b>TARGET</b> 可以是除了 <code>&lt;</code>, <code>&gt;</code> 和 <code>\n</code> 之外的任何字符。 不能包含任何 <code>Objects</code> .
</p>
</div>
</div>

<div id="outline-container-Statistics_Cookies" class="outline-3">
<h3 id="Statistics_Cookies"><a id="sec-5-9" name="sec-5-9"></a><span class="section-number-3">5.9</span> Statistics Cookies</h3>
<div class="outline-text-3" id="text-Statistics_Cookies">

<p>
<b>Statistics cookies</b> 遵循任一模式:
</p>

<pre class="example">
[PERCENT%]
[NUM1/NUM2]
</pre>

<p>
<b>PERCENT</b> ，*NUM1* 和 <b>NUM2</b> 是数字或空字符串。
</p>
</div>
</div>

<div id="outline-container-Subscript_and_Superscript" class="outline-3">
<h3 id="Subscript_and_Superscript"><a id="sec-5-10" name="sec-5-10"></a><span class="section-number-3">5.10</span> Subscript and Superscript</h3>
<div class="outline-text-3" id="text-Subscript_and_Superscript">

<p>
<b>Subscript</b> 的模式是:
</p>

<pre class="example">
CHAR_SCRIPT
</pre>

<p>
<b>Superscript</b> 的模式是:
</p>

<pre class="example">
CHAR^SCRIPT
</pre>

<p>
<b>CHAR</b> 是任何非空格字符。
</p>

<p>
<b>SCRIPT</b> 可以是 <code>*</code> 或括在括号（respectively curly brackets）中的表达式，可能包含平衡括号（respectively curly brackets）。
</p>

<p>
SCRIPT循该如下模式:
</p>
<pre class="example">
SIGN CHARS FINAL
</pre>

<p>
<b>SIGN</b> 是加号，减号或空字符串。
</p>

<p>
<b>CHARS</b> 是任意数量的字母数字字符，逗号，反斜杠和点，或空字符串。
</p>

<p>
<b>FINAL</b> 是一个字母数字字符。
</p>

<p>
<b>SIGN</b> ，*CHARS* 和 <b>FINAL</b> 之间没有空格。
</p>
</div>
</div>

<div id="outline-container-Table_Cells" class="outline-3">
<h3 id="Table_Cells"><a id="sec-5-11" name="sec-5-11"></a><span class="section-number-3">5.11</span> Table Cells</h3>
<div class="outline-text-3" id="text-Table_Cells">

<p>
<b>Table cells</b> 遵循如下模式:
</p>

<pre class="example">
CONTENTS SPACES|
</pre>

<p>
CONTENTS可以包含除垂直条之外的任何字符。
</p>

<p>
SPACES包含任意数量的空格字符，包括零。 它可用于正确对齐表格。
</p>

<p>
最后一个条可以用行中最后一个单元格的换行符替换。
</p>
</div>
</div>

<div id="outline-container-Timestamp" class="outline-3">
<h3 id="Timestamp"><a id="sec-5-12" name="sec-5-12"></a><span class="section-number-3">5.12</span> Timestamps</h3>
<div class="outline-text-3" id="text-Timestamp">

<p>
<b>Timestamp</b> 有七种可能的模式:
</p>

<pre class="example">
&lt;%%(SEXP)&gt;                                   (diary)
&lt;DATE TIME REPEATER-OR-DELAY&gt;                                  (active)
[DATE TIME REPEATER-OR-DELAY]                                  (inactive)
&lt;DATE TIME REPEATER-OR-DELAY&gt;--&lt;DATE TIME REPEATER-OR-DELAY&gt;   (active range)
&lt;DATE TIME-TIME REPEATER-OR-DELAY&gt;                             (active range)
[DATE TIME REPEATER-OR-DELAY]--[DATE TIME REPEATER-OR-DELAY]   (inactive range)
[DATE TIME-TIME REPEATER-OR-DELAY]                             (inactive range)
</pre>

<p>
<b>SEXP</b> 可以包含除了 <code>&gt;</code> 和 <code>\n</code> 之外任何字符。
</p>

<p>
<b>DATE</b> 模式如下:
</p>

<pre class="example">
YYYY-MM-DD DAYNAME
</pre>

<p>
<b>Y</b> ，*M* 和 <b>D</b> 是数字。 DAYNAME可以包含除 <code>+</code>, <code>-</code>, <code>]</code>, <code>&gt;</code>, 数字 和 <code>\n</code> 之外的任何非空白字符。
</p>

<p>
<b>TIME</b> 遵循模式= H：MM〜。 H可以是一个或两个数字长，可以从0开始。
</p>

<p>
REPEATER 模式如下:
</p>

<pre class="example">
MARK VALUE UNIT
</pre>

<p>
<b>MARK</b> 对于 <code>repeater</code> 而言，是 <code>+</code> (<i>cumulate type</i>), <code>++</code> (<i>catch-up type</i>) 或者 <code>.+</code> (<i>restart type</i>) 。
在 <code>warning delays</code> 的请求， <b>MARK</b> 可以是 <code>-</code> (<i>all type</i>) 或者 <code>--</code> (<i>first type</i>)。
</p>

<p>
<b>VALUE</b> 是一个数字。
</p>

<p>
<b>UNIT</b> 是h（小时），d（日），w（周），m（月），y（年）中的字符。
</p>

<p>
<b>MARK</b> ，*VALUE* 和 <b>UNIT</b> 不以空格字符分隔。
</p>

<p>
时间戳中可以有两个REPEATER-OR-DELAY：一个作为 <code>repeater</code> ，一个作为 <code>warning delays</code> 。
</p>
</div>
</div>

<div id="outline-container-Emphasis_Markers" class="outline-3">
<h3 id="Emphasis_Markers"><a id="sec-5-13" name="sec-5-13"></a><span class="section-number-3">5.13</span> Text Markup</h3>
<div class="outline-text-3" id="text-Emphasis_Markers">

<p>
<b>Text markup</b> 模式如下:
</p>

<pre class="example">
PRE MARKER CONTENTS MARKER POST
</pre>

<p>
<b>PRE</b> 是一个空格字符, <code>(</code>, <code>{</code> ~'~ 或一个双引号，它也可以是一行的开头。
</p>

<p>
<b>MARKER</b> 是 <code>*</code> (bold), <code>=</code> (verbatim), <code>/</code> (italic), <code>+</code> (strike-through), <code>_</code> (underline), <code>~</code> (code) 中的符号。
</p>

<p>
<b>CONTENTS</b> 是模式如下的字符串:
</p>

<pre class="example">
BORDER BODY BORDER
</pre>

<p>
<b>BORDER</b> 可以是除了 ~,~, ~'~ 和双引号之外的任何非空格字符。
</p>

<p>
<b>BODY</b> 可以包含任何字符，但不能跨越超过3行。
</p>

<p>
<b>BORDER</b> 和 <b>BODY</b> 不被空格分隔。
</p>

<p>
当标记为 "bold", "italic", "strike-through" 或者 "underline"时， <b>CONTENTS</b> 可以包含段落中遇到的任何对象。
</p>

<p>
POST是一个空格字符， <code>-</code>, <code>.</code>, ~,~, <code>:</code>, <code>!</code>, <code>?</code>, ~'~, <code>)</code>, <code>}</code> 或双引号。 它也可以是行尾。
</p>

<p>
<b>PRE</b> ， <b>MARKER</b> ， <b>CONTENTS</b> ，*MARKER* 和 <b>POST</b> 不以空格字符分隔。
</p>

<hr>

<blockquote>
<p>
All of this is wrong if <code>org-emphasis-regexp-components</code> or
<code>org-emphasis-alist</code> are modified.
</p>

<p>
This should really be simplified and made persistent (i.e. no
defcustom allowed).  Otherwise, portability and parsing are
jokes.
</p>

<p>
Also, CONTENTS should be anything within code and verbatim
emphasis, by definition.  &#x2014; ngz
</p>
</blockquote>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">&#33050;&#27880;: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://orgmode.org/worg/dev/org-syntax.html" rel="external nofollow noopener noreferrer" target="_blank">Org Syntax (draft)</a> 的org源码: <a href="http://orgmode.org/worg/sources/dev/org-syntax.org" rel="external nofollow noopener noreferrer" target="_blank">http://orgmode.org/worg/sources/dev/org-syntax.org</a>
</p>

<p class="footpara">
因此，使用 <code>org-element-at-point</code> 或 <code>org-element-context</code> 将向上移动到父标题，并从那里自顶向下解析，直到找到原始位置周围的上下文。
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
特别说明，解析器要求在列0处的星号在不被定义为标题时用逗号来引用。
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
这也意味着只有 <code>Headline</code> 和 <code>Section</code> 能通过查看行的开头来识别。 <code>Planning lines</code> 和 <code>Property drawers</code> 可以通过查看一行或两行以上来识别。
</p></div>


</div>
</div>
Last Updated 2017-05-23 Tue 13:28.<br>Render by <a href="https://github.com/CodeFalling/hexo-renderer-org" rel="external nofollow noopener noreferrer" target="_blank">hexo-renderer-org</a> with <a href="http://www.gnu.org/software/emacs/" rel="external nofollow noopener noreferrer" target="_blank">Emacs</a> 25.3.2 (<a href="http://orgmode.org" rel="external nofollow noopener noreferrer" target="_blank">Org</a> mode 8.2.10)

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://brantou.github.io/2017/03/07/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Brantou">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Brantou的日常">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/07/hello-world/" itemprop="url">Hello World</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-07T00:00:00+08:00">
                2017-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/07/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/07/hello-world/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" rel="external nofollow noopener noreferrer" target="_blank">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" rel="external nofollow noopener noreferrer" target="_blank">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" rel="external nofollow noopener noreferrer" target="_blank">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" rel="external nofollow noopener noreferrer" target="_blank">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" rel="external nofollow noopener noreferrer" target="_blank">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" rel="external nofollow noopener noreferrer" target="_blank">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      

      

    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/26197076?v=3&s=400" alt="Brantou">
            
              <p class="site-author-name" itemprop="name">Brantou</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/brantou" target="_blank" title="GitHub" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/brantou89" target="_blank" title="Twitter" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:brantou89@gmail.com" target="_blank" title="E-Mail" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://www.jianshu.com/u/105d1cd5010c" target="_blank" title="Jianshu" rel="external nofollow noopener noreferrer">
                    
                      <i class="fa fa-fw fa-heartbeat"></i>Jianshu</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Brantou</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow noopener noreferrer">NexT.Pisces</a> v5.1.3</div>



  <div class="footer-custom">Hosted by <a target="_blank" href="https://pages.github.com" rel="external nofollow noopener noreferrer">GitHub Pages</a></div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	

		<script type="text/javascript">
		_hcwp = window._hcwp || [];

		_hcwp.push({widget:"Bloggerstream", widget_id: 89947, selector:".hc-comment-count", label: "{\%COUNT%\}" });

		

		(function() {
		if("HC_LOAD_INIT" in window)return;
		HC_LOAD_INIT = true;
		var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").substr(0, 2).toLowerCase();
		var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
		hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://w.hypercomments.com/widget/hc/89947/"+lang+"/widget.js";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hcc, s.nextSibling);
		})();
		</script>

	
















  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
